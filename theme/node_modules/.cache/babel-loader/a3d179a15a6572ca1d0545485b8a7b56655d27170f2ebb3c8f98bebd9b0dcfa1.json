{"ast":null,"code":"import _classCallCheck from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.parse-float.js\";\nimport \"core-js/modules/es.string.link.js\";\n/**\n * @module ol/format/GPX\n */\nimport Feature from '../Feature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport XMLFeature from './XMLFeature.js';\nimport { OBJECT_PROPERTY_NODE_FACTORY, XML_SCHEMA_INSTANCE_URI, createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender, makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS, parseNode, pushParseAndPop, pushSerializeAndPop } from '../xml.js';\nimport { get as getProjection } from '../proj.js';\nimport { readDateTime, readDecimal, readPositiveInteger, readString, writeDateTimeTextNode, writeDecimalTextNode, writeNonNegativeIntegerTextNode, writeStringTextNode } from './xsd.js';\nimport { transformGeometryWithOptions } from './Feature.js';\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nvar NAMESPACE_URIS = [null, 'http://www.topografix.com/GPX/1/0', 'http://www.topografix.com/GPX/1/1'];\n\n/**\n * @const\n * @type {string}\n */\nvar SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' + 'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n/**\n * @const\n * @type {Object<string, function(Node, Array<*>): (Feature|undefined)>}\n */\nvar FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar GPX_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'rte': makeArrayPusher(readRte),\n  'trk': makeArrayPusher(readTrk),\n  'wpt': makeArrayPusher(readWpt)\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar LINK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'text': makeObjectPropertySetter(readString, 'linkText'),\n  'type': makeObjectPropertySetter(readString, 'linkType')\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar GPX_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'rte': makeChildAppender(writeRte),\n  'trk': makeChildAppender(writeTrk),\n  'wpt': makeChildAppender(writeWpt)\n});\n\n/**\n * @typedef {Object} Options\n * @property {function(Feature, Node):void} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ] HasZ.\n * @property {boolean} [hasM] HasM.\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\n * feature of the source.\n *\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\n * waypoints are ignored.\n *\n * When writing, LineString geometries are output as routes (`<rte>`), and\n * MultiLineString as tracks (`<trk>`).\n *\n * @api\n */\nvar GPX = /*#__PURE__*/function (_XMLFeature) {\n  /**\n   * @param {Options} [options] Options.\n   */\n  function GPX(options) {\n    var _this;\n    _classCallCheck(this, GPX);\n    _this = _callSuper(this, GPX);\n    options = options ? options : {};\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    _this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @type {function(Feature, Node): void|undefined}\n     * @private\n     */\n    _this.readExtensions_ = options.readExtensions;\n    return _this;\n  }\n\n  /**\n   * @param {Array<Feature>} features List of features.\n   * @private\n   */\n  _inherits(GPX, _XMLFeature);\n  return _createClass(GPX, [{\n    key: \"handleReadExtensions_\",\n    value: function handleReadExtensions_(features) {\n      if (!features) {\n        features = [];\n      }\n      for (var i = 0, ii = features.length; i < ii; ++i) {\n        var feature = features[i];\n        if (this.readExtensions_) {\n          var extensionsNode = feature.get('extensionsNode_') || null;\n          this.readExtensions_(feature, extensionsNode);\n        }\n        feature.set('extensionsNode_', undefined);\n      }\n    }\n\n    /**\n     * @param {Element} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions} [options] Options.\n     * @return {import(\"../Feature.js\").default} Feature.\n     */\n  }, {\n    key: \"readFeatureFromNode\",\n    value: function readFeatureFromNode(node, options) {\n      if (!NAMESPACE_URIS.includes(node.namespaceURI)) {\n        return null;\n      }\n      var featureReader = FEATURE_READER[node.localName];\n      if (!featureReader) {\n        return null;\n      }\n      var feature = featureReader(node, [this.getReadOptions(node, options)]);\n      if (!feature) {\n        return null;\n      }\n      this.handleReadExtensions_([feature]);\n      return feature;\n    }\n\n    /**\n     * @param {Element} node Node.\n     * @param {import(\"./Feature.js\").ReadOptions} [options] Options.\n     * @return {Array<import(\"../Feature.js\").default>} Features.\n     */\n  }, {\n    key: \"readFeaturesFromNode\",\n    value: function readFeaturesFromNode(node, options) {\n      if (!NAMESPACE_URIS.includes(node.namespaceURI)) {\n        return [];\n      }\n      if (node.localName == 'gpx') {\n        /** @type {Array<Feature>} */\n        var features = pushParseAndPop([], GPX_PARSERS, node, [this.getReadOptions(node, options)]);\n        if (features) {\n          this.handleReadExtensions_(features);\n          return features;\n        }\n        return [];\n      }\n      return [];\n    }\n\n    /**\n     * Encode an array of features in the GPX format as an XML node.\n     * LineString geometries are output as routes (`<rte>`), and MultiLineString\n     * as tracks (`<trk>`).\n     *\n     * @param {Array<Feature>} features Features.\n     * @param {import(\"./Feature.js\").WriteOptions} [options] Options.\n     * @return {Node} Node.\n     * @api\n     */\n  }, {\n    key: \"writeFeaturesNode\",\n    value: function writeFeaturesNode(features, options) {\n      options = this.adaptOptions(options);\n      //FIXME Serialize metadata\n      var gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n      var xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n      gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n      gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n      gpx.setAttribute('version', '1.1');\n      gpx.setAttribute('creator', 'OpenLayers');\n      pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n      {\n        node: gpx\n      }, GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [options]);\n      return gpx;\n    }\n  }]);\n}(XMLFeature);\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar RTE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'name': makeObjectPropertySetter(readString),\n  'cmt': makeObjectPropertySetter(readString),\n  'desc': makeObjectPropertySetter(readString),\n  'src': makeObjectPropertySetter(readString),\n  'link': parseLink,\n  'number': makeObjectPropertySetter(readPositiveInteger),\n  'extensions': parseExtensions,\n  'type': makeObjectPropertySetter(readString),\n  'rtept': parseRtePt\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar RTEPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ele': makeObjectPropertySetter(readDecimal),\n  'time': makeObjectPropertySetter(readDateTime)\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar TRK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'name': makeObjectPropertySetter(readString),\n  'cmt': makeObjectPropertySetter(readString),\n  'desc': makeObjectPropertySetter(readString),\n  'src': makeObjectPropertySetter(readString),\n  'link': parseLink,\n  'number': makeObjectPropertySetter(readPositiveInteger),\n  'type': makeObjectPropertySetter(readString),\n  'extensions': parseExtensions,\n  'trkseg': parseTrkSeg\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar TRKSEG_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'trkpt': parseTrkPt\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar TRKPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ele': makeObjectPropertySetter(readDecimal),\n  'time': makeObjectPropertySetter(readDateTime)\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nvar WPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ele': makeObjectPropertySetter(readDecimal),\n  'time': makeObjectPropertySetter(readDateTime),\n  'magvar': makeObjectPropertySetter(readDecimal),\n  'geoidheight': makeObjectPropertySetter(readDecimal),\n  'name': makeObjectPropertySetter(readString),\n  'cmt': makeObjectPropertySetter(readString),\n  'desc': makeObjectPropertySetter(readString),\n  'src': makeObjectPropertySetter(readString),\n  'link': parseLink,\n  'sym': makeObjectPropertySetter(readString),\n  'type': makeObjectPropertySetter(readString),\n  'fix': makeObjectPropertySetter(readString),\n  'sat': makeObjectPropertySetter(readPositiveInteger),\n  'hdop': makeObjectPropertySetter(readDecimal),\n  'vdop': makeObjectPropertySetter(readDecimal),\n  'pdop': makeObjectPropertySetter(readDecimal),\n  'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n  'dgpsid': makeObjectPropertySetter(readPositiveInteger),\n  'extensions': parseExtensions\n});\n\n/**\n * @const\n * @type {Array<string>}\n */\nvar LINK_SEQUENCE = ['text', 'type'];\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar LINK_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'text': makeChildAppender(writeStringTextNode),\n  'type': makeChildAppender(writeStringTextNode)\n});\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar RTE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, ['name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept']);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar RTE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'name': makeChildAppender(writeStringTextNode),\n  'cmt': makeChildAppender(writeStringTextNode),\n  'desc': makeChildAppender(writeStringTextNode),\n  'src': makeChildAppender(writeStringTextNode),\n  'link': makeChildAppender(writeLink),\n  'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n  'type': makeChildAppender(writeStringTextNode),\n  'rtept': makeArraySerializer(makeChildAppender(writeWptType))\n});\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar RTEPT_TYPE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, ['ele', 'time']);\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar TRK_SEQUENCE = makeStructureNS(NAMESPACE_URIS, ['name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg']);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar TRK_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'name': makeChildAppender(writeStringTextNode),\n  'cmt': makeChildAppender(writeStringTextNode),\n  'desc': makeChildAppender(writeStringTextNode),\n  'src': makeChildAppender(writeStringTextNode),\n  'link': makeChildAppender(writeLink),\n  'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n  'type': makeChildAppender(writeStringTextNode),\n  'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\n});\n\n/**\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nvar TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar TRKSEG_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'trkpt': makeChildAppender(writeWptType)\n});\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nvar WPT_TYPE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, ['ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src', 'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop', 'ageofdgpsdata', 'dgpsid']);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nvar WPT_TYPE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'ele': makeChildAppender(writeDecimalTextNode),\n  'time': makeChildAppender(writeDateTimeTextNode),\n  'magvar': makeChildAppender(writeDecimalTextNode),\n  'geoidheight': makeChildAppender(writeDecimalTextNode),\n  'name': makeChildAppender(writeStringTextNode),\n  'cmt': makeChildAppender(writeStringTextNode),\n  'desc': makeChildAppender(writeStringTextNode),\n  'src': makeChildAppender(writeStringTextNode),\n  'link': makeChildAppender(writeLink),\n  'sym': makeChildAppender(writeStringTextNode),\n  'type': makeChildAppender(writeStringTextNode),\n  'fix': makeChildAppender(writeStringTextNode),\n  'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n  'hdop': makeChildAppender(writeDecimalTextNode),\n  'vdop': makeChildAppender(writeDecimalTextNode),\n  'pdop': makeChildAppender(writeDecimalTextNode),\n  'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n  'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\n});\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nvar GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk'\n};\n\n/**\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string} [nodeName] Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, nodeName) {\n  var geometry = /** @type {Feature} */value.getGeometry();\n  if (geometry) {\n    var _nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (_nodeName) {\n      var parentNode = objectStack[objectStack.length - 1].node;\n      return createElementNS(parentNode.namespaceURI, _nodeName);\n    }\n  }\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Element} node Node.\n * @param {!Object} values Values.\n * @return {Array<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(parseFloat(node.getAttribute('lon')), parseFloat(node.getAttribute('lat')));\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */values['ele']);\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */values['time']);\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {Array<number>} [ends] Ends.\n * @return {import(\"../geom/Geometry.js\").GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n  /** @type {import(\"../geom/Geometry.js\").GeometryLayout} */\n  var layout = 'XY';\n  var stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = 'XYZM';\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = 'XYZ';\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = 'XYM';\n    stride = 3;\n  }\n  if (stride !== 4) {\n    for (var i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\n    if (ends) {\n      for (var _i = 0, _ii = ends.length; _i < _ii; _i++) {\n        ends[_i] = ends[_i] / 4 * stride;\n      }\n    }\n  }\n  return layout;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  var values = /** @type {Object} */objectStack[objectStack.length - 1];\n  var href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  var values = /** @type {Object} */objectStack[objectStack.length - 1];\n  values['extensionsNode_'] = node;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  var values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    var rteValues = /** @type {!Object} */\n    objectStack[objectStack.length - 1];\n    var flatCoordinates = /** @type {Array<number>} */\n    rteValues['flatCoordinates'];\n    var layoutOptions = /** @type {LayoutOptions} */\n    rteValues['layoutOptions'];\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  var values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    var trkValues = /** @type {!Object} */\n    objectStack[objectStack.length - 1];\n    var flatCoordinates = /** @type {Array<number>} */\n    trkValues['flatCoordinates'];\n    var layoutOptions = /** @type {LayoutOptions} */\n    trkValues['layoutOptions'];\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  var values = /** @type {Object} */objectStack[objectStack.length - 1];\n  parseNode(TRKSEG_PARSERS, node, objectStack);\n  var flatCoordinates = /** @type {Array<number>} */\n  values['flatCoordinates'];\n  var ends = /** @type {Array<number>} */values['ends'];\n  ends.push(flatCoordinates.length);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  var options = /** @type {import(\"./Feature.js\").ReadOptions} */\n  objectStack[0];\n  var values = pushParseAndPop({\n    'flatCoordinates': [],\n    'layoutOptions': {}\n  }, RTE_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  var flatCoordinates = /** @type {Array<number>} */\n  values['flatCoordinates'];\n  delete values['flatCoordinates'];\n  var layoutOptions = /** @type {LayoutOptions} */values['layoutOptions'];\n  delete values['layoutOptions'];\n  var layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n  var geometry = new LineString(flatCoordinates, layout);\n  transformGeometryWithOptions(geometry, false, options);\n  var feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  var options = /** @type {import(\"./Feature.js\").ReadOptions} */\n  objectStack[0];\n  var values = pushParseAndPop({\n    'flatCoordinates': [],\n    'ends': [],\n    'layoutOptions': {}\n  }, TRK_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  var flatCoordinates = /** @type {Array<number>} */\n  values['flatCoordinates'];\n  delete values['flatCoordinates'];\n  var ends = /** @type {Array<number>} */values['ends'];\n  delete values['ends'];\n  var layoutOptions = /** @type {LayoutOptions} */values['layoutOptions'];\n  delete values['layoutOptions'];\n  var layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n  var geometry = new MultiLineString(flatCoordinates, layout, ends);\n  transformGeometryWithOptions(geometry, false, options);\n  var feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  var options = /** @type {import(\"./Feature.js\").ReadOptions} */\n  objectStack[0];\n  var values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  var layoutOptions = /** @type {LayoutOptions} */{};\n  var coordinates = appendCoordinate([], layoutOptions, node, values);\n  var layout = applyLayoutOptions(layoutOptions, coordinates);\n  var geometry = new Point(coordinates, layout);\n  transformGeometryWithOptions(geometry, false, options);\n  var feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n/**\n * @param {Element} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  var context = objectStack[objectStack.length - 1];\n  var properties = context['properties'];\n  var link = [properties['linkText'], properties['linkType']];\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */{\n    node: node\n  }, LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, link, objectStack, LINK_SEQUENCE);\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  var context = objectStack[objectStack.length - 1];\n  var parentNode = context.node;\n  var namespaceURI = parentNode.namespaceURI;\n  var properties = context['properties'];\n  //FIXME Projection handling\n  node.setAttributeNS(null, 'lat', String(coordinate[1]));\n  node.setAttributeNS(null, 'lon', String(coordinate[0]));\n  var geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case 'XYZM':\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n    // fall through\n    case 'XYZ':\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case 'XYM':\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n    // pass\n  }\n  var orderedKeys = node.nodeName == 'rtept' ? RTEPT_TYPE_SEQUENCE[namespaceURI] : WPT_TYPE_SEQUENCE[namespaceURI];\n  var values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n  {\n    node: node,\n    'properties': properties\n  }, WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  var options = /** @type {import(\"./Feature.js\").WriteOptions} */\n  objectStack[0];\n  var properties = feature.getProperties();\n  var context = {\n    node: node\n  };\n  context['properties'] = properties;\n  var geometry = feature.getGeometry();\n  if (geometry.getType() == 'LineString') {\n    var lineString = /** @type {LineString} */\n    transformGeometryWithOptions(geometry, true, options);\n    context['geometryLayout'] = lineString.getLayout();\n    properties['rtept'] = lineString.getCoordinates();\n  }\n  var parentNode = objectStack[objectStack.length - 1].node;\n  var orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  var values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  var options = /** @type {import(\"./Feature.js\").WriteOptions} */\n  objectStack[0];\n  var properties = feature.getProperties();\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  var context = {\n    node: node\n  };\n  context['properties'] = properties;\n  var geometry = feature.getGeometry();\n  if (geometry.getType() == 'MultiLineString') {\n    var multiLineString = /** @type {MultiLineString} */\n    transformGeometryWithOptions(geometry, true, options);\n    properties['trkseg'] = multiLineString.getLineStrings();\n  }\n  var parentNode = objectStack[objectStack.length - 1].node;\n  var orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  var values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n/**\n * @param {Element} node Node.\n * @param {LineString} lineString LineString.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  var context = {\n    node: node\n  };\n  context['geometryLayout'] = lineString.getLayout();\n  context['properties'] = {};\n  pushSerializeAndPop(context, TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY, lineString.getCoordinates(), objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  var options = /** @type {import(\"./Feature.js\").WriteOptions} */\n  objectStack[0];\n  var context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  var geometry = feature.getGeometry();\n  if (geometry.getType() == 'Point') {\n    var point = /** @type {Point} */\n    transformGeometryWithOptions(geometry, true, options);\n    context['geometryLayout'] = point.getLayout();\n    writeWptType(node, point.getCoordinates(), objectStack);\n  }\n}\nexport default GPX;","map":{"version":3,"names":["Feature","LineString","MultiLineString","Point","XMLFeature","OBJECT_PROPERTY_NODE_FACTORY","XML_SCHEMA_INSTANCE_URI","createElementNS","makeArrayPusher","makeArraySerializer","makeChildAppender","makeObjectPropertySetter","makeSequence","makeSimpleNodeFactory","makeStructureNS","parseNode","pushParseAndPop","pushSerializeAndPop","get","getProjection","readDateTime","readDecimal","readPositiveInteger","readString","writeDateTimeTextNode","writeDecimalTextNode","writeNonNegativeIntegerTextNode","writeStringTextNode","transformGeometryWithOptions","NAMESPACE_URIS","SCHEMA_LOCATION","FEATURE_READER","readRte","readTrk","readWpt","GPX_PARSERS","LINK_PARSERS","GPX_SERIALIZERS","writeRte","writeTrk","writeWpt","GPX","_XMLFeature","options","_this","_classCallCheck","_callSuper","dataProjection","readExtensions_","readExtensions","_inherits","_createClass","key","value","handleReadExtensions_","features","i","ii","length","feature","extensionsNode","set","undefined","readFeatureFromNode","node","includes","namespaceURI","featureReader","localName","getReadOptions","readFeaturesFromNode","writeFeaturesNode","adaptOptions","gpx","xmlnsUri","setAttributeNS","setAttribute","GPX_NODE_FACTORY","RTE_PARSERS","parseLink","parseExtensions","parseRtePt","RTEPT_PARSERS","TRK_PARSERS","parseTrkSeg","TRKSEG_PARSERS","parseTrkPt","TRKPT_PARSERS","WPT_PARSERS","LINK_SEQUENCE","LINK_SERIALIZERS","RTE_SEQUENCE","RTE_SERIALIZERS","writeLink","writeWptType","RTEPT_TYPE_SEQUENCE","TRK_SEQUENCE","TRK_SERIALIZERS","writeTrkSeg","TRKSEG_NODE_FACTORY","TRKSEG_SERIALIZERS","WPT_TYPE_SEQUENCE","WPT_TYPE_SERIALIZERS","GEOMETRY_TYPE_TO_NODENAME","objectStack","nodeName","geometry","getGeometry","getType","parentNode","appendCoordinate","flatCoordinates","layoutOptions","values","push","parseFloat","getAttribute","hasZ","hasM","applyLayoutOptions","ends","layout","stride","href","rteValues","trkValues","setProperties","coordinates","context","properties","link","coordinate","String","geometryLayout","orderedKeys","getProperties","lineString","getLayout","getCoordinates","multiLineString","getLineStrings","point"],"sources":["/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/ol/format/GPX.js"],"sourcesContent":["/**\n * @module ol/format/GPX\n */\nimport Feature from '../Feature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport XMLFeature from './XMLFeature.js';\nimport {\n  OBJECT_PROPERTY_NODE_FACTORY,\n  XML_SCHEMA_INSTANCE_URI,\n  createElementNS,\n  makeArrayPusher,\n  makeArraySerializer,\n  makeChildAppender,\n  makeObjectPropertySetter,\n  makeSequence,\n  makeSimpleNodeFactory,\n  makeStructureNS,\n  parseNode,\n  pushParseAndPop,\n  pushSerializeAndPop,\n} from '../xml.js';\nimport {get as getProjection} from '../proj.js';\nimport {\n  readDateTime,\n  readDecimal,\n  readPositiveInteger,\n  readString,\n  writeDateTimeTextNode,\n  writeDecimalTextNode,\n  writeNonNegativeIntegerTextNode,\n  writeStringTextNode,\n} from './xsd.js';\nimport {transformGeometryWithOptions} from './Feature.js';\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.topografix.com/GPX/1/0',\n  'http://www.topografix.com/GPX/1/1',\n];\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION =\n  'http://www.topografix.com/GPX/1/1 ' +\n  'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n/**\n * @const\n * @type {Object<string, function(Node, Array<*>): (Feature|undefined)>}\n */\nconst FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt,\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst GPX_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'rte': makeArrayPusher(readRte),\n  'trk': makeArrayPusher(readTrk),\n  'wpt': makeArrayPusher(readWpt),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LINK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'text': makeObjectPropertySetter(readString, 'linkText'),\n  'type': makeObjectPropertySetter(readString, 'linkType'),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst GPX_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'rte': makeChildAppender(writeRte),\n  'trk': makeChildAppender(writeTrk),\n  'wpt': makeChildAppender(writeWpt),\n});\n\n/**\n * @typedef {Object} Options\n * @property {function(Feature, Node):void} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ] HasZ.\n * @property {boolean} [hasM] HasM.\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\n * feature of the source.\n *\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\n * waypoints are ignored.\n *\n * When writing, LineString geometries are output as routes (`<rte>`), and\n * MultiLineString as tracks (`<trk>`).\n *\n * @api\n */\nclass GPX extends XMLFeature {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    super();\n\n    options = options ? options : {};\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @type {function(Feature, Node): void|undefined}\n     * @private\n     */\n    this.readExtensions_ = options.readExtensions;\n  }\n\n  /**\n   * @param {Array<Feature>} features List of features.\n   * @private\n   */\n  handleReadExtensions_(features) {\n    if (!features) {\n      features = [];\n    }\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      const feature = features[i];\n      if (this.readExtensions_) {\n        const extensionsNode = feature.get('extensionsNode_') || null;\n        this.readExtensions_(feature, extensionsNode);\n      }\n      feature.set('extensionsNode_', undefined);\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromNode(node, options) {\n    if (!NAMESPACE_URIS.includes(node.namespaceURI)) {\n      return null;\n    }\n    const featureReader = FEATURE_READER[node.localName];\n    if (!featureReader) {\n      return null;\n    }\n    const feature = featureReader(node, [this.getReadOptions(node, options)]);\n    if (!feature) {\n      return null;\n    }\n    this.handleReadExtensions_([feature]);\n    return feature;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromNode(node, options) {\n    if (!NAMESPACE_URIS.includes(node.namespaceURI)) {\n      return [];\n    }\n    if (node.localName == 'gpx') {\n      /** @type {Array<Feature>} */\n      const features = pushParseAndPop([], GPX_PARSERS, node, [\n        this.getReadOptions(node, options),\n      ]);\n      if (features) {\n        this.handleReadExtensions_(features);\n        return features;\n      }\n      return [];\n    }\n    return [];\n  }\n\n  /**\n   * Encode an array of features in the GPX format as an XML node.\n   * LineString geometries are output as routes (`<rte>`), and MultiLineString\n   * as tracks (`<trk>`).\n   *\n   * @param {Array<Feature>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions} [options] Options.\n   * @return {Node} Node.\n   * @api\n   */\n  writeFeaturesNode(features, options) {\n    options = this.adaptOptions(options);\n    //FIXME Serialize metadata\n    const gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    gpx.setAttributeNS(\n      XML_SCHEMA_INSTANCE_URI,\n      'xsi:schemaLocation',\n      SCHEMA_LOCATION\n    );\n    gpx.setAttribute('version', '1.1');\n    gpx.setAttribute('creator', 'OpenLayers');\n\n    pushSerializeAndPop(\n      /** @type {import(\"../xml.js\").NodeStackItem} */\n      ({node: gpx}),\n      GPX_SERIALIZERS,\n      GPX_NODE_FACTORY,\n      features,\n      [options]\n    );\n    return gpx;\n  }\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst RTE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'name': makeObjectPropertySetter(readString),\n  'cmt': makeObjectPropertySetter(readString),\n  'desc': makeObjectPropertySetter(readString),\n  'src': makeObjectPropertySetter(readString),\n  'link': parseLink,\n  'number': makeObjectPropertySetter(readPositiveInteger),\n  'extensions': parseExtensions,\n  'type': makeObjectPropertySetter(readString),\n  'rtept': parseRtePt,\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst RTEPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ele': makeObjectPropertySetter(readDecimal),\n  'time': makeObjectPropertySetter(readDateTime),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TRK_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'name': makeObjectPropertySetter(readString),\n  'cmt': makeObjectPropertySetter(readString),\n  'desc': makeObjectPropertySetter(readString),\n  'src': makeObjectPropertySetter(readString),\n  'link': parseLink,\n  'number': makeObjectPropertySetter(readPositiveInteger),\n  'type': makeObjectPropertySetter(readString),\n  'extensions': parseExtensions,\n  'trkseg': parseTrkSeg,\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TRKSEG_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'trkpt': parseTrkPt,\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TRKPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ele': makeObjectPropertySetter(readDecimal),\n  'time': makeObjectPropertySetter(readDateTime),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst WPT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ele': makeObjectPropertySetter(readDecimal),\n  'time': makeObjectPropertySetter(readDateTime),\n  'magvar': makeObjectPropertySetter(readDecimal),\n  'geoidheight': makeObjectPropertySetter(readDecimal),\n  'name': makeObjectPropertySetter(readString),\n  'cmt': makeObjectPropertySetter(readString),\n  'desc': makeObjectPropertySetter(readString),\n  'src': makeObjectPropertySetter(readString),\n  'link': parseLink,\n  'sym': makeObjectPropertySetter(readString),\n  'type': makeObjectPropertySetter(readString),\n  'fix': makeObjectPropertySetter(readString),\n  'sat': makeObjectPropertySetter(readPositiveInteger),\n  'hdop': makeObjectPropertySetter(readDecimal),\n  'vdop': makeObjectPropertySetter(readDecimal),\n  'pdop': makeObjectPropertySetter(readDecimal),\n  'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n  'dgpsid': makeObjectPropertySetter(readPositiveInteger),\n  'extensions': parseExtensions,\n});\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst LINK_SEQUENCE = ['text', 'type'];\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst LINK_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'text': makeChildAppender(writeStringTextNode),\n  'type': makeChildAppender(writeStringTextNode),\n});\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst RTE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n  'name',\n  'cmt',\n  'desc',\n  'src',\n  'link',\n  'number',\n  'type',\n  'rtept',\n]);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst RTE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'name': makeChildAppender(writeStringTextNode),\n  'cmt': makeChildAppender(writeStringTextNode),\n  'desc': makeChildAppender(writeStringTextNode),\n  'src': makeChildAppender(writeStringTextNode),\n  'link': makeChildAppender(writeLink),\n  'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n  'type': makeChildAppender(writeStringTextNode),\n  'rtept': makeArraySerializer(makeChildAppender(writeWptType)),\n});\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst RTEPT_TYPE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, ['ele', 'time']);\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst TRK_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n  'name',\n  'cmt',\n  'desc',\n  'src',\n  'link',\n  'number',\n  'type',\n  'trkseg',\n]);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst TRK_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'name': makeChildAppender(writeStringTextNode),\n  'cmt': makeChildAppender(writeStringTextNode),\n  'desc': makeChildAppender(writeStringTextNode),\n  'src': makeChildAppender(writeStringTextNode),\n  'link': makeChildAppender(writeLink),\n  'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n  'type': makeChildAppender(writeStringTextNode),\n  'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg)),\n});\n\n/**\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst TRKSEG_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'trkpt': makeChildAppender(writeWptType),\n});\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\n// @ts-ignore\nconst WPT_TYPE_SEQUENCE = makeStructureNS(NAMESPACE_URIS, [\n  'ele',\n  'time',\n  'magvar',\n  'geoidheight',\n  'name',\n  'cmt',\n  'desc',\n  'src',\n  'link',\n  'sym',\n  'type',\n  'fix',\n  'sat',\n  'hdop',\n  'vdop',\n  'pdop',\n  'ageofdgpsdata',\n  'dgpsid',\n]);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\n// @ts-ignore\nconst WPT_TYPE_SERIALIZERS = makeStructureNS(NAMESPACE_URIS, {\n  'ele': makeChildAppender(writeDecimalTextNode),\n  'time': makeChildAppender(writeDateTimeTextNode),\n  'magvar': makeChildAppender(writeDecimalTextNode),\n  'geoidheight': makeChildAppender(writeDecimalTextNode),\n  'name': makeChildAppender(writeStringTextNode),\n  'cmt': makeChildAppender(writeStringTextNode),\n  'desc': makeChildAppender(writeStringTextNode),\n  'src': makeChildAppender(writeStringTextNode),\n  'link': makeChildAppender(writeLink),\n  'sym': makeChildAppender(writeStringTextNode),\n  'type': makeChildAppender(writeStringTextNode),\n  'fix': makeChildAppender(writeStringTextNode),\n  'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n  'hdop': makeChildAppender(writeDecimalTextNode),\n  'vdop': makeChildAppender(writeDecimalTextNode),\n  'pdop': makeChildAppender(writeDecimalTextNode),\n  'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n  'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode),\n});\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk',\n};\n\n/**\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string} [nodeName] Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, nodeName) {\n  const geometry = /** @type {Feature} */ (value).getGeometry();\n  if (geometry) {\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (nodeName) {\n      const parentNode = objectStack[objectStack.length - 1].node;\n      return createElementNS(parentNode.namespaceURI, nodeName);\n    }\n  }\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Element} node Node.\n * @param {!Object} values Values.\n * @return {Array<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(\n    parseFloat(node.getAttribute('lon')),\n    parseFloat(node.getAttribute('lat'))\n  );\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['time']));\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {Array<number>} [ends] Ends.\n * @return {import(\"../geom/Geometry.js\").GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n  /** @type {import(\"../geom/Geometry.js\").GeometryLayout} */\n  let layout = 'XY';\n  let stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = 'XYZM';\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = 'XYZ';\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = 'XYM';\n    stride = 3;\n  }\n  if (stride !== 4) {\n    for (let i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = (flatCoordinates.length / 4) * stride;\n    if (ends) {\n      for (let i = 0, ii = ends.length; i < ii; i++) {\n        ends[i] = (ends[i] / 4) * stride;\n      }\n    }\n  }\n  return layout;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  values['extensionsNode_'] = node;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  const values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    const rteValues = /** @type {!Object} */ (\n      objectStack[objectStack.length - 1]\n    );\n    const flatCoordinates = /** @type {Array<number>} */ (\n      rteValues['flatCoordinates']\n    );\n    const layoutOptions = /** @type {LayoutOptions} */ (\n      rteValues['layoutOptions']\n    );\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  const values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    const trkValues = /** @type {!Object} */ (\n      objectStack[objectStack.length - 1]\n    );\n    const flatCoordinates = /** @type {Array<number>} */ (\n      trkValues['flatCoordinates']\n    );\n    const layoutOptions = /** @type {LayoutOptions} */ (\n      trkValues['layoutOptions']\n    );\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  parseNode(TRKSEG_PARSERS, node, objectStack);\n  const flatCoordinates =\n    /** @type {Array<number>} */\n    (values['flatCoordinates']);\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  ends.push(flatCoordinates.length);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (\n    objectStack[0]\n  );\n  const values = pushParseAndPop(\n    {\n      'flatCoordinates': [],\n      'layoutOptions': {},\n    },\n    RTE_PARSERS,\n    node,\n    objectStack\n  );\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates =\n    /** @type {Array<number>} */\n    (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n  const geometry = new LineString(flatCoordinates, layout);\n  transformGeometryWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (\n    objectStack[0]\n  );\n  const values = pushParseAndPop(\n    {\n      'flatCoordinates': [],\n      'ends': [],\n      'layoutOptions': {},\n    },\n    TRK_PARSERS,\n    node,\n    objectStack\n  );\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates =\n    /** @type {Array<number>} */\n    (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  delete values['ends'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n  const geometry = new MultiLineString(flatCoordinates, layout, ends);\n  transformGeometryWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (\n    objectStack[0]\n  );\n  const values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const layoutOptions = /** @type {LayoutOptions} */ ({});\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\n  const layout = applyLayoutOptions(layoutOptions, coordinates);\n  const geometry = new Point(coordinates, layout);\n  transformGeometryWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values, true);\n  return feature;\n}\n\n/**\n * @param {Element} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  const context = objectStack[objectStack.length - 1];\n  const properties = context['properties'];\n  const link = [properties['linkText'], properties['linkType']];\n  pushSerializeAndPop(\n    /** @type {import(\"../xml.js\").NodeStackItem} */ ({node: node}),\n    LINK_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY,\n    link,\n    objectStack,\n    LINK_SEQUENCE\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const namespaceURI = parentNode.namespaceURI;\n  const properties = context['properties'];\n  //FIXME Projection handling\n  node.setAttributeNS(null, 'lat', String(coordinate[1]));\n  node.setAttributeNS(null, 'lon', String(coordinate[0]));\n  const geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case 'XYZM':\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n    // fall through\n    case 'XYZ':\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case 'XYM':\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n    // pass\n  }\n  const orderedKeys =\n    node.nodeName == 'rtept'\n      ? RTEPT_TYPE_SEQUENCE[namespaceURI]\n      : WPT_TYPE_SEQUENCE[namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(\n    /** @type {import(\"../xml.js\").NodeStackItem} */\n    ({node: node, 'properties': properties}),\n    WPT_TYPE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY,\n    values,\n    objectStack,\n    orderedKeys\n  );\n}\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (\n    objectStack[0]\n  );\n  const properties = feature.getProperties();\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == 'LineString') {\n    const lineString = /** @type {LineString} */ (\n      transformGeometryWithOptions(geometry, true, options)\n    );\n    context['geometryLayout'] = lineString.getLayout();\n    properties['rtept'] = lineString.getCoordinates();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(\n    context,\n    RTE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY,\n    values,\n    objectStack,\n    orderedKeys\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (\n    objectStack[0]\n  );\n  const properties = feature.getProperties();\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == 'MultiLineString') {\n    const multiLineString = /** @type {MultiLineString} */ (\n      transformGeometryWithOptions(geometry, true, options)\n    );\n    properties['trkseg'] = multiLineString.getLineStrings();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(\n    context,\n    TRK_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY,\n    values,\n    objectStack,\n    orderedKeys\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {LineString} lineString LineString.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['geometryLayout'] = lineString.getLayout();\n  context['properties'] = {};\n  pushSerializeAndPop(\n    context,\n    TRKSEG_SERIALIZERS,\n    TRKSEG_NODE_FACTORY,\n    lineString.getCoordinates(),\n    objectStack\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (\n    objectStack[0]\n  );\n  const context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == 'Point') {\n    const point = /** @type {Point} */ (\n      transformGeometryWithOptions(geometry, true, options)\n    );\n    context['geometryLayout'] = point.getLayout();\n    writeWptType(node, point.getCoordinates(), objectStack);\n  }\n}\n\nexport default GPX;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}