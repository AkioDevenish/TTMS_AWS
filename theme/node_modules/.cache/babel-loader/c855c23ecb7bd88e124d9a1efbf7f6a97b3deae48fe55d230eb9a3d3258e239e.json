{"ast":null,"code":"import _classCallCheck from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _superPropGet from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/superPropGet.js\";\nimport _inherits from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.timers.js\";\n/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\nimport { unByKey as ol_Observable_unByKey } from 'ol/Observable.js';\nimport ol_control_Control from 'ol/control/Control.js';\nimport ol_layer_Tile from 'ol/layer/Tile.js';\nimport ol_layer_Vector from 'ol/layer/Vector.js';\nimport ol_layer_VectorTile from 'ol/layer/VectorTile.js';\n// ol < 6 compatibility VectorImage is not defined\n// import ol_layer_VectorImage from 'ol/layer/VectorImage.js'\nimport ol_layer_Image from 'ol/layer/Image.js';\nimport ol_layer_Heatmap from 'ol/layer/Heatmap.js';\nimport { intersects as ol_extent_intersects } from 'ol/extent.js';\nimport ol_ext_element from '../util/element.js';\n\n/** Layer Switcher Control.\r\n * @fires select\r\n * @fires drawlist\r\n * @fires toggle\r\n * @fires reorder-start\r\n * @fires reorder-end\r\n * @fires layer:visible\r\n * @fires layer:opacity\r\n * \r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options\r\n *  @param {boolean} options.selection enable layer selection when click on the title\r\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\r\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\r\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\r\n *  @param {boolean} options.reordering allow layer reordering, default true\r\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\r\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\r\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\r\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\r\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\r\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\r\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\r\n *  @param {boolean} options.noScroll prevent handle scrolling, default false\r\n *  @param {function} options.onchangeCheck optional callback on click on checkbox, you can call this method for doing operations after check/uncheck a layer\r\n *\r\n * Layers attributes that control the switcher\r\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\r\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\r\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\r\n */\nvar ol_control_LayerSwitcher = /*#__PURE__*/function (_ol_control_Control) {\n  function olcontrolLayerSwitcher(options) {\n    var _this;\n    _classCallCheck(this, olcontrolLayerSwitcher);\n    options = options || {};\n    var element = ol_ext_element.create('DIV', {\n      className: options.switcherClass || 'ol-layerswitcher'\n    });\n    _this = _callSuper(this, olcontrolLayerSwitcher, [{\n      element: element,\n      target: options.target\n    }]);\n    var self = _this;\n    _this.dcount = 0;\n    _this.show_progress = options.show_progress;\n    _this.oninfo = typeof options.oninfo == 'function' ? options.oninfo : null;\n    _this.onextent = typeof options.onextent == 'function' ? options.onextent : null;\n    _this.hasextent = options.extent || options.onextent;\n    _this.hastrash = options.trash;\n    _this.reordering = options.reordering !== false;\n    _this._layers = [];\n    _this._layerGroup = options.layerGroup && options.layerGroup.getLayers ? options.layerGroup : null;\n    _this.onchangeCheck = typeof options.onchangeCheck == \"function\" ? options.onchangeCheck : null;\n\n    // displayInLayerSwitcher\n    if (typeof options.displayInLayerSwitcher === 'function') {\n      _this.displayInLayerSwitcher = options.displayInLayerSwitcher;\n    }\n\n    // Insert in the map\n    if (!options.target) {\n      element.classList.add('ol-unselectable');\n      element.classList.add('ol-control');\n      element.classList.add(options.collapsed !== false ? 'ol-collapsed' : 'ol-forceopen');\n      _this.button = ol_ext_element.create('BUTTON', {\n        type: 'button',\n        parent: element\n      });\n      _this.button.addEventListener('touchstart', function (e) {\n        element.classList.toggle('ol-forceopen');\n        element.classList.add('ol-collapsed');\n        self.dispatchEvent({\n          type: 'toggle',\n          collapsed: element.classList.contains('ol-collapsed')\n        });\n        e.preventDefault();\n        self.overflow();\n      });\n      _this.button.addEventListener('click', function () {\n        element.classList.toggle('ol-forceopen');\n        element.classList.add('ol-collapsed');\n        self.dispatchEvent({\n          type: 'toggle',\n          collapsed: !element.classList.contains('ol-forceopen')\n        });\n        self.overflow();\n      });\n      if (options.mouseover) {\n        element.addEventListener('mouseleave', function () {\n          element.classList.add(\"ol-collapsed\");\n          self.dispatchEvent({\n            type: 'toggle',\n            collapsed: true\n          });\n        });\n        element.addEventListener('mouseover', function () {\n          element.classList.remove(\"ol-collapsed\");\n          self.dispatchEvent({\n            type: 'toggle',\n            collapsed: false\n          });\n        });\n      }\n      if (options.minibar) options.noScroll = true;\n      if (!options.noScroll) {\n        _this.topv = ol_ext_element.create('DIV', {\n          className: 'ol-switchertopdiv',\n          parent: element,\n          click: function click() {\n            self.overflow(\"+50%\");\n          }\n        });\n        _this.botv = ol_ext_element.create('DIV', {\n          className: 'ol-switcherbottomdiv',\n          parent: element,\n          click: function click() {\n            self.overflow(\"-50%\");\n          }\n        });\n      }\n      _this._noScroll = options.noScroll;\n    }\n    _this.panel_ = ol_ext_element.create('UL', {\n      className: 'panel'\n    });\n    _this.panelContainer_ = ol_ext_element.create('DIV', {\n      className: 'panel-container',\n      html: _this.panel_,\n      parent: element\n    });\n    // Handle mousewheel\n    if (!options.target && !options.noScroll) {\n      ol_ext_element.addListener(_this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function (e) {\n        if (self.overflow(Math.max(-1, Math.min(1, e.wheelDelta || -e.detail)))) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      });\n    }\n    _this.header_ = ol_ext_element.create('LI', {\n      className: 'ol-header',\n      parent: _this.panel_\n    });\n    _this.set('drawDelay', options.drawDelay || 0);\n    _this.set('selection', options.selection);\n    if (options.minibar) {\n      // Wait init complete (for child classes)\n      setTimeout(function () {\n        var mbar = ol_ext_element.scrollDiv(this.panelContainer_, {\n          mousewheel: true,\n          vertical: true,\n          minibar: true\n        });\n        this.on(['drawlist', 'toggle'], function () {\n          mbar.refresh();\n        });\n      }.bind(_this));\n    }\n    return _this;\n  }\n  /** Test if a layer should be displayed in the switcher\r\n   * @param {ol.layer} layer\r\n   * @return {boolean} true if the layer is displayed\r\n   */\n  _inherits(olcontrolLayerSwitcher, _ol_control_Control);\n  return _createClass(olcontrolLayerSwitcher, [{\n    key: \"displayInLayerSwitcher\",\n    value: function displayInLayerSwitcher(layer) {\n      return layer.get('displayInLayerSwitcher') !== false;\n    }\n    /**\r\n     * Set the map instance the control is associated with.\r\n     * @param {_ol_Map_} map The map instance.\r\n     */\n  }, {\n    key: \"setMap\",\n    value: function setMap(map) {\n      _superPropGet(olcontrolLayerSwitcher, \"setMap\", this, 3)([map]);\n      this.drawPanel();\n      if (this._listener) {\n        for (var i in this._listener) {\n          ol_Observable_unByKey(this._listener[i]);\n        }\n      }\n      this._listener = null;\n\n      // Get change (new layer added or removed)\n      if (map) {\n        this._listener = {\n          moveend: map.on('moveend', this.viewChange.bind(this)),\n          size: map.on('change:size', this.overflow.bind(this))\n        };\n        // Listen to a layer group\n        if (this._layerGroup) {\n          this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this));\n        } else {\n          //Listen to all layers\n          this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this));\n        }\n      }\n    }\n    /** Show control\r\n     */\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.element.classList.add('ol-forceopen');\n      this.overflow();\n      this.dispatchEvent({\n        type: 'toggle',\n        collapsed: false\n      });\n    }\n    /** Hide control\r\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.element.classList.remove('ol-forceopen');\n      this.overflow();\n      this.dispatchEvent({\n        type: 'toggle',\n        collapsed: true\n      });\n    }\n    /** Toggle control\r\n     */\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      this.element.classList.toggle(\"ol-forceopen\");\n      this.overflow();\n      this.dispatchEvent({\n        type: 'toggle',\n        collapsed: !this.isOpen()\n      });\n    }\n    /** Is control open\r\n     * @return {boolean}\r\n     */\n  }, {\n    key: \"isOpen\",\n    value: function isOpen() {\n      return this.element.classList.contains(\"ol-forceopen\");\n    }\n    /** Add a custom header\r\n     * @param {Element|string} html content html\r\n     */\n  }, {\n    key: \"setHeader\",\n    value: function setHeader(html) {\n      ol_ext_element.setHTML(this.header_, html);\n    }\n    /** Calculate overflow and add scrolls\r\n     * @param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\r\n     * @private\r\n     */\n  }, {\n    key: \"overflow\",\n    value: function overflow(dir) {\n      if (this.button && !this._noScroll) {\n        // Nothing to show\n        if (ol_ext_element.hidden(this.panel_)) {\n          ol_ext_element.setStyle(this.element, {\n            height: 'auto'\n          });\n          return;\n        }\n        // Calculate offset\n        var h = ol_ext_element.outerHeight(this.element);\n        var hp = ol_ext_element.outerHeight(this.panel_);\n        var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button);\n        //var dh = this.button.position().top + this.button.outerHeight(true);\n        var top = this.panel_.offsetTop - dh;\n        if (hp > h - dh) {\n          // Bug IE: need to have an height defined\n          ol_ext_element.setStyle(this.element, {\n            height: '100%'\n          });\n          var li = this.panel_.querySelectorAll('li.ol-visible .li-content')[0];\n          var lh = li ? 2 * ol_ext_element.getStyle(li, 'height') : 0;\n          switch (dir) {\n            case 1:\n              top += lh;\n              break;\n            case -1:\n              top -= lh;\n              break;\n            case \"+50%\":\n              top += Math.round(h / 2);\n              break;\n            case \"-50%\":\n              top -= Math.round(h / 2);\n              break;\n            default:\n              break;\n          }\n          // Scroll div\n          if (top + hp <= h - 3 * dh / 2) {\n            top = h - 3 * dh / 2 - hp;\n            ol_ext_element.hide(this.botv);\n          } else {\n            ol_ext_element.show(this.botv);\n          }\n          if (top >= 0) {\n            top = 0;\n            ol_ext_element.hide(this.topv);\n          } else {\n            ol_ext_element.show(this.topv);\n          }\n          // Scroll ?\n          ol_ext_element.setStyle(this.panel_, {\n            top: top + \"px\"\n          });\n          return true;\n        } else {\n          ol_ext_element.setStyle(this.element, {\n            height: \"auto\"\n          });\n          ol_ext_element.setStyle(this.panel_, {\n            top: 0\n          });\n          ol_ext_element.hide(this.botv);\n          ol_ext_element.hide(this.topv);\n          return false;\n        }\n      } else return false;\n    }\n    /** Set the layer associated with a li\r\n     * @param {Element} li\r\n     * @param {ol.layer} layer\r\n     * @private\r\n     */\n  }, {\n    key: \"_setLayerForLI\",\n    value: function _setLayerForLI(li, layer) {\n      var listeners = [];\n      if (layer.getLayers) {\n        listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)));\n      }\n      if (li) {\n        // Handle opacity change\n        listeners.push(layer.on('change:opacity', function () {\n          this.setLayerOpacity(layer, li);\n        }.bind(this)));\n        // Handle visibility chage\n        listeners.push(layer.on('change:visible', function () {\n          this.setLayerVisibility(layer, li);\n        }.bind(this)));\n      }\n      // Other properties\n      listeners.push(layer.on('propertychange', function (e) {\n        if (e.key === 'displayInLayerSwitcher' || e.key === 'openInLayerSwitcher' || e.key === 'title' || e.key === 'name') {\n          this.drawPanel(e);\n        }\n      }.bind(this)));\n      this._layers.push({\n        li: li,\n        layer: layer,\n        listeners: listeners\n      });\n    }\n    /** Set opacity for a layer\r\n     * @param {ol.layer.Layer} layer\r\n     * @param {Element} li the list element\r\n     * @private\r\n     */\n  }, {\n    key: \"setLayerOpacity\",\n    value: function setLayerOpacity(layer, li) {\n      var i = li.querySelector('.layerswitcher-opacity-cursor');\n      if (i) {\n        i.style.left = layer.getOpacity() * 100 + \"%\";\n      }\n      this.dispatchEvent({\n        type: 'layer:opacity',\n        layer: layer\n      });\n    }\n    /** Set visibility for a layer\r\n     * @param {ol.layer.Layer} layer\r\n     * @param {Element} li the list element\r\n     * @api\r\n     */\n  }, {\n    key: \"setLayerVisibility\",\n    value: function setLayerVisibility(layer, li) {\n      var i = li.querySelector('.ol-visibility');\n      if (i) {\n        i.checked = layer.getVisible();\n      }\n      if (layer.getVisible()) {\n        li.classList.add('ol-visible');\n      } else {\n        li.classList.remove('ol-visible');\n      }\n      this.dispatchEvent({\n        type: 'layer:visible',\n        layer: layer\n      });\n    }\n    /** Clear layers associated with li\r\n     * @private\r\n     */\n  }, {\n    key: \"_clearLayerForLI\",\n    value: function _clearLayerForLI() {\n      this._layers.forEach(function (li) {\n        li.listeners.forEach(function (l) {\n          ol_Observable_unByKey(l);\n        });\n      });\n      this._layers = [];\n    }\n    /** Get the layer associated with a li\r\n     * @param {Element} li\r\n     * @return {ol.layer}\r\n     * @private\r\n     */\n  }, {\n    key: \"_getLayerForLI\",\n    value: function _getLayerForLI(li) {\n      for (var i = 0, l; l = this._layers[i]; i++) {\n        if (l.li === li) {\n          return l.layer;\n        }\n      }\n      return null;\n    }\n    /**\r\n     * On view change hide layer depending on resolution / extent\r\n     * @private\r\n     */\n  }, {\n    key: \"viewChange\",\n    value: function viewChange() {\n      this.panel_.querySelectorAll('li').forEach(function (li) {\n        var l = this._getLayerForLI(li);\n        if (l) {\n          if (this.testLayerVisibility(l)) {\n            li.classList.remove('ol-layer-hidden');\n          } else {\n            li.classList.add('ol-layer-hidden');\n          }\n        }\n      }.bind(this));\n    }\n    /** Get control panel\r\n     * @api\r\n     */\n  }, {\n    key: \"getPanel\",\n    value: function getPanel() {\n      return this.panelContainer_;\n    }\n    /** Draw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\r\n     * @api\r\n     */\n  }, {\n    key: \"drawPanel\",\n    value: function drawPanel() {\n      if (!this.getMap()) return;\n      var self = this;\n      // Multiple event simultaneously / draw once => put drawing in the event queue\n      this.dcount++;\n      setTimeout(function () {\n        self.drawPanel_();\n      }, this.get('drawDelay') || 0);\n    }\n    /** Delayed draw panel control\r\n     * @private\r\n     */\n  }, {\n    key: \"drawPanel_\",\n    value: function drawPanel_() {\n      if (--this.dcount || this.dragging_) {\n        return;\n      }\n      var scrollTop = this.panelContainer_.scrollTop;\n\n      // Remove existing layers\n      this._clearLayerForLI();\n      this.panel_.querySelectorAll('li').forEach(function (li) {\n        if (!li.classList.contains('ol-header')) li.remove();\n      }.bind(this));\n      // Draw list\n      if (this._layerGroup) {\n        this.drawList(this.panel_, this._layerGroup.getLayers());\n      } else if (this.getMap()) {\n        this.drawList(this.panel_, this.getMap().getLayers());\n      }\n      // Reset scrolltop\n      this.panelContainer_.scrollTop = scrollTop;\n    }\n    /** Change layer visibility according to the baselayer option\r\n     * @param {ol.layer}\r\n     * @param {Array<ol.layer>} related layers\r\n     * @private\r\n     */\n  }, {\n    key: \"switchLayerVisibility\",\n    value: function switchLayerVisibility(l, layers) {\n      if (!l.get('baseLayer')) {\n        l.setVisible(!l.getVisible());\n      } else {\n        if (!l.getVisible()) {\n          l.setVisible(true);\n        }\n        layers.forEach(function (li) {\n          if (l !== li && li.get('baseLayer') && li.getVisible()) {\n            li.setVisible(false);\n          }\n        });\n      }\n    }\n    /** Check if layer is on the map (depending on resolution / zoom and extent)\r\n     * @param {ol.layer}\r\n     * @return {boolean}\r\n     * @private\r\n     */\n  }, {\n    key: \"testLayerVisibility\",\n    value: function testLayerVisibility(layer) {\n      if (!this.getMap()) return true;\n      var res = this.getMap().getView().getResolution();\n      var zoom = this.getMap().getView().getZoom();\n      // Calculate visibility on resolution or zoom\n      if (layer.getMaxResolution() <= res || layer.getMinResolution() >= res) {\n        return false;\n      } else if (layer.getMinZoom && (layer.getMinZoom() >= zoom || layer.getMaxZoom() < zoom)) {\n        return false;\n      } else {\n        // Check extent\n        var ex0 = layer.getExtent();\n        if (ex0) {\n          var ex = this.getMap().getView().calculateExtent(this.getMap().getSize());\n          return ol_extent_intersects(ex, ex0);\n        }\n        return true;\n      }\n    }\n    /** Start ordering the list\r\n    *\t@param {event} e drag event\r\n    *\t@private\r\n    */\n  }, {\n    key: \"dragOrdering_\",\n    value: function dragOrdering_(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      // Get params\n      var self = this;\n      var elt = e.currentTarget.parentNode.parentNode;\n      var start = true;\n      var panel = this.panel_;\n      var pageY;\n      var pageY0 = e.pageY || e.touches && e.touches.length && e.touches[0].pageY || e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY;\n      var target, dragElt;\n      var layer, group;\n      elt.parentNode.classList.add('drag');\n\n      // Stop ordering\n      function stop() {\n        if (target) {\n          // Get drag on parent\n          var drop = layer;\n          var isSelected = self.getSelection() === drop;\n          if (drop && target) {\n            var collection;\n            if (group) collection = group.getLayers();else collection = self._layerGroup ? self._layerGroup.getLayers() : self.getMap().getLayers();\n            var layers = collection.getArray();\n            // Switch layers\n            for (var i = 0; i < layers.length; i++) {\n              if (layers[i] == drop) {\n                collection.removeAt(i);\n                break;\n              }\n            }\n            for (var j = 0; j < layers.length; j++) {\n              if (layers[j] === target) {\n                if (i > j) collection.insertAt(j, drop);else collection.insertAt(j + 1, drop);\n                break;\n              }\n            }\n          }\n          if (isSelected) self.selectLayer(drop);\n          self.dispatchEvent({\n            type: \"reorder-end\",\n            layer: drop,\n            group: group\n          });\n        }\n        elt.parentNode.querySelectorAll('li').forEach(function (li) {\n          li.classList.remove('dropover');\n          li.classList.remove('dropover-after');\n          li.classList.remove('dropover-before');\n        });\n        elt.classList.remove(\"drag\");\n        elt.parentNode.classList.remove(\"drag\");\n        self.element.classList.remove('drag');\n        if (dragElt) dragElt.remove();\n        ol_ext_element.removeListener(document, 'mousemove touchmove', move);\n        ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop);\n      }\n\n      // Ordering\n      function move(e) {\n        // First drag (more than 2 px) => show drag element (ghost)\n        pageY = e.pageY || e.touches && e.touches.length && e.touches[0].pageY || e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY;\n        if (start && Math.abs(pageY0 - pageY) > 2) {\n          start = false;\n          elt.classList.add(\"drag\");\n          layer = self._getLayerForLI(elt);\n          target = false;\n          group = self._getLayerForLI(elt.parentNode.parentNode);\n          // Ghost div\n          dragElt = ol_ext_element.create('LI', {\n            className: 'ol-dragover',\n            html: elt.innerHTML,\n            style: {\n              position: \"absolute\",\n              \"z-index\": 10000,\n              left: elt.offsetLeft,\n              opacity: 0.5,\n              width: ol_ext_element.outerWidth(elt),\n              height: ol_ext_element.getStyle(elt, 'height')\n            },\n            parent: panel\n          });\n          self.element.classList.add('drag');\n          self.dispatchEvent({\n            type: \"reorder-start\",\n            layer: layer,\n            group: group\n          });\n        }\n        // Start a new drag sequence\n        if (!start) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          // Ghost div\n          ol_ext_element.setStyle(dragElt, {\n            top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop + 5\n          });\n          var li;\n          if (!e.touches) {\n            li = e.target;\n\n            // Get the HTML node within web component on click drag\n            if (e.target.shadowRoot) {\n              li = e.composedPath()[0];\n            }\n          } else {\n            li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\n\n            //Get actual HTML node within web component on touch drag\n            while (li.shadowRoot) {\n              li = li.shadowRoot.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\n            }\n          }\n          if (li.classList.contains(\"ol-switcherbottomdiv\")) {\n            self.overflow(-1);\n          } else if (li.classList.contains(\"ol-switchertopdiv\")) {\n            self.overflow(1);\n          }\n          // Get associated li\n          while (li && li.tagName !== 'LI') {\n            li = li.parentNode;\n          }\n          if (!li || !li.classList.contains('dropover')) {\n            elt.parentNode.querySelectorAll('li').forEach(function (li) {\n              li.classList.remove('dropover');\n              li.classList.remove('dropover-after');\n              li.classList.remove('dropover-before');\n            });\n          }\n          if (li && li.parentNode.classList.contains('drag') && li !== elt) {\n            target = self._getLayerForLI(li);\n            // Don't mix layer level\n            if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\n              li.classList.add(\"dropover\");\n              li.classList.add(elt.offsetTop < li.offsetTop ? 'dropover-after' : 'dropover-before');\n            } else {\n              target = false;\n            }\n            ol_ext_element.show(dragElt);\n          } else {\n            target = false;\n            if (li === elt) ol_ext_element.hide(dragElt);else ol_ext_element.show(dragElt);\n          }\n          if (!target) dragElt.classList.add(\"forbidden\");else dragElt.classList.remove(\"forbidden\");\n        }\n      }\n\n      // Start ordering\n      ol_ext_element.addListener(document, 'mousemove touchmove', move);\n      ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop);\n    }\n    /** Change opacity on drag\r\n    *\t@param {event} e drag event\r\n    *\t@private\r\n    */\n  }, {\n    key: \"dragOpacity_\",\n    value: function dragOpacity_(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      var self = this;\n      // Register start params\n      var elt = e.target;\n      var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode);\n      if (!layer) return;\n      var x = e.pageX || e.touches && e.touches.length && e.touches[0].pageX || e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX;\n      var start = ol_ext_element.getStyle(elt, 'left') - x;\n      self.dragging_ = true;\n\n      // stop dragging\n      function stop() {\n        ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop);\n        ol_ext_element.removeListener(document, \"mousemove touchmove\", move);\n        self.dragging_ = false;\n      }\n      // On draggin\n      function move(e) {\n        var x = e.pageX || e.touches && e.touches.length && e.touches[0].pageX || e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX;\n        var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width');\n        var opacity = Math.max(0, Math.min(1, delta));\n        ol_ext_element.setStyle(elt, {\n          left: opacity * 100 + \"%\"\n        });\n        elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity * 100);\n        layer.setOpacity(opacity);\n      }\n      // Register move\n      ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop);\n      ol_ext_element.addListener(document, \"mousemove touchmove\", move);\n    }\n    /** Render a list of layer\r\n     * @param {Elemen} element to render\r\n     * @layers {Array{ol.layer}} list of layer to show\r\n     * @api stable\r\n     * @private\r\n     */\n  }, {\n    key: \"drawList\",\n    value: function drawList(ul, collection) {\n      var self = this;\n      var layers = collection.getArray();\n\n      // Change layer visibility\n      var setVisibility = function setVisibility(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        var l = self._getLayerForLI(this.parentNode.parentNode);\n        self.switchLayerVisibility(l, collection);\n        if (self.get('selection') && l.getVisible()) {\n          self.selectLayer(l);\n        }\n        if (self.onchangeCheck) {\n          self.onchangeCheck(l);\n        }\n      };\n      // Info button click\n      function onInfo(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        var l = self._getLayerForLI(this.parentNode.parentNode);\n        self.oninfo(l);\n        self.dispatchEvent({\n          type: \"info\",\n          layer: l\n        });\n      }\n      // Zoom to extent button\n      function zoomExtent(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        var l = self._getLayerForLI(this.parentNode.parentNode);\n        if (self.onextent) {\n          self.onextent(l);\n        } else {\n          self.getMap().getView().fit(l.getExtent(), self.getMap().getSize());\n        }\n        self.dispatchEvent({\n          type: \"extent\",\n          layer: l\n        });\n      }\n      // Remove a layer on trash click\n      function removeLayer(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        var li = this.parentNode.parentNode.parentNode.parentNode;\n        var layer,\n          group = self._getLayerForLI(li);\n        // Remove the layer from a group or from a map\n        if (group) {\n          layer = self._getLayerForLI(this.parentNode.parentNode);\n          group.getLayers().remove(layer);\n          if (group.getLayers().getLength() == 0 && !group.get('noSwitcherDelete')) {\n            removeLayer.call(li.querySelectorAll('.layerTrash')[0], e);\n          }\n        } else {\n          li = this.parentNode.parentNode;\n          self.getMap().removeLayer(self._getLayerForLI(li));\n        }\n      }\n\n      // Create a list for a layer\n      function createLi(layer) {\n        if (!this.displayInLayerSwitcher(layer)) {\n          this._setLayerForLI(null, layer);\n          return;\n        }\n        var li = ol_ext_element.create('LI', {\n          className: (layer.getVisible() ? \"ol-visible \" : \" \") + (layer.get('baseLayer') ? \"baselayer\" : \"\"),\n          parent: ul\n        });\n        this._setLayerForLI(li, layer);\n        if (this._selectedLayer === layer) {\n          li.classList.add('ol-layer-select');\n        }\n        var layer_buttons = ol_ext_element.create('DIV', {\n          className: 'ol-layerswitcher-buttons',\n          parent: li\n        });\n\n        // Content div\n        var d = ol_ext_element.create('DIV', {\n          className: 'li-content',\n          parent: li\n        });\n\n        // Visibility\n        ol_ext_element.create('INPUT', {\n          type: layer.get('baseLayer') ? 'radio' : 'checkbox',\n          className: 'ol-visibility',\n          checked: layer.getVisible(),\n          click: setVisibility,\n          parent: d\n        });\n        // Label\n        var label = ol_ext_element.create('LABEL', {\n          title: layer.get('title') || layer.get('name'),\n          click: setVisibility,\n          style: {\n            userSelect: 'none'\n          },\n          parent: d\n        });\n        label.addEventListener('selectstart', function () {\n          return false;\n        });\n        ol_ext_element.create('SPAN', {\n          html: layer.get('title') || layer.get('name'),\n          click: function (e) {\n            if (this.get('selection')) {\n              e.stopPropagation();\n              this.selectLayer(layer);\n            }\n          }.bind(this),\n          parent: label\n        });\n\n        //  up/down\n        if (this.reordering) {\n          if (i < layers.length - 1 && (layer.get(\"allwaysOnTop\") || !layers[i + 1].get(\"allwaysOnTop\")) || i > 0 && (!layer.get(\"allwaysOnTop\") || layers[i - 1].get(\"allwaysOnTop\"))) {\n            ol_ext_element.create('DIV', {\n              className: 'layerup ol-noscroll',\n              title: this.tip.up,\n              on: {\n                'mousedown touchstart': function mousedown_touchstart(e) {\n                  self.dragOrdering_(e);\n                }\n              },\n              parent: layer_buttons\n            });\n          }\n        }\n\n        // Show/hide sub layers\n        if (layer.getLayers) {\n          var nb = 0;\n          layer.getLayers().forEach(function (l) {\n            if (self.displayInLayerSwitcher(l)) nb++;\n          });\n          if (nb) {\n            ol_ext_element.create('DIV', {\n              className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\n              title: this.tip.plus,\n              click: function click() {\n                var l = self._getLayerForLI(this.parentNode.parentNode);\n                l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\"));\n              },\n              parent: layer_buttons\n            });\n          }\n        }\n\n        // Info button\n        if (this.oninfo) {\n          ol_ext_element.create('DIV', {\n            className: 'layerInfo',\n            title: this.tip.info,\n            click: onInfo,\n            parent: layer_buttons\n          });\n        }\n        // Layer remove\n        if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\n          ol_ext_element.create('DIV', {\n            className: 'layerTrash',\n            title: this.tip.trash,\n            click: removeLayer,\n            parent: layer_buttons\n          });\n        }\n        // Layer extent\n        if (this.hasextent && layers[i].getExtent()) {\n          var ex = layers[i].getExtent();\n          if (ex.length == 4 && ex[0] < ex[2] && ex[1] < ex[3]) {\n            ol_ext_element.create('DIV', {\n              className: 'layerExtent',\n              title: this.tip.extent,\n              click: zoomExtent,\n              parent: layer_buttons\n            });\n          }\n        }\n\n        // Progress\n        if (this.show_progress && layer instanceof ol_layer_Tile) {\n          var p = ol_ext_element.create('DIV', {\n            className: 'layerswitcher-progress',\n            parent: d\n          });\n          this.setprogress_(layer);\n          layer.layerswitcher_progress = ol_ext_element.create('DIV', {\n            parent: p\n          });\n        }\n\n        // Opacity\n        var opacity = ol_ext_element.create('DIV', {\n          className: 'layerswitcher-opacity',\n          // Click on the opacity line\n          click: function click(e) {\n            if (e.target !== this) return;\n            e.stopPropagation();\n            e.preventDefault();\n            var op = Math.max(0, Math.min(1, e.offsetX / ol_ext_element.getStyle(this, 'width')));\n            self._getLayerForLI(this.parentNode.parentNode).setOpacity(op);\n            this.parentNode.querySelectorAll('.layerswitcher-opacity-label')[0].innerHTML = Math.round(op * 100);\n          },\n          parent: d\n        });\n        // Start dragging\n        ol_ext_element.create('DIV', {\n          className: 'layerswitcher-opacity-cursor ol-noscroll',\n          style: {\n            left: layer.getOpacity() * 100 + \"%\"\n          },\n          on: {\n            'mousedown touchstart': function mousedown_touchstart(e) {\n              self.dragOpacity_(e);\n            }\n          },\n          parent: opacity\n        });\n        // Percent\n        ol_ext_element.create('DIV', {\n          className: 'layerswitcher-opacity-label',\n          html: Math.round(layer.getOpacity() * 100),\n          parent: d\n        });\n\n        // Layer group\n        if (layer.getLayers) {\n          li.classList.add('ol-layer-group');\n          if (layer.get(\"openInLayerSwitcher\") === true) {\n            var ul2 = ol_ext_element.create('UL', {\n              parent: li\n            });\n            this.drawList(ul2, layer.getLayers());\n          }\n        }\n        li.classList.add(this.getLayerClass(layer));\n\n        // Dispatch a dralist event to allow customisation\n        this.dispatchEvent({\n          type: 'drawlist',\n          layer: layer,\n          li: li\n        });\n      }\n\n      // Add the layer list\n      for (var i = layers.length - 1; i >= 0; i--) {\n        createLi.call(this, layers[i]);\n      }\n      this.viewChange();\n      if (ul === this.panel_) this.overflow();\n    }\n    /** Select a layer\r\n     * @param {ol.layer.Layer} layer\r\n     * @returns {string} the layer classname\r\n     * @api\r\n     */\n  }, {\n    key: \"getLayerClass\",\n    value: function getLayerClass(layer) {\n      if (!layer) return 'none';\n      if (layer.getLayers) return 'ol-layer-group';\n      if (layer instanceof ol_layer_Vector) return 'ol-layer-vector';\n      if (layer instanceof ol_layer_VectorTile) return 'ol-layer-vectortile';\n      if (layer instanceof ol_layer_Tile) return 'ol-layer-tile';\n      if (layer instanceof ol_layer_Image) return 'ol-layer-image';\n      if (layer instanceof ol_layer_Heatmap) return 'ol-layer-heatmap';\n      /* ol < 6 compatibility VectorImage is not defined */\n      // if (layer instanceof ol_layer_VectorImage) return 'ol-layer-vectorimage';\n      if (layer.getFeatures) return 'ol-layer-vectorimage';\n      /* */\n      return 'unknown';\n    }\n    /** Select a layer\r\n     * @param {ol.layer.Layer} layer\r\n     * @api\r\n     */\n  }, {\n    key: \"selectLayer\",\n    value: function selectLayer(layer, silent) {\n      if (!layer) {\n        if (!this.getMap()) return;\n        layer = this.getMap().getLayers().item(this.getMap().getLayers().getLength() - 1);\n      }\n      this._selectedLayer = layer;\n      this.drawPanel();\n      if (!silent) this.dispatchEvent({\n        type: 'select',\n        layer: layer\n      });\n    }\n    /** Get selected layer\r\n     * @returns {ol.layer.Layer}\r\n     */\n  }, {\n    key: \"getSelection\",\n    value: function getSelection() {\n      return this._selectedLayer;\n    }\n    /** Handle progress bar for a layer\r\n    *\t@private\r\n    */\n  }, {\n    key: \"setprogress_\",\n    value: function setprogress_(layer) {\n      if (!layer.layerswitcher_progress) {\n        var loaded = 0;\n        var loading = 0;\n        var draw = function draw() {\n          if (loading === loaded) {\n            loading = loaded = 0;\n            ol_ext_element.setStyle(layer.layerswitcher_progress, {\n              width: 0\n            }); // layer.layerswitcher_progress.width(0);\n          } else {\n            ol_ext_element.setStyle(layer.layerswitcher_progress, {\n              width: (loaded / loading * 100).toFixed(1) + '%'\n            }); // layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\n          }\n        };\n        layer.getSource().on('tileloadstart', function () {\n          loading++;\n          draw();\n        });\n        layer.getSource().on('tileloadend', function () {\n          loaded++;\n          draw();\n        });\n        layer.getSource().on('tileloaderror', function () {\n          loaded++;\n          draw();\n        });\n      }\n    }\n  }]);\n}(ol_control_Control);\n\n/** List of tips for internationalization purposes\r\n*/\nol_control_LayerSwitcher.prototype.tip = {\n  up: \"up/down\",\n  down: \"down\",\n  info: \"informations...\",\n  extent: \"zoom to extent\",\n  trash: \"remove layer\",\n  plus: \"expand/shrink\"\n};\nexport default ol_control_LayerSwitcher;","map":{"version":3,"names":["unByKey","ol_Observable_unByKey","ol_control_Control","ol_layer_Tile","ol_layer_Vector","ol_layer_VectorTile","ol_layer_Image","ol_layer_Heatmap","intersects","ol_extent_intersects","ol_ext_element","ol_control_LayerSwitcher","_ol_control_Control","olcontrolLayerSwitcher","options","_this","_classCallCheck","element","create","className","switcherClass","_callSuper","target","self","dcount","show_progress","oninfo","onextent","hasextent","extent","hastrash","trash","reordering","_layers","_layerGroup","layerGroup","getLayers","onchangeCheck","displayInLayerSwitcher","classList","add","collapsed","button","type","parent","addEventListener","e","toggle","dispatchEvent","contains","preventDefault","overflow","mouseover","remove","minibar","noScroll","topv","click","botv","_noScroll","panel_","panelContainer_","html","addListener","Math","max","min","wheelDelta","detail","stopPropagation","header_","set","drawDelay","selection","setTimeout","mbar","scrollDiv","mousewheel","vertical","on","refresh","bind","_inherits","_createClass","key","value","layer","get","setMap","map","_superPropGet","drawPanel","_listener","i","moveend","viewChange","size","change","getLayerGroup","show","hide","isOpen","setHeader","setHTML","dir","hidden","setStyle","height","h","outerHeight","hp","dh","offsetTop","top","li","querySelectorAll","lh","getStyle","round","_setLayerForLI","listeners","push","setLayerOpacity","setLayerVisibility","querySelector","style","left","getOpacity","checked","getVisible","_clearLayerForLI","forEach","l","_getLayerForLI","testLayerVisibility","getPanel","getMap","drawPanel_","dragging_","scrollTop","drawList","switchLayerVisibility","layers","setVisible","res","getView","getResolution","zoom","getZoom","getMaxResolution","getMinResolution","getMinZoom","getMaxZoom","ex0","getExtent","ex","calculateExtent","getSize","dragOrdering_","elt","currentTarget","parentNode","start","panel","pageY","pageY0","touches","length","changedTouches","dragElt","group","stop","drop","isSelected","getSelection","collection","getArray","removeAt","j","insertAt","selectLayer","removeListener","document","move","abs","innerHTML","position","offsetLeft","opacity","width","outerWidth","offsetRect","shadowRoot","composedPath","elementFromPoint","clientX","clientY","tagName","dragOpacity_","x","pageX","delta","nextElementSibling","setOpacity","ul","setVisibility","onInfo","zoomExtent","fit","removeLayer","getLength","call","createLi","_selectedLayer","layer_buttons","d","label","title","userSelect","tip","up","mousedown_touchstart","nb","plus","info","p","setprogress_","layerswitcher_progress","op","offsetX","ul2","getLayerClass","getFeatures","silent","item","loaded","loading","draw","toFixed","getSource","prototype","down"],"sources":["/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/ol-ext/control/LayerSwitcher.js"],"sourcesContent":["/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable.js'\r\nimport ol_control_Control from 'ol/control/Control.js'\r\nimport ol_layer_Tile from 'ol/layer/Tile.js'\r\nimport ol_layer_Vector from 'ol/layer/Vector.js'\r\nimport ol_layer_VectorTile from 'ol/layer/VectorTile.js'\r\n// ol < 6 compatibility VectorImage is not defined\r\n// import ol_layer_VectorImage from 'ol/layer/VectorImage.js'\r\nimport ol_layer_Image from 'ol/layer/Image.js'\r\nimport ol_layer_Heatmap from 'ol/layer/Heatmap.js'\r\nimport {intersects as ol_extent_intersects} from 'ol/extent.js'\r\n\r\nimport ol_ext_element from '../util/element.js'\r\n\r\n/** Layer Switcher Control.\r\n * @fires select\r\n * @fires drawlist\r\n * @fires toggle\r\n * @fires reorder-start\r\n * @fires reorder-end\r\n * @fires layer:visible\r\n * @fires layer:opacity\r\n * \r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options\r\n *  @param {boolean} options.selection enable layer selection when click on the title\r\n *  @param {function} options.displayInLayerSwitcher function that takes a layer and return a boolean if the layer is displayed in the switcher, default test the displayInLayerSwitcher layer attribute\r\n *  @param {boolean} options.show_progress show a progress bar on tile layers, default false\r\n *  @param {boolean} options.mouseover show the panel on mouseover, default false\r\n *  @param {boolean} options.reordering allow layer reordering, default true\r\n *  @param {boolean} options.trash add a trash button to delete the layer, default false\r\n *  @param {function} options.oninfo callback on click on info button, if none no info button is shown DEPRECATED: use on(info) instead\r\n *  @param {boolean} options.extent add an extent button to zoom to the extent of the layer\r\n *  @param {function} options.onextent callback when click on extent, default fits view to extent\r\n *  @param {number} options.drawDelay delay in ms to redraw the layer (usefull to prevent flickering when manipulating the layers)\r\n *  @param {boolean} options.collapsed collapse the layerswitcher at beginning, default true\r\n *  @param {ol.layer.Group} options.layerGroup a layer group to display in the switcher, default display all layers of the map\r\n *  @param {boolean} options.noScroll prevent handle scrolling, default false\r\n *  @param {function} options.onchangeCheck optional callback on click on checkbox, you can call this method for doing operations after check/uncheck a layer\r\n *\r\n * Layers attributes that control the switcher\r\n *\t- allwaysOnTop {boolean} true to force layer stay on top of the others while reordering, default false\r\n *\t- displayInLayerSwitcher {boolean} display the layer in switcher, default true\r\n *\t- noSwitcherDelete {boolean} to prevent layer deletion (w. trash option = true), default false\r\n */\r\nvar ol_control_LayerSwitcher = class olcontrolLayerSwitcher extends ol_control_Control {\r\n  constructor(options) {\r\n    options = options || {}\r\n    var element = ol_ext_element.create('DIV', {\r\n      className: options.switcherClass || 'ol-layerswitcher'\r\n    })\r\n    super({\r\n      element: element,\r\n      target: options.target\r\n    })\r\n    \r\n    var self = this\r\n    this.dcount = 0\r\n    this.show_progress = options.show_progress\r\n    this.oninfo = (typeof (options.oninfo) == 'function' ? options.oninfo : null)\r\n    this.onextent = (typeof (options.onextent) == 'function' ? options.onextent : null)\r\n    this.hasextent = options.extent || options.onextent\r\n    this.hastrash = options.trash\r\n    this.reordering = (options.reordering !== false)\r\n    this._layers = []\r\n    this._layerGroup = (options.layerGroup && options.layerGroup.getLayers) ? options.layerGroup : null\r\n    this.onchangeCheck = (typeof (options.onchangeCheck) == \"function\" ? options.onchangeCheck : null)\r\n\r\n    // displayInLayerSwitcher\r\n    if (typeof (options.displayInLayerSwitcher) === 'function') {\r\n      this.displayInLayerSwitcher = options.displayInLayerSwitcher\r\n    }\r\n\r\n    // Insert in the map\r\n    if (!options.target) {\r\n      element.classList.add('ol-unselectable')\r\n      element.classList.add('ol-control')\r\n      element.classList.add(options.collapsed !== false ? 'ol-collapsed' : 'ol-forceopen')\r\n\r\n      this.button = ol_ext_element.create('BUTTON', {\r\n        type: 'button',\r\n        parent: element\r\n      })\r\n      this.button.addEventListener('touchstart', function (e) {\r\n        element.classList.toggle('ol-forceopen')\r\n        element.classList.add('ol-collapsed')\r\n        self.dispatchEvent({ type: 'toggle', collapsed: element.classList.contains('ol-collapsed') })\r\n        e.preventDefault()\r\n        self.overflow()\r\n      })\r\n      this.button.addEventListener('click', function () {\r\n        element.classList.toggle('ol-forceopen')\r\n        element.classList.add('ol-collapsed')\r\n        self.dispatchEvent({ type: 'toggle', collapsed: !element.classList.contains('ol-forceopen') })\r\n        self.overflow()\r\n      })\r\n\r\n      if (options.mouseover) {\r\n        element.addEventListener('mouseleave', function () {\r\n          element.classList.add(\"ol-collapsed\")\r\n          self.dispatchEvent({ type: 'toggle', collapsed: true })\r\n        })\r\n        element.addEventListener('mouseover', function () {\r\n          element.classList.remove(\"ol-collapsed\")\r\n          self.dispatchEvent({ type: 'toggle', collapsed: false })\r\n        })\r\n      }\r\n\r\n      if (options.minibar)\r\n        options.noScroll = true\r\n      if (!options.noScroll) {\r\n        this.topv = ol_ext_element.create('DIV', {\r\n          className: 'ol-switchertopdiv',\r\n          parent: element,\r\n          click: function () {\r\n            self.overflow(\"+50%\")\r\n          }\r\n        })\r\n\r\n        this.botv = ol_ext_element.create('DIV', {\r\n          className: 'ol-switcherbottomdiv',\r\n          parent: element,\r\n          click: function () {\r\n            self.overflow(\"-50%\")\r\n          }\r\n        })\r\n      }\r\n      this._noScroll = options.noScroll\r\n    }\r\n\r\n    this.panel_ = ol_ext_element.create('UL', {\r\n      className: 'panel',\r\n    })\r\n    this.panelContainer_ = ol_ext_element.create('DIV', {\r\n      className: 'panel-container',\r\n      html: this.panel_,\r\n      parent: element\r\n    })\r\n    // Handle mousewheel\r\n    if (!options.target && !options.noScroll) {\r\n      ol_ext_element.addListener(this.panel_, 'mousewheel DOMMouseScroll onmousewheel', function (e) {\r\n        if (self.overflow(Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail))))) {\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n        }\r\n      })\r\n    }\r\n\r\n    this.header_ = ol_ext_element.create('LI', {\r\n      className: 'ol-header',\r\n      parent: this.panel_\r\n    })\r\n\r\n    this.set('drawDelay', options.drawDelay || 0)\r\n    this.set('selection', options.selection)\r\n\r\n    if (options.minibar) {\r\n      // Wait init complete (for child classes)\r\n      setTimeout(function () {\r\n        var mbar = ol_ext_element.scrollDiv(this.panelContainer_, {\r\n          mousewheel: true,\r\n          vertical: true,\r\n          minibar: true\r\n        })\r\n        this.on(['drawlist', 'toggle'], function () {\r\n          mbar.refresh()\r\n        })\r\n      }.bind(this))\r\n    }\r\n  }\r\n  /** Test if a layer should be displayed in the switcher\r\n   * @param {ol.layer} layer\r\n   * @return {boolean} true if the layer is displayed\r\n   */\r\n  displayInLayerSwitcher(layer) {\r\n    return (layer.get('displayInLayerSwitcher') !== false)\r\n  }\r\n  /**\r\n   * Set the map instance the control is associated with.\r\n   * @param {_ol_Map_} map The map instance.\r\n   */\r\n  setMap(map) {\r\n    super.setMap(map)\r\n    this.drawPanel()\r\n\r\n    if (this._listener) {\r\n      for (var i in this._listener){\r\n        ol_Observable_unByKey(this._listener[i])\r\n      }\r\n    }\r\n    this._listener = null\r\n\r\n    // Get change (new layer added or removed)\r\n    if (map) {\r\n      this._listener = {\r\n        moveend: map.on('moveend', this.viewChange.bind(this)),\r\n        size: map.on('change:size', this.overflow.bind(this))\r\n      }\r\n      // Listen to a layer group\r\n      if (this._layerGroup) {\r\n        this._listener.change = this._layerGroup.getLayers().on('change:length', this.drawPanel.bind(this))\r\n      } else {\r\n        //Listen to all layers\r\n        this._listener.change = map.getLayerGroup().getLayers().on('change:length', this.drawPanel.bind(this))\r\n      }\r\n    }\r\n  }\r\n  /** Show control\r\n   */\r\n  show() {\r\n    this.element.classList.add('ol-forceopen')\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: false })\r\n  }\r\n  /** Hide control\r\n   */\r\n  hide() {\r\n    this.element.classList.remove('ol-forceopen')\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: true })\r\n  }\r\n  /** Toggle control\r\n   */\r\n  toggle() {\r\n    this.element.classList.toggle(\"ol-forceopen\")\r\n    this.overflow()\r\n    this.dispatchEvent({ type: 'toggle', collapsed: !this.isOpen() })\r\n  }\r\n  /** Is control open\r\n   * @return {boolean}\r\n   */\r\n  isOpen() {\r\n    return this.element.classList.contains(\"ol-forceopen\")\r\n  }\r\n  /** Add a custom header\r\n   * @param {Element|string} html content html\r\n   */\r\n  setHeader(html) {\r\n    ol_ext_element.setHTML(this.header_, html)\r\n  }\r\n  /** Calculate overflow and add scrolls\r\n   * @param {Number} dir scroll direction -1|0|1|'+50%'|'-50%'\r\n   * @private\r\n   */\r\n  overflow(dir) {\r\n    if (this.button && !this._noScroll) {\r\n      // Nothing to show\r\n      if (ol_ext_element.hidden(this.panel_)) {\r\n        ol_ext_element.setStyle(this.element, { height: 'auto' })\r\n        return\r\n      }\r\n      // Calculate offset\r\n      var h = ol_ext_element.outerHeight(this.element)\r\n      var hp = ol_ext_element.outerHeight(this.panel_)\r\n      var dh = this.button.offsetTop + ol_ext_element.outerHeight(this.button)\r\n      //var dh = this.button.position().top + this.button.outerHeight(true);\r\n      var top = this.panel_.offsetTop - dh\r\n      if (hp > h - dh) {\r\n        // Bug IE: need to have an height defined\r\n        ol_ext_element.setStyle(this.element, { height: '100%' })\r\n        var li = this.panel_.querySelectorAll('li.ol-visible .li-content')[0]\r\n        var lh = li ? 2 * ol_ext_element.getStyle(li, 'height') : 0\r\n        switch (dir) {\r\n          case 1: top += lh; break\r\n          case -1: top -= lh; break\r\n          case \"+50%\": top += Math.round(h / 2); break\r\n          case \"-50%\": top -= Math.round(h / 2); break\r\n          default: break\r\n        }\r\n        // Scroll div\r\n        if (top + hp <= h - 3 * dh / 2) {\r\n          top = h - 3 * dh / 2 - hp\r\n          ol_ext_element.hide(this.botv)\r\n        } else {\r\n          ol_ext_element.show(this.botv)\r\n        }\r\n        if (top >= 0) {\r\n          top = 0\r\n          ol_ext_element.hide(this.topv)\r\n        } else {\r\n          ol_ext_element.show(this.topv)\r\n        }\r\n        // Scroll ?\r\n        ol_ext_element.setStyle(this.panel_, { top: top + \"px\" })\r\n        return true\r\n      } else {\r\n        ol_ext_element.setStyle(this.element, { height: \"auto\" })\r\n        ol_ext_element.setStyle(this.panel_, { top: 0 })\r\n        ol_ext_element.hide(this.botv)\r\n        ol_ext_element.hide(this.topv)\r\n        return false\r\n      }\r\n    }\r\n    else\r\n      return false\r\n  }\r\n  /** Set the layer associated with a li\r\n   * @param {Element} li\r\n   * @param {ol.layer} layer\r\n   * @private\r\n   */\r\n  _setLayerForLI(li, layer) {\r\n    var listeners = []\r\n    if (layer.getLayers) {\r\n      listeners.push(layer.getLayers().on('change:length', this.drawPanel.bind(this)))\r\n    }\r\n    if (li) {\r\n      // Handle opacity change\r\n      listeners.push(layer.on('change:opacity', (function () {\r\n        this.setLayerOpacity(layer, li)\r\n      }).bind(this)))\r\n      // Handle visibility chage\r\n      listeners.push(layer.on('change:visible', (function () {\r\n        this.setLayerVisibility(layer, li)\r\n      }).bind(this)))\r\n    }\r\n    // Other properties\r\n    listeners.push(layer.on('propertychange', (function (e) {\r\n      if (e.key === 'displayInLayerSwitcher'\r\n        || e.key === 'openInLayerSwitcher'\r\n        || e.key === 'title'\r\n        || e.key === 'name') {\r\n        this.drawPanel(e)\r\n      }\r\n    }).bind(this)))\r\n    this._layers.push({ li: li, layer: layer, listeners: listeners })\r\n  }\r\n  /** Set opacity for a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @param {Element} li the list element\r\n   * @private\r\n   */\r\n  setLayerOpacity(layer, li) {\r\n    var i = li.querySelector('.layerswitcher-opacity-cursor')\r\n    if (i){\r\n      i.style.left = (layer.getOpacity() * 100) + \"%\"\r\n    }\r\n    this.dispatchEvent({ type: 'layer:opacity', layer: layer })\r\n  }\r\n  /** Set visibility for a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @param {Element} li the list element\r\n   * @api\r\n   */\r\n  setLayerVisibility(layer, li) {\r\n    var i = li.querySelector('.ol-visibility')\r\n    if (i) {\r\n      i.checked = layer.getVisible()\r\n    }\r\n    if (layer.getVisible()){\r\n      li.classList.add('ol-visible')\r\n    } else{\r\n      li.classList.remove('ol-visible')\r\n    }\r\n    this.dispatchEvent({ type: 'layer:visible', layer: layer })\r\n  }\r\n  /** Clear layers associated with li\r\n   * @private\r\n   */\r\n  _clearLayerForLI() {\r\n    this._layers.forEach(function (li) {\r\n      li.listeners.forEach(function (l) {\r\n        ol_Observable_unByKey(l)\r\n      })\r\n    })\r\n    this._layers = []\r\n  }\r\n  /** Get the layer associated with a li\r\n   * @param {Element} li\r\n   * @return {ol.layer}\r\n   * @private\r\n   */\r\n  _getLayerForLI(li) {\r\n    for (var i = 0, l; l = this._layers[i]; i++) {\r\n      if (l.li === li) {\r\n        return l.layer\r\n      }\r\n    }\r\n    return null\r\n  }\r\n  /**\r\n   * On view change hide layer depending on resolution / extent\r\n   * @private\r\n   */\r\n  viewChange() {\r\n    this.panel_.querySelectorAll('li').forEach(function (li) {\r\n      var l = this._getLayerForLI(li)\r\n      if (l) {\r\n        if (this.testLayerVisibility(l)) {\r\n          li.classList.remove('ol-layer-hidden')\r\n        } else {\r\n          li.classList.add('ol-layer-hidden')\r\n        }\r\n      }\r\n    }.bind(this))\r\n  }\r\n  /** Get control panel\r\n   * @api\r\n   */\r\n  getPanel() {\r\n    return this.panelContainer_\r\n  }\r\n  /** Draw the panel control (prevent multiple draw due to layers manipulation on the map with a delay function)\r\n   * @api\r\n   */\r\n  drawPanel() {\r\n    if (!this.getMap())\r\n      return\r\n    var self = this\r\n    // Multiple event simultaneously / draw once => put drawing in the event queue\r\n    this.dcount++\r\n    setTimeout(function () { self.drawPanel_() }, this.get('drawDelay') || 0)\r\n  }\r\n  /** Delayed draw panel control\r\n   * @private\r\n   */\r\n  drawPanel_() {\r\n    if (--this.dcount || this.dragging_) {\r\n      return\r\n    }\r\n    var scrollTop = this.panelContainer_.scrollTop\r\n\r\n    // Remove existing layers\r\n    this._clearLayerForLI()\r\n    this.panel_.querySelectorAll('li').forEach(function (li) {\r\n      if (!li.classList.contains('ol-header'))\r\n        li.remove()\r\n    }.bind(this))\r\n    // Draw list\r\n    if (this._layerGroup) {\r\n      this.drawList(this.panel_, this._layerGroup.getLayers())\r\n    } else if (this.getMap()) {\r\n      this.drawList(this.panel_, this.getMap().getLayers())\r\n    }\r\n    // Reset scrolltop\r\n    this.panelContainer_.scrollTop = scrollTop\r\n  }\r\n  /** Change layer visibility according to the baselayer option\r\n   * @param {ol.layer}\r\n   * @param {Array<ol.layer>} related layers\r\n   * @private\r\n   */\r\n  switchLayerVisibility(l, layers) {\r\n    if (!l.get('baseLayer')) {\r\n      l.setVisible(!l.getVisible())\r\n    } else {\r\n      if (!l.getVisible()) {\r\n        l.setVisible(true)\r\n      }\r\n      layers.forEach(function (li) {\r\n        if (l !== li && li.get('baseLayer') && li.getVisible()) {\r\n          li.setVisible(false)\r\n        }\r\n      })\r\n    }\r\n  }\r\n  /** Check if layer is on the map (depending on resolution / zoom and extent)\r\n   * @param {ol.layer}\r\n   * @return {boolean}\r\n   * @private\r\n   */\r\n  testLayerVisibility(layer) {\r\n    if (!this.getMap())\r\n      return true\r\n    var res = this.getMap().getView().getResolution()\r\n    var zoom = this.getMap().getView().getZoom()\r\n    // Calculate visibility on resolution or zoom\r\n    if (layer.getMaxResolution() <= res || layer.getMinResolution() >= res) {\r\n      return false\r\n    } else if (layer.getMinZoom && (layer.getMinZoom() >= zoom || layer.getMaxZoom() < zoom)) {\r\n      return false\r\n    } else {\r\n      // Check extent\r\n      var ex0 = layer.getExtent()\r\n      if (ex0) {\r\n        var ex = this.getMap().getView().calculateExtent(this.getMap().getSize())\r\n        return ol_extent_intersects(ex, ex0)\r\n      }\r\n      return true\r\n    }\r\n  }\r\n  /** Start ordering the list\r\n  *\t@param {event} e drag event\r\n  *\t@private\r\n  */\r\n  dragOrdering_(e) {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    // Get params\r\n    var self = this\r\n    var elt = e.currentTarget.parentNode.parentNode\r\n    var start = true\r\n    var panel = this.panel_\r\n    var pageY\r\n    var pageY0 = e.pageY\r\n      || (e.touches && e.touches.length && e.touches[0].pageY)\r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY)\r\n    var target, dragElt\r\n    var layer, group\r\n    elt.parentNode.classList.add('drag')\r\n\r\n    // Stop ordering\r\n    function stop() {\r\n      if (target) {\r\n        // Get drag on parent\r\n        var drop = layer\r\n        var isSelected = self.getSelection() === drop\r\n        if (drop && target) {\r\n          var collection\r\n          if (group)\r\n            collection = group.getLayers()\r\n          else\r\n            collection = self._layerGroup ? self._layerGroup.getLayers() : self.getMap().getLayers()\r\n          var layers = collection.getArray()\r\n          // Switch layers\r\n          for (var i = 0; i < layers.length; i++) {\r\n            if (layers[i] == drop) {\r\n              collection.removeAt(i)\r\n              break\r\n            }\r\n          }\r\n          for (var j = 0; j < layers.length; j++) {\r\n            if (layers[j] === target) {\r\n              if (i > j)\r\n                collection.insertAt(j, drop)\r\n              else\r\n                collection.insertAt(j + 1, drop)\r\n              break\r\n            }\r\n          }\r\n        }\r\n        if (isSelected)\r\n          self.selectLayer(drop)\r\n\r\n        self.dispatchEvent({ type: \"reorder-end\", layer: drop, group: group })\r\n      }\r\n\r\n      elt.parentNode.querySelectorAll('li').forEach(function (li) {\r\n        li.classList.remove('dropover')\r\n        li.classList.remove('dropover-after')\r\n        li.classList.remove('dropover-before')\r\n      })\r\n      elt.classList.remove(\"drag\")\r\n      elt.parentNode.classList.remove(\"drag\")\r\n      self.element.classList.remove('drag')\r\n      if (dragElt)\r\n        dragElt.remove()\r\n\r\n      ol_ext_element.removeListener(document, 'mousemove touchmove', move)\r\n      ol_ext_element.removeListener(document, 'mouseup touchend touchcancel', stop)\r\n    }\r\n\r\n    // Ordering\r\n    function move(e) {\r\n      // First drag (more than 2 px) => show drag element (ghost)\r\n      pageY = e.pageY\r\n        || (e.touches && e.touches.length && e.touches[0].pageY)\r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageY)\r\n      if (start && Math.abs(pageY0 - pageY) > 2) {\r\n        start = false\r\n        elt.classList.add(\"drag\")\r\n        layer = self._getLayerForLI(elt)\r\n        target = false\r\n        group = self._getLayerForLI(elt.parentNode.parentNode)\r\n        // Ghost div\r\n        dragElt = ol_ext_element.create('LI', {\r\n          className: 'ol-dragover',\r\n          html: elt.innerHTML,\r\n          style: {\r\n            position: \"absolute\",\r\n            \"z-index\": 10000,\r\n            left: elt.offsetLeft,\r\n            opacity: 0.5,\r\n            width: ol_ext_element.outerWidth(elt),\r\n            height: ol_ext_element.getStyle(elt, 'height'),\r\n          },\r\n          parent: panel\r\n        })\r\n        self.element.classList.add('drag')\r\n        self.dispatchEvent({ type: \"reorder-start\", layer: layer, group: group })\r\n      }\r\n      // Start a new drag sequence\r\n      if (!start) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n\r\n        // Ghost div\r\n        ol_ext_element.setStyle(dragElt, { top: pageY - ol_ext_element.offsetRect(panel).top + panel.scrollTop + 5 })\r\n\r\n        var li\r\n        if (!e.touches) {\r\n          li = e.target\r\n          \r\n          // Get the HTML node within web component on click drag\r\n          if(e.target.shadowRoot){\r\n            li = e.composedPath()[0]\r\n          }\r\n        } else {\r\n          li = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n          \r\n          //Get actual HTML node within web component on touch drag\r\n          while(li.shadowRoot){\r\n            li = li.shadowRoot.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY)\r\n          }\r\n        }\r\n        if (li.classList.contains(\"ol-switcherbottomdiv\")) {\r\n          self.overflow(-1)\r\n        } else if (li.classList.contains(\"ol-switchertopdiv\")) {\r\n          self.overflow(1)\r\n        }\r\n        // Get associated li\r\n        while (li && li.tagName !== 'LI') {\r\n          li = li.parentNode\r\n        }\r\n        if (!li || !li.classList.contains('dropover')) {\r\n          elt.parentNode.querySelectorAll('li').forEach(function (li) {\r\n            li.classList.remove('dropover')\r\n            li.classList.remove('dropover-after')\r\n            li.classList.remove('dropover-before')\r\n          })\r\n        }\r\n        if (li && li.parentNode.classList.contains('drag') && li !== elt) {\r\n          target = self._getLayerForLI(li)\r\n          // Don't mix layer level\r\n          if (target && !target.get('allwaysOnTop') == !layer.get('allwaysOnTop')) {\r\n            li.classList.add(\"dropover\")\r\n            li.classList.add((elt.offsetTop < li.offsetTop) ? 'dropover-after' : 'dropover-before')\r\n          } else {\r\n            target = false\r\n          }\r\n          ol_ext_element.show(dragElt)\r\n        } else {\r\n          target = false\r\n          if (li === elt)\r\n            ol_ext_element.hide(dragElt)\r\n          else\r\n            ol_ext_element.show(dragElt)\r\n        }\r\n\r\n        if (!target)\r\n          dragElt.classList.add(\"forbidden\")\r\n        else\r\n          dragElt.classList.remove(\"forbidden\")\r\n      }\r\n    }\r\n\r\n    // Start ordering\r\n    ol_ext_element.addListener(document, 'mousemove touchmove', move)\r\n    ol_ext_element.addListener(document, 'mouseup touchend touchcancel', stop)\r\n  }\r\n  /** Change opacity on drag\r\n  *\t@param {event} e drag event\r\n  *\t@private\r\n  */\r\n  dragOpacity_(e) {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n    var self = this\r\n    // Register start params\r\n    var elt = e.target\r\n    var layer = this._getLayerForLI(elt.parentNode.parentNode.parentNode)\r\n    if (!layer)\r\n      return\r\n    var x = e.pageX\r\n      || (e.touches && e.touches.length && e.touches[0].pageX)\r\n      || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX)\r\n    var start = ol_ext_element.getStyle(elt, 'left') - x\r\n    self.dragging_ = true\r\n\r\n    // stop dragging\r\n    function stop() {\r\n      ol_ext_element.removeListener(document, \"mouseup touchend touchcancel\", stop)\r\n      ol_ext_element.removeListener(document, \"mousemove touchmove\", move)\r\n      self.dragging_ = false\r\n    }\r\n    // On draggin\r\n    function move(e) {\r\n      var x = e.pageX\r\n        || (e.touches && e.touches.length && e.touches[0].pageX)\r\n        || (e.changedTouches && e.changedTouches.length && e.changedTouches[0].pageX)\r\n      var delta = (start + x) / ol_ext_element.getStyle(elt.parentNode, 'width')\r\n      var opacity = Math.max(0, Math.min(1, delta))\r\n      ol_ext_element.setStyle(elt, { left: (opacity * 100) + \"%\" })\r\n      elt.parentNode.nextElementSibling.innerHTML = Math.round(opacity * 100)\r\n      layer.setOpacity(opacity)\r\n    }\r\n    // Register move\r\n    ol_ext_element.addListener(document, \"mouseup touchend touchcancel\", stop)\r\n    ol_ext_element.addListener(document, \"mousemove touchmove\", move)\r\n  }\r\n  /** Render a list of layer\r\n   * @param {Elemen} element to render\r\n   * @layers {Array{ol.layer}} list of layer to show\r\n   * @api stable\r\n   * @private\r\n   */\r\n  drawList(ul, collection) {\r\n    var self = this\r\n    var layers = collection.getArray()\r\n\r\n    // Change layer visibility\r\n    var setVisibility = function (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      self.switchLayerVisibility(l, collection)\r\n      if (self.get('selection') && l.getVisible()) {\r\n        self.selectLayer(l)\r\n      }\r\n      if (self.onchangeCheck) {\r\n        self.onchangeCheck(l)\r\n      }\r\n    }\r\n    // Info button click\r\n    function onInfo(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      self.oninfo(l)\r\n      self.dispatchEvent({ type: \"info\", layer: l })\r\n    }\r\n    // Zoom to extent button\r\n    function zoomExtent(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var l = self._getLayerForLI(this.parentNode.parentNode)\r\n      if (self.onextent) {\r\n        self.onextent(l)\r\n      } else {\r\n        self.getMap().getView().fit(l.getExtent(), self.getMap().getSize())\r\n      }\r\n      self.dispatchEvent({ type: \"extent\", layer: l })\r\n    }\r\n    // Remove a layer on trash click\r\n    function removeLayer(e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      var li = this.parentNode.parentNode.parentNode.parentNode\r\n      var layer, group = self._getLayerForLI(li)\r\n      // Remove the layer from a group or from a map\r\n      if (group) {\r\n        layer = self._getLayerForLI(this.parentNode.parentNode)\r\n        group.getLayers().remove(layer)\r\n        if (group.getLayers().getLength() == 0 && !group.get('noSwitcherDelete')) {\r\n          removeLayer.call(li.querySelectorAll('.layerTrash')[0], e)\r\n        }\r\n      } else {\r\n        li = this.parentNode.parentNode\r\n        self.getMap().removeLayer(self._getLayerForLI(li))\r\n      }\r\n    }\r\n\r\n    // Create a list for a layer\r\n    function createLi(layer) {\r\n      if (!this.displayInLayerSwitcher(layer)) {\r\n        this._setLayerForLI(null, layer)\r\n        return\r\n      }\r\n\r\n      var li = ol_ext_element.create('LI', {\r\n        className: (layer.getVisible() ? \"ol-visible \" : \" \") + (layer.get('baseLayer') ? \"baselayer\" : \"\"),\r\n        parent: ul\r\n      })\r\n      this._setLayerForLI(li, layer)\r\n      if (this._selectedLayer === layer) {\r\n        li.classList.add('ol-layer-select')\r\n      }\r\n\r\n      var layer_buttons = ol_ext_element.create('DIV', {\r\n        className: 'ol-layerswitcher-buttons',\r\n        parent: li\r\n      })\r\n\r\n      // Content div\r\n      var d = ol_ext_element.create('DIV', {\r\n        className: 'li-content',\r\n        parent: li\r\n      })\r\n\r\n      // Visibility\r\n      ol_ext_element.create('INPUT', {\r\n        type: layer.get('baseLayer') ? 'radio' : 'checkbox',\r\n        className: 'ol-visibility',\r\n        checked: layer.getVisible(),\r\n        click: setVisibility,\r\n        parent: d\r\n      })\r\n      // Label\r\n      var label = ol_ext_element.create('LABEL', {\r\n        title: layer.get('title') || layer.get('name'),\r\n        click: setVisibility,\r\n        style: {\r\n          userSelect: 'none'\r\n        },\r\n        parent: d\r\n      })\r\n      label.addEventListener('selectstart', function () { return false })\r\n      ol_ext_element.create('SPAN', {\r\n        html: layer.get('title') || layer.get('name'),\r\n        click: function (e) {\r\n          if (this.get('selection')) {\r\n            e.stopPropagation()\r\n            this.selectLayer(layer)\r\n          }\r\n        }.bind(this),\r\n        parent: label\r\n      })\r\n\r\n      //  up/down\r\n      if (this.reordering) {\r\n        if ((i < layers.length - 1 && (layer.get(\"allwaysOnTop\") || !layers[i + 1].get(\"allwaysOnTop\")))\r\n          || (i > 0 && (!layer.get(\"allwaysOnTop\") || layers[i - 1].get(\"allwaysOnTop\")))) {\r\n          ol_ext_element.create('DIV', {\r\n            className: 'layerup ol-noscroll',\r\n            title: this.tip.up,\r\n            on: { 'mousedown touchstart': function (e) { self.dragOrdering_(e) } },\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Show/hide sub layers\r\n      if (layer.getLayers) {\r\n        var nb = 0\r\n        layer.getLayers().forEach(function (l) {\r\n          if (self.displayInLayerSwitcher(l))\r\n            nb++\r\n        })\r\n        if (nb) {\r\n          ol_ext_element.create('DIV', {\r\n            className: layer.get(\"openInLayerSwitcher\") ? \"collapse-layers\" : \"expend-layers\",\r\n            title: this.tip.plus,\r\n            click: function () {\r\n              var l = self._getLayerForLI(this.parentNode.parentNode)\r\n              l.set(\"openInLayerSwitcher\", !l.get(\"openInLayerSwitcher\"))\r\n            },\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Info button\r\n      if (this.oninfo) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerInfo',\r\n          title: this.tip.info,\r\n          click: onInfo,\r\n          parent: layer_buttons\r\n        })\r\n      }\r\n      // Layer remove\r\n      if (this.hastrash && !layer.get(\"noSwitcherDelete\")) {\r\n        ol_ext_element.create('DIV', {\r\n          className: 'layerTrash',\r\n          title: this.tip.trash,\r\n          click: removeLayer,\r\n          parent: layer_buttons\r\n        })\r\n      }\r\n      // Layer extent\r\n      if (this.hasextent && layers[i].getExtent()) {\r\n        var ex = layers[i].getExtent()\r\n        if (ex.length == 4 && ex[0] < ex[2] && ex[1] < ex[3]) {\r\n          ol_ext_element.create('DIV', {\r\n            className: 'layerExtent',\r\n            title: this.tip.extent,\r\n            click: zoomExtent,\r\n            parent: layer_buttons\r\n          })\r\n        }\r\n      }\r\n\r\n      // Progress\r\n      if (this.show_progress && layer instanceof ol_layer_Tile) {\r\n        var p = ol_ext_element.create('DIV', {\r\n          className: 'layerswitcher-progress',\r\n          parent: d\r\n        })\r\n        this.setprogress_(layer)\r\n        layer.layerswitcher_progress = ol_ext_element.create('DIV', { parent: p })\r\n      }\r\n\r\n      // Opacity\r\n      var opacity = ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity',\r\n        // Click on the opacity line\r\n        click: function (e) {\r\n          if (e.target !== this)\r\n            return\r\n          e.stopPropagation()\r\n          e.preventDefault()\r\n          var op = Math.max(0, Math.min(1, e.offsetX / ol_ext_element.getStyle(this, 'width')))\r\n          self._getLayerForLI(this.parentNode.parentNode).setOpacity(op)\r\n          this.parentNode.querySelectorAll('.layerswitcher-opacity-label')[0].innerHTML = Math.round(op * 100)\r\n        },\r\n        parent: d\r\n      })\r\n      // Start dragging\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity-cursor ol-noscroll',\r\n        style: { left: (layer.getOpacity() * 100) + \"%\" },\r\n        on: {\r\n          'mousedown touchstart': function (e) { self.dragOpacity_(e) }\r\n        },\r\n        parent: opacity\r\n      })\r\n      // Percent\r\n      ol_ext_element.create('DIV', {\r\n        className: 'layerswitcher-opacity-label',\r\n        html: Math.round(layer.getOpacity() * 100),\r\n        parent: d\r\n      })\r\n\r\n      // Layer group\r\n      if (layer.getLayers) {\r\n        li.classList.add('ol-layer-group')\r\n        if (layer.get(\"openInLayerSwitcher\") === true) {\r\n          var ul2 = ol_ext_element.create('UL', {\r\n            parent: li\r\n          })\r\n          this.drawList(ul2, layer.getLayers())\r\n        }\r\n      }\r\n      li.classList.add(this.getLayerClass(layer))\r\n\r\n      // Dispatch a dralist event to allow customisation\r\n      this.dispatchEvent({ type: 'drawlist', layer: layer, li: li })\r\n    }\r\n\r\n    // Add the layer list\r\n    for (var i = layers.length - 1; i >= 0; i--) {\r\n      createLi.call(this, layers[i])\r\n    }\r\n\r\n    this.viewChange()\r\n\r\n    if (ul === this.panel_)\r\n      this.overflow()\r\n  }\r\n  /** Select a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @returns {string} the layer classname\r\n   * @api\r\n   */\r\n  getLayerClass(layer) {\r\n    if (!layer)\r\n      return 'none'\r\n    if (layer.getLayers)\r\n      return 'ol-layer-group'\r\n    if (layer instanceof ol_layer_Vector)\r\n      return 'ol-layer-vector'\r\n    if (layer instanceof ol_layer_VectorTile)\r\n      return 'ol-layer-vectortile'\r\n    if (layer instanceof ol_layer_Tile)\r\n      return 'ol-layer-tile'\r\n    if (layer instanceof ol_layer_Image)\r\n      return 'ol-layer-image'\r\n    if (layer instanceof ol_layer_Heatmap)\r\n      return 'ol-layer-heatmap'\r\n    /* ol < 6 compatibility VectorImage is not defined */\r\n    // if (layer instanceof ol_layer_VectorImage) return 'ol-layer-vectorimage';\r\n    if (layer.getFeatures)\r\n      return 'ol-layer-vectorimage'\r\n    /* */\r\n    return 'unknown'\r\n  }\r\n  /** Select a layer\r\n   * @param {ol.layer.Layer} layer\r\n   * @api\r\n   */\r\n  selectLayer(layer, silent) {\r\n    if (!layer) {\r\n      if (!this.getMap())\r\n        return\r\n      layer = this.getMap().getLayers().item(this.getMap().getLayers().getLength() - 1)\r\n    }\r\n    this._selectedLayer = layer\r\n    this.drawPanel()\r\n    if (!silent)\r\n      this.dispatchEvent({ type: 'select', layer: layer })\r\n  }\r\n  /** Get selected layer\r\n   * @returns {ol.layer.Layer}\r\n   */\r\n  getSelection() {\r\n    return this._selectedLayer\r\n  }\r\n  /** Handle progress bar for a layer\r\n  *\t@private\r\n  */\r\n  setprogress_(layer) {\r\n    if (!layer.layerswitcher_progress) {\r\n      var loaded = 0\r\n      var loading = 0\r\n      var draw = function () {\r\n        if (loading === loaded) {\r\n          loading = loaded = 0\r\n          ol_ext_element.setStyle(layer.layerswitcher_progress, { width: 0 }) // layer.layerswitcher_progress.width(0);\r\n        } else {\r\n          ol_ext_element.setStyle(layer.layerswitcher_progress, { width: (loaded / loading * 100).toFixed(1) + '%' }) // layer.layerswitcher_progress.css('width', (loaded / loading * 100).toFixed(1) + '%');\r\n        }\r\n      }\r\n      layer.getSource().on('tileloadstart', function () {\r\n        loading++\r\n        draw()\r\n      })\r\n      layer.getSource().on('tileloadend', function () {\r\n        loaded++\r\n        draw()\r\n      })\r\n      layer.getSource().on('tileloaderror', function () {\r\n        loaded++\r\n        draw()\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n/** List of tips for internationalization purposes\r\n*/\r\nol_control_LayerSwitcher.prototype.tip = {\r\n  up: \"up/down\",\r\n  down: \"down\",\r\n  info: \"informations...\",\r\n  extent: \"zoom to extent\",\r\n  trash: \"remove layer\",\r\n  plus: \"expand/shrink\"\r\n};\r\n\r\nexport default ol_control_LayerSwitcher\r\n"],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA,SAAQA,OAAO,IAAIC,qBAAqB,QAAO,kBAAkB;AACjE,OAAOC,kBAAkB,MAAM,uBAAuB;AACtD,OAAOC,aAAa,MAAM,kBAAkB;AAC5C,OAAOC,eAAe,MAAM,oBAAoB;AAChD,OAAOC,mBAAmB,MAAM,wBAAwB;AACxD;AACA;AACA,OAAOC,cAAc,MAAM,mBAAmB;AAC9C,OAAOC,gBAAgB,MAAM,qBAAqB;AAClD,SAAQC,UAAU,IAAIC,oBAAoB,QAAO,cAAc;AAE/D,OAAOC,cAAc,MAAM,oBAAoB;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,wBAAwB,0BAAAC,mBAAA;EAC1B,SAAAC,uBAAYC,OAAO,EAAE;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAH,sBAAA;IACnBC,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IACvB,IAAIG,OAAO,GAAGP,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;MACzCC,SAAS,EAAEL,OAAO,CAACM,aAAa,IAAI;IACtC,CAAC,CAAC;IACFL,KAAA,GAAAM,UAAA,OAAAR,sBAAA,GAAM;MACJI,OAAO,EAAEA,OAAO;MAChBK,MAAM,EAAER,OAAO,CAACQ;IAClB,CAAC;IAED,IAAIC,IAAI,GAAAR,KAAO;IACfA,KAAA,CAAKS,MAAM,GAAG,CAAC;IACfT,KAAA,CAAKU,aAAa,GAAGX,OAAO,CAACW,aAAa;IAC1CV,KAAA,CAAKW,MAAM,GAAI,OAAQZ,OAAO,CAACY,MAAO,IAAI,UAAU,GAAGZ,OAAO,CAACY,MAAM,GAAG,IAAK;IAC7EX,KAAA,CAAKY,QAAQ,GAAI,OAAQb,OAAO,CAACa,QAAS,IAAI,UAAU,GAAGb,OAAO,CAACa,QAAQ,GAAG,IAAK;IACnFZ,KAAA,CAAKa,SAAS,GAAGd,OAAO,CAACe,MAAM,IAAIf,OAAO,CAACa,QAAQ;IACnDZ,KAAA,CAAKe,QAAQ,GAAGhB,OAAO,CAACiB,KAAK;IAC7BhB,KAAA,CAAKiB,UAAU,GAAIlB,OAAO,CAACkB,UAAU,KAAK,KAAM;IAChDjB,KAAA,CAAKkB,OAAO,GAAG,EAAE;IACjBlB,KAAA,CAAKmB,WAAW,GAAIpB,OAAO,CAACqB,UAAU,IAAIrB,OAAO,CAACqB,UAAU,CAACC,SAAS,GAAItB,OAAO,CAACqB,UAAU,GAAG,IAAI;IACnGpB,KAAA,CAAKsB,aAAa,GAAI,OAAQvB,OAAO,CAACuB,aAAc,IAAI,UAAU,GAAGvB,OAAO,CAACuB,aAAa,GAAG,IAAK;;IAElG;IACA,IAAI,OAAQvB,OAAO,CAACwB,sBAAuB,KAAK,UAAU,EAAE;MAC1DvB,KAAA,CAAKuB,sBAAsB,GAAGxB,OAAO,CAACwB,sBAAsB;IAC9D;;IAEA;IACA,IAAI,CAACxB,OAAO,CAACQ,MAAM,EAAE;MACnBL,OAAO,CAACsB,SAAS,CAACC,GAAG,CAAC,iBAAiB,CAAC;MACxCvB,OAAO,CAACsB,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;MACnCvB,OAAO,CAACsB,SAAS,CAACC,GAAG,CAAC1B,OAAO,CAAC2B,SAAS,KAAK,KAAK,GAAG,cAAc,GAAG,cAAc,CAAC;MAEpF1B,KAAA,CAAK2B,MAAM,GAAGhC,cAAc,CAACQ,MAAM,CAAC,QAAQ,EAAE;QAC5CyB,IAAI,EAAE,QAAQ;QACdC,MAAM,EAAE3B;MACV,CAAC,CAAC;MACFF,KAAA,CAAK2B,MAAM,CAACG,gBAAgB,CAAC,YAAY,EAAE,UAAUC,CAAC,EAAE;QACtD7B,OAAO,CAACsB,SAAS,CAACQ,MAAM,CAAC,cAAc,CAAC;QACxC9B,OAAO,CAACsB,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;QACrCjB,IAAI,CAACyB,aAAa,CAAC;UAAEL,IAAI,EAAE,QAAQ;UAAEF,SAAS,EAAExB,OAAO,CAACsB,SAAS,CAACU,QAAQ,CAAC,cAAc;QAAE,CAAC,CAAC;QAC7FH,CAAC,CAACI,cAAc,CAAC,CAAC;QAClB3B,IAAI,CAAC4B,QAAQ,CAAC,CAAC;MACjB,CAAC,CAAC;MACFpC,KAAA,CAAK2B,MAAM,CAACG,gBAAgB,CAAC,OAAO,EAAE,YAAY;QAChD5B,OAAO,CAACsB,SAAS,CAACQ,MAAM,CAAC,cAAc,CAAC;QACxC9B,OAAO,CAACsB,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;QACrCjB,IAAI,CAACyB,aAAa,CAAC;UAAEL,IAAI,EAAE,QAAQ;UAAEF,SAAS,EAAE,CAACxB,OAAO,CAACsB,SAAS,CAACU,QAAQ,CAAC,cAAc;QAAE,CAAC,CAAC;QAC9F1B,IAAI,CAAC4B,QAAQ,CAAC,CAAC;MACjB,CAAC,CAAC;MAEF,IAAIrC,OAAO,CAACsC,SAAS,EAAE;QACrBnC,OAAO,CAAC4B,gBAAgB,CAAC,YAAY,EAAE,YAAY;UACjD5B,OAAO,CAACsB,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;UACrCjB,IAAI,CAACyB,aAAa,CAAC;YAAEL,IAAI,EAAE,QAAQ;YAAEF,SAAS,EAAE;UAAK,CAAC,CAAC;QACzD,CAAC,CAAC;QACFxB,OAAO,CAAC4B,gBAAgB,CAAC,WAAW,EAAE,YAAY;UAChD5B,OAAO,CAACsB,SAAS,CAACc,MAAM,CAAC,cAAc,CAAC;UACxC9B,IAAI,CAACyB,aAAa,CAAC;YAAEL,IAAI,EAAE,QAAQ;YAAEF,SAAS,EAAE;UAAM,CAAC,CAAC;QAC1D,CAAC,CAAC;MACJ;MAEA,IAAI3B,OAAO,CAACwC,OAAO,EACjBxC,OAAO,CAACyC,QAAQ,GAAG,IAAI;MACzB,IAAI,CAACzC,OAAO,CAACyC,QAAQ,EAAE;QACrBxC,KAAA,CAAKyC,IAAI,GAAG9C,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;UACvCC,SAAS,EAAE,mBAAmB;UAC9ByB,MAAM,EAAE3B,OAAO;UACfwC,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;YACjBlC,IAAI,CAAC4B,QAAQ,CAAC,MAAM,CAAC;UACvB;QACF,CAAC,CAAC;QAEFpC,KAAA,CAAK2C,IAAI,GAAGhD,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;UACvCC,SAAS,EAAE,sBAAsB;UACjCyB,MAAM,EAAE3B,OAAO;UACfwC,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;YACjBlC,IAAI,CAAC4B,QAAQ,CAAC,MAAM,CAAC;UACvB;QACF,CAAC,CAAC;MACJ;MACApC,KAAA,CAAK4C,SAAS,GAAG7C,OAAO,CAACyC,QAAQ;IACnC;IAEAxC,KAAA,CAAK6C,MAAM,GAAGlD,cAAc,CAACQ,MAAM,CAAC,IAAI,EAAE;MACxCC,SAAS,EAAE;IACb,CAAC,CAAC;IACFJ,KAAA,CAAK8C,eAAe,GAAGnD,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;MAClDC,SAAS,EAAE,iBAAiB;MAC5B2C,IAAI,EAAE/C,KAAA,CAAK6C,MAAM;MACjBhB,MAAM,EAAE3B;IACV,CAAC,CAAC;IACF;IACA,IAAI,CAACH,OAAO,CAACQ,MAAM,IAAI,CAACR,OAAO,CAACyC,QAAQ,EAAE;MACxC7C,cAAc,CAACqD,WAAW,CAAChD,KAAA,CAAK6C,MAAM,EAAE,wCAAwC,EAAE,UAAUd,CAAC,EAAE;QAC7F,IAAIvB,IAAI,CAAC4B,QAAQ,CAACa,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAGpB,CAAC,CAACqB,UAAU,IAAI,CAACrB,CAAC,CAACsB,MAAO,CAAC,CAAC,CAAC,EAAE;UACzEtB,CAAC,CAACuB,eAAe,CAAC,CAAC;UACnBvB,CAAC,CAACI,cAAc,CAAC,CAAC;QACpB;MACF,CAAC,CAAC;IACJ;IAEAnC,KAAA,CAAKuD,OAAO,GAAG5D,cAAc,CAACQ,MAAM,CAAC,IAAI,EAAE;MACzCC,SAAS,EAAE,WAAW;MACtByB,MAAM,EAAE7B,KAAA,CAAK6C;IACf,CAAC,CAAC;IAEF7C,KAAA,CAAKwD,GAAG,CAAC,WAAW,EAAEzD,OAAO,CAAC0D,SAAS,IAAI,CAAC,CAAC;IAC7CzD,KAAA,CAAKwD,GAAG,CAAC,WAAW,EAAEzD,OAAO,CAAC2D,SAAS,CAAC;IAExC,IAAI3D,OAAO,CAACwC,OAAO,EAAE;MACnB;MACAoB,UAAU,CAAC,YAAY;QACrB,IAAIC,IAAI,GAAGjE,cAAc,CAACkE,SAAS,CAAC,IAAI,CAACf,eAAe,EAAE;UACxDgB,UAAU,EAAE,IAAI;UAChBC,QAAQ,EAAE,IAAI;UACdxB,OAAO,EAAE;QACX,CAAC,CAAC;QACF,IAAI,CAACyB,EAAE,CAAC,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,YAAY;UAC1CJ,IAAI,CAACK,OAAO,CAAC,CAAC;QAChB,CAAC,CAAC;MACJ,CAAC,CAACC,IAAI,CAAAlE,KAAK,CAAC,CAAC;IACf;IAAC,OAAAA,KAAA;EACH;EACA;AACF;AACA;AACA;EAHEmE,SAAA,CAAArE,sBAAA,EAAAD,mBAAA;EAAA,OAAAuE,YAAA,CAAAtE,sBAAA;IAAAuE,GAAA;IAAAC,KAAA,EAIA,SAAA/C,sBAAsBA,CAACgD,KAAK,EAAE;MAC5B,OAAQA,KAAK,CAACC,GAAG,CAAC,wBAAwB,CAAC,KAAK,KAAK;IACvD;IACA;AACF;AACA;AACA;EAHE;IAAAH,GAAA;IAAAC,KAAA,EAIA,SAAAG,MAAMA,CAACC,GAAG,EAAE;MACVC,aAAA,CAAA7E,sBAAA,sBAAa4E,GAAG;MAChB,IAAI,CAACE,SAAS,CAAC,CAAC;MAEhB,IAAI,IAAI,CAACC,SAAS,EAAE;QAClB,KAAK,IAAIC,CAAC,IAAI,IAAI,CAACD,SAAS,EAAC;UAC3B3F,qBAAqB,CAAC,IAAI,CAAC2F,SAAS,CAACC,CAAC,CAAC,CAAC;QAC1C;MACF;MACA,IAAI,CAACD,SAAS,GAAG,IAAI;;MAErB;MACA,IAAIH,GAAG,EAAE;QACP,IAAI,CAACG,SAAS,GAAG;UACfE,OAAO,EAAEL,GAAG,CAACV,EAAE,CAAC,SAAS,EAAE,IAAI,CAACgB,UAAU,CAACd,IAAI,CAAC,IAAI,CAAC,CAAC;UACtDe,IAAI,EAAEP,GAAG,CAACV,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC5B,QAAQ,CAAC8B,IAAI,CAAC,IAAI,CAAC;QACtD,CAAC;QACD;QACA,IAAI,IAAI,CAAC/C,WAAW,EAAE;UACpB,IAAI,CAAC0D,SAAS,CAACK,MAAM,GAAG,IAAI,CAAC/D,WAAW,CAACE,SAAS,CAAC,CAAC,CAAC2C,EAAE,CAAC,eAAe,EAAE,IAAI,CAACY,SAAS,CAACV,IAAI,CAAC,IAAI,CAAC,CAAC;QACrG,CAAC,MAAM;UACL;UACA,IAAI,CAACW,SAAS,CAACK,MAAM,GAAGR,GAAG,CAACS,aAAa,CAAC,CAAC,CAAC9D,SAAS,CAAC,CAAC,CAAC2C,EAAE,CAAC,eAAe,EAAE,IAAI,CAACY,SAAS,CAACV,IAAI,CAAC,IAAI,CAAC,CAAC;QACxG;MACF;IACF;IACA;AACF;EADE;IAAAG,GAAA;IAAAC,KAAA,EAEA,SAAAc,IAAIA,CAAA,EAAG;MACL,IAAI,CAAClF,OAAO,CAACsB,SAAS,CAACC,GAAG,CAAC,cAAc,CAAC;MAC1C,IAAI,CAACW,QAAQ,CAAC,CAAC;MACf,IAAI,CAACH,aAAa,CAAC;QAAEL,IAAI,EAAE,QAAQ;QAAEF,SAAS,EAAE;MAAM,CAAC,CAAC;IAC1D;IACA;AACF;EADE;IAAA2C,GAAA;IAAAC,KAAA,EAEA,SAAAe,IAAIA,CAAA,EAAG;MACL,IAAI,CAACnF,OAAO,CAACsB,SAAS,CAACc,MAAM,CAAC,cAAc,CAAC;MAC7C,IAAI,CAACF,QAAQ,CAAC,CAAC;MACf,IAAI,CAACH,aAAa,CAAC;QAAEL,IAAI,EAAE,QAAQ;QAAEF,SAAS,EAAE;MAAK,CAAC,CAAC;IACzD;IACA;AACF;EADE;IAAA2C,GAAA;IAAAC,KAAA,EAEA,SAAAtC,MAAMA,CAAA,EAAG;MACP,IAAI,CAAC9B,OAAO,CAACsB,SAAS,CAACQ,MAAM,CAAC,cAAc,CAAC;MAC7C,IAAI,CAACI,QAAQ,CAAC,CAAC;MACf,IAAI,CAACH,aAAa,CAAC;QAAEL,IAAI,EAAE,QAAQ;QAAEF,SAAS,EAAE,CAAC,IAAI,CAAC4D,MAAM,CAAC;MAAE,CAAC,CAAC;IACnE;IACA;AACF;AACA;EAFE;IAAAjB,GAAA;IAAAC,KAAA,EAGA,SAAAgB,MAAMA,CAAA,EAAG;MACP,OAAO,IAAI,CAACpF,OAAO,CAACsB,SAAS,CAACU,QAAQ,CAAC,cAAc,CAAC;IACxD;IACA;AACF;AACA;EAFE;IAAAmC,GAAA;IAAAC,KAAA,EAGA,SAAAiB,SAASA,CAACxC,IAAI,EAAE;MACdpD,cAAc,CAAC6F,OAAO,CAAC,IAAI,CAACjC,OAAO,EAAER,IAAI,CAAC;IAC5C;IACA;AACF;AACA;AACA;EAHE;IAAAsB,GAAA;IAAAC,KAAA,EAIA,SAAAlC,QAAQA,CAACqD,GAAG,EAAE;MACZ,IAAI,IAAI,CAAC9D,MAAM,IAAI,CAAC,IAAI,CAACiB,SAAS,EAAE;QAClC;QACA,IAAIjD,cAAc,CAAC+F,MAAM,CAAC,IAAI,CAAC7C,MAAM,CAAC,EAAE;UACtClD,cAAc,CAACgG,QAAQ,CAAC,IAAI,CAACzF,OAAO,EAAE;YAAE0F,MAAM,EAAE;UAAO,CAAC,CAAC;UACzD;QACF;QACA;QACA,IAAIC,CAAC,GAAGlG,cAAc,CAACmG,WAAW,CAAC,IAAI,CAAC5F,OAAO,CAAC;QAChD,IAAI6F,EAAE,GAAGpG,cAAc,CAACmG,WAAW,CAAC,IAAI,CAACjD,MAAM,CAAC;QAChD,IAAImD,EAAE,GAAG,IAAI,CAACrE,MAAM,CAACsE,SAAS,GAAGtG,cAAc,CAACmG,WAAW,CAAC,IAAI,CAACnE,MAAM,CAAC;QACxE;QACA,IAAIuE,GAAG,GAAG,IAAI,CAACrD,MAAM,CAACoD,SAAS,GAAGD,EAAE;QACpC,IAAID,EAAE,GAAGF,CAAC,GAAGG,EAAE,EAAE;UACf;UACArG,cAAc,CAACgG,QAAQ,CAAC,IAAI,CAACzF,OAAO,EAAE;YAAE0F,MAAM,EAAE;UAAO,CAAC,CAAC;UACzD,IAAIO,EAAE,GAAG,IAAI,CAACtD,MAAM,CAACuD,gBAAgB,CAAC,2BAA2B,CAAC,CAAC,CAAC,CAAC;UACrE,IAAIC,EAAE,GAAGF,EAAE,GAAG,CAAC,GAAGxG,cAAc,CAAC2G,QAAQ,CAACH,EAAE,EAAE,QAAQ,CAAC,GAAG,CAAC;UAC3D,QAAQV,GAAG;YACT,KAAK,CAAC;cAAES,GAAG,IAAIG,EAAE;cAAE;YACnB,KAAK,CAAC,CAAC;cAAEH,GAAG,IAAIG,EAAE;cAAE;YACpB,KAAK,MAAM;cAAEH,GAAG,IAAIjD,IAAI,CAACsD,KAAK,CAACV,CAAC,GAAG,CAAC,CAAC;cAAE;YACvC,KAAK,MAAM;cAAEK,GAAG,IAAIjD,IAAI,CAACsD,KAAK,CAACV,CAAC,GAAG,CAAC,CAAC;cAAE;YACvC;cAAS;UACX;UACA;UACA,IAAIK,GAAG,GAAGH,EAAE,IAAIF,CAAC,GAAG,CAAC,GAAGG,EAAE,GAAG,CAAC,EAAE;YAC9BE,GAAG,GAAGL,CAAC,GAAG,CAAC,GAAGG,EAAE,GAAG,CAAC,GAAGD,EAAE;YACzBpG,cAAc,CAAC0F,IAAI,CAAC,IAAI,CAAC1C,IAAI,CAAC;UAChC,CAAC,MAAM;YACLhD,cAAc,CAACyF,IAAI,CAAC,IAAI,CAACzC,IAAI,CAAC;UAChC;UACA,IAAIuD,GAAG,IAAI,CAAC,EAAE;YACZA,GAAG,GAAG,CAAC;YACPvG,cAAc,CAAC0F,IAAI,CAAC,IAAI,CAAC5C,IAAI,CAAC;UAChC,CAAC,MAAM;YACL9C,cAAc,CAACyF,IAAI,CAAC,IAAI,CAAC3C,IAAI,CAAC;UAChC;UACA;UACA9C,cAAc,CAACgG,QAAQ,CAAC,IAAI,CAAC9C,MAAM,EAAE;YAAEqD,GAAG,EAAEA,GAAG,GAAG;UAAK,CAAC,CAAC;UACzD,OAAO,IAAI;QACb,CAAC,MAAM;UACLvG,cAAc,CAACgG,QAAQ,CAAC,IAAI,CAACzF,OAAO,EAAE;YAAE0F,MAAM,EAAE;UAAO,CAAC,CAAC;UACzDjG,cAAc,CAACgG,QAAQ,CAAC,IAAI,CAAC9C,MAAM,EAAE;YAAEqD,GAAG,EAAE;UAAE,CAAC,CAAC;UAChDvG,cAAc,CAAC0F,IAAI,CAAC,IAAI,CAAC1C,IAAI,CAAC;UAC9BhD,cAAc,CAAC0F,IAAI,CAAC,IAAI,CAAC5C,IAAI,CAAC;UAC9B,OAAO,KAAK;QACd;MACF,CAAC,MAEC,OAAO,KAAK;IAChB;IACA;AACF;AACA;AACA;AACA;EAJE;IAAA4B,GAAA;IAAAC,KAAA,EAKA,SAAAkC,cAAcA,CAACL,EAAE,EAAE5B,KAAK,EAAE;MACxB,IAAIkC,SAAS,GAAG,EAAE;MAClB,IAAIlC,KAAK,CAAClD,SAAS,EAAE;QACnBoF,SAAS,CAACC,IAAI,CAACnC,KAAK,CAAClD,SAAS,CAAC,CAAC,CAAC2C,EAAE,CAAC,eAAe,EAAE,IAAI,CAACY,SAAS,CAACV,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;MAClF;MACA,IAAIiC,EAAE,EAAE;QACN;QACAM,SAAS,CAACC,IAAI,CAACnC,KAAK,CAACP,EAAE,CAAC,gBAAgB,EAAG,YAAY;UACrD,IAAI,CAAC2C,eAAe,CAACpC,KAAK,EAAE4B,EAAE,CAAC;QACjC,CAAC,CAAEjC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACf;QACAuC,SAAS,CAACC,IAAI,CAACnC,KAAK,CAACP,EAAE,CAAC,gBAAgB,EAAG,YAAY;UACrD,IAAI,CAAC4C,kBAAkB,CAACrC,KAAK,EAAE4B,EAAE,CAAC;QACpC,CAAC,CAAEjC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;MACjB;MACA;MACAuC,SAAS,CAACC,IAAI,CAACnC,KAAK,CAACP,EAAE,CAAC,gBAAgB,EAAG,UAAUjC,CAAC,EAAE;QACtD,IAAIA,CAAC,CAACsC,GAAG,KAAK,wBAAwB,IACjCtC,CAAC,CAACsC,GAAG,KAAK,qBAAqB,IAC/BtC,CAAC,CAACsC,GAAG,KAAK,OAAO,IACjBtC,CAAC,CAACsC,GAAG,KAAK,MAAM,EAAE;UACrB,IAAI,CAACO,SAAS,CAAC7C,CAAC,CAAC;QACnB;MACF,CAAC,CAAEmC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;MACf,IAAI,CAAChD,OAAO,CAACwF,IAAI,CAAC;QAAEP,EAAE,EAAEA,EAAE;QAAE5B,KAAK,EAAEA,KAAK;QAAEkC,SAAS,EAAEA;MAAU,CAAC,CAAC;IACnE;IACA;AACF;AACA;AACA;AACA;EAJE;IAAApC,GAAA;IAAAC,KAAA,EAKA,SAAAqC,eAAeA,CAACpC,KAAK,EAAE4B,EAAE,EAAE;MACzB,IAAIrB,CAAC,GAAGqB,EAAE,CAACU,aAAa,CAAC,+BAA+B,CAAC;MACzD,IAAI/B,CAAC,EAAC;QACJA,CAAC,CAACgC,KAAK,CAACC,IAAI,GAAIxC,KAAK,CAACyC,UAAU,CAAC,CAAC,GAAG,GAAG,GAAI,GAAG;MACjD;MACA,IAAI,CAAC/E,aAAa,CAAC;QAAEL,IAAI,EAAE,eAAe;QAAE2C,KAAK,EAAEA;MAAM,CAAC,CAAC;IAC7D;IACA;AACF;AACA;AACA;AACA;EAJE;IAAAF,GAAA;IAAAC,KAAA,EAKA,SAAAsC,kBAAkBA,CAACrC,KAAK,EAAE4B,EAAE,EAAE;MAC5B,IAAIrB,CAAC,GAAGqB,EAAE,CAACU,aAAa,CAAC,gBAAgB,CAAC;MAC1C,IAAI/B,CAAC,EAAE;QACLA,CAAC,CAACmC,OAAO,GAAG1C,KAAK,CAAC2C,UAAU,CAAC,CAAC;MAChC;MACA,IAAI3C,KAAK,CAAC2C,UAAU,CAAC,CAAC,EAAC;QACrBf,EAAE,CAAC3E,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;MAChC,CAAC,MAAK;QACJ0E,EAAE,CAAC3E,SAAS,CAACc,MAAM,CAAC,YAAY,CAAC;MACnC;MACA,IAAI,CAACL,aAAa,CAAC;QAAEL,IAAI,EAAE,eAAe;QAAE2C,KAAK,EAAEA;MAAM,CAAC,CAAC;IAC7D;IACA;AACF;AACA;EAFE;IAAAF,GAAA;IAAAC,KAAA,EAGA,SAAA6C,gBAAgBA,CAAA,EAAG;MACjB,IAAI,CAACjG,OAAO,CAACkG,OAAO,CAAC,UAAUjB,EAAE,EAAE;QACjCA,EAAE,CAACM,SAAS,CAACW,OAAO,CAAC,UAAUC,CAAC,EAAE;UAChCnI,qBAAqB,CAACmI,CAAC,CAAC;QAC1B,CAAC,CAAC;MACJ,CAAC,CAAC;MACF,IAAI,CAACnG,OAAO,GAAG,EAAE;IACnB;IACA;AACF;AACA;AACA;AACA;EAJE;IAAAmD,GAAA;IAAAC,KAAA,EAKA,SAAAgD,cAAcA,CAACnB,EAAE,EAAE;MACjB,KAAK,IAAIrB,CAAC,GAAG,CAAC,EAAEuC,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACnG,OAAO,CAAC4D,CAAC,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC3C,IAAIuC,CAAC,CAAClB,EAAE,KAAKA,EAAE,EAAE;UACf,OAAOkB,CAAC,CAAC9C,KAAK;QAChB;MACF;MACA,OAAO,IAAI;IACb;IACA;AACF;AACA;AACA;EAHE;IAAAF,GAAA;IAAAC,KAAA,EAIA,SAAAU,UAAUA,CAAA,EAAG;MACX,IAAI,CAACnC,MAAM,CAACuD,gBAAgB,CAAC,IAAI,CAAC,CAACgB,OAAO,CAAC,UAAUjB,EAAE,EAAE;QACvD,IAAIkB,CAAC,GAAG,IAAI,CAACC,cAAc,CAACnB,EAAE,CAAC;QAC/B,IAAIkB,CAAC,EAAE;UACL,IAAI,IAAI,CAACE,mBAAmB,CAACF,CAAC,CAAC,EAAE;YAC/BlB,EAAE,CAAC3E,SAAS,CAACc,MAAM,CAAC,iBAAiB,CAAC;UACxC,CAAC,MAAM;YACL6D,EAAE,CAAC3E,SAAS,CAACC,GAAG,CAAC,iBAAiB,CAAC;UACrC;QACF;MACF,CAAC,CAACyC,IAAI,CAAC,IAAI,CAAC,CAAC;IACf;IACA;AACF;AACA;EAFE;IAAAG,GAAA;IAAAC,KAAA,EAGA,SAAAkD,QAAQA,CAAA,EAAG;MACT,OAAO,IAAI,CAAC1E,eAAe;IAC7B;IACA;AACF;AACA;EAFE;IAAAuB,GAAA;IAAAC,KAAA,EAGA,SAAAM,SAASA,CAAA,EAAG;MACV,IAAI,CAAC,IAAI,CAAC6C,MAAM,CAAC,CAAC,EAChB;MACF,IAAIjH,IAAI,GAAG,IAAI;MACf;MACA,IAAI,CAACC,MAAM,EAAE;MACbkD,UAAU,CAAC,YAAY;QAAEnD,IAAI,CAACkH,UAAU,CAAC,CAAC;MAAC,CAAC,EAAE,IAAI,CAAClD,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC3E;IACA;AACF;AACA;EAFE;IAAAH,GAAA;IAAAC,KAAA,EAGA,SAAAoD,UAAUA,CAAA,EAAG;MACX,IAAI,EAAE,IAAI,CAACjH,MAAM,IAAI,IAAI,CAACkH,SAAS,EAAE;QACnC;MACF;MACA,IAAIC,SAAS,GAAG,IAAI,CAAC9E,eAAe,CAAC8E,SAAS;;MAE9C;MACA,IAAI,CAACT,gBAAgB,CAAC,CAAC;MACvB,IAAI,CAACtE,MAAM,CAACuD,gBAAgB,CAAC,IAAI,CAAC,CAACgB,OAAO,CAAC,UAAUjB,EAAE,EAAE;QACvD,IAAI,CAACA,EAAE,CAAC3E,SAAS,CAACU,QAAQ,CAAC,WAAW,CAAC,EACrCiE,EAAE,CAAC7D,MAAM,CAAC,CAAC;MACf,CAAC,CAAC4B,IAAI,CAAC,IAAI,CAAC,CAAC;MACb;MACA,IAAI,IAAI,CAAC/C,WAAW,EAAE;QACpB,IAAI,CAAC0G,QAAQ,CAAC,IAAI,CAAChF,MAAM,EAAE,IAAI,CAAC1B,WAAW,CAACE,SAAS,CAAC,CAAC,CAAC;MAC1D,CAAC,MAAM,IAAI,IAAI,CAACoG,MAAM,CAAC,CAAC,EAAE;QACxB,IAAI,CAACI,QAAQ,CAAC,IAAI,CAAChF,MAAM,EAAE,IAAI,CAAC4E,MAAM,CAAC,CAAC,CAACpG,SAAS,CAAC,CAAC,CAAC;MACvD;MACA;MACA,IAAI,CAACyB,eAAe,CAAC8E,SAAS,GAAGA,SAAS;IAC5C;IACA;AACF;AACA;AACA;AACA;EAJE;IAAAvD,GAAA;IAAAC,KAAA,EAKA,SAAAwD,qBAAqBA,CAACT,CAAC,EAAEU,MAAM,EAAE;MAC/B,IAAI,CAACV,CAAC,CAAC7C,GAAG,CAAC,WAAW,CAAC,EAAE;QACvB6C,CAAC,CAACW,UAAU,CAAC,CAACX,CAAC,CAACH,UAAU,CAAC,CAAC,CAAC;MAC/B,CAAC,MAAM;QACL,IAAI,CAACG,CAAC,CAACH,UAAU,CAAC,CAAC,EAAE;UACnBG,CAAC,CAACW,UAAU,CAAC,IAAI,CAAC;QACpB;QACAD,MAAM,CAACX,OAAO,CAAC,UAAUjB,EAAE,EAAE;UAC3B,IAAIkB,CAAC,KAAKlB,EAAE,IAAIA,EAAE,CAAC3B,GAAG,CAAC,WAAW,CAAC,IAAI2B,EAAE,CAACe,UAAU,CAAC,CAAC,EAAE;YACtDf,EAAE,CAAC6B,UAAU,CAAC,KAAK,CAAC;UACtB;QACF,CAAC,CAAC;MACJ;IACF;IACA;AACF;AACA;AACA;AACA;EAJE;IAAA3D,GAAA;IAAAC,KAAA,EAKA,SAAAiD,mBAAmBA,CAAChD,KAAK,EAAE;MACzB,IAAI,CAAC,IAAI,CAACkD,MAAM,CAAC,CAAC,EAChB,OAAO,IAAI;MACb,IAAIQ,GAAG,GAAG,IAAI,CAACR,MAAM,CAAC,CAAC,CAACS,OAAO,CAAC,CAAC,CAACC,aAAa,CAAC,CAAC;MACjD,IAAIC,IAAI,GAAG,IAAI,CAACX,MAAM,CAAC,CAAC,CAACS,OAAO,CAAC,CAAC,CAACG,OAAO,CAAC,CAAC;MAC5C;MACA,IAAI9D,KAAK,CAAC+D,gBAAgB,CAAC,CAAC,IAAIL,GAAG,IAAI1D,KAAK,CAACgE,gBAAgB,CAAC,CAAC,IAAIN,GAAG,EAAE;QACtE,OAAO,KAAK;MACd,CAAC,MAAM,IAAI1D,KAAK,CAACiE,UAAU,KAAKjE,KAAK,CAACiE,UAAU,CAAC,CAAC,IAAIJ,IAAI,IAAI7D,KAAK,CAACkE,UAAU,CAAC,CAAC,GAAGL,IAAI,CAAC,EAAE;QACxF,OAAO,KAAK;MACd,CAAC,MAAM;QACL;QACA,IAAIM,GAAG,GAAGnE,KAAK,CAACoE,SAAS,CAAC,CAAC;QAC3B,IAAID,GAAG,EAAE;UACP,IAAIE,EAAE,GAAG,IAAI,CAACnB,MAAM,CAAC,CAAC,CAACS,OAAO,CAAC,CAAC,CAACW,eAAe,CAAC,IAAI,CAACpB,MAAM,CAAC,CAAC,CAACqB,OAAO,CAAC,CAAC,CAAC;UACzE,OAAOpJ,oBAAoB,CAACkJ,EAAE,EAAEF,GAAG,CAAC;QACtC;QACA,OAAO,IAAI;MACb;IACF;IACA;AACF;AACA;AACA;EAHE;IAAArE,GAAA;IAAAC,KAAA,EAIA,SAAAyE,aAAaA,CAAChH,CAAC,EAAE;MACfA,CAAC,CAACuB,eAAe,CAAC,CAAC;MACnBvB,CAAC,CAACI,cAAc,CAAC,CAAC;MAClB;MACA,IAAI3B,IAAI,GAAG,IAAI;MACf,IAAIwI,GAAG,GAAGjH,CAAC,CAACkH,aAAa,CAACC,UAAU,CAACA,UAAU;MAC/C,IAAIC,KAAK,GAAG,IAAI;MAChB,IAAIC,KAAK,GAAG,IAAI,CAACvG,MAAM;MACvB,IAAIwG,KAAK;MACT,IAAIC,MAAM,GAAGvH,CAAC,CAACsH,KAAK,IACdtH,CAAC,CAACwH,OAAO,IAAIxH,CAAC,CAACwH,OAAO,CAACC,MAAM,IAAIzH,CAAC,CAACwH,OAAO,CAAC,CAAC,CAAC,CAACF,KAAM,IACpDtH,CAAC,CAAC0H,cAAc,IAAI1H,CAAC,CAAC0H,cAAc,CAACD,MAAM,IAAIzH,CAAC,CAAC0H,cAAc,CAAC,CAAC,CAAC,CAACJ,KAAM;MAC/E,IAAI9I,MAAM,EAAEmJ,OAAO;MACnB,IAAInF,KAAK,EAAEoF,KAAK;MAChBX,GAAG,CAACE,UAAU,CAAC1H,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC;;MAEpC;MACA,SAASmI,IAAIA,CAAA,EAAG;QACd,IAAIrJ,MAAM,EAAE;UACV;UACA,IAAIsJ,IAAI,GAAGtF,KAAK;UAChB,IAAIuF,UAAU,GAAGtJ,IAAI,CAACuJ,YAAY,CAAC,CAAC,KAAKF,IAAI;UAC7C,IAAIA,IAAI,IAAItJ,MAAM,EAAE;YAClB,IAAIyJ,UAAU;YACd,IAAIL,KAAK,EACPK,UAAU,GAAGL,KAAK,CAACtI,SAAS,CAAC,CAAC,MAE9B2I,UAAU,GAAGxJ,IAAI,CAACW,WAAW,GAAGX,IAAI,CAACW,WAAW,CAACE,SAAS,CAAC,CAAC,GAAGb,IAAI,CAACiH,MAAM,CAAC,CAAC,CAACpG,SAAS,CAAC,CAAC;YAC1F,IAAI0G,MAAM,GAAGiC,UAAU,CAACC,QAAQ,CAAC,CAAC;YAClC;YACA,KAAK,IAAInF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiD,MAAM,CAACyB,MAAM,EAAE1E,CAAC,EAAE,EAAE;cACtC,IAAIiD,MAAM,CAACjD,CAAC,CAAC,IAAI+E,IAAI,EAAE;gBACrBG,UAAU,CAACE,QAAQ,CAACpF,CAAC,CAAC;gBACtB;cACF;YACF;YACA,KAAK,IAAIqF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpC,MAAM,CAACyB,MAAM,EAAEW,CAAC,EAAE,EAAE;cACtC,IAAIpC,MAAM,CAACoC,CAAC,CAAC,KAAK5J,MAAM,EAAE;gBACxB,IAAIuE,CAAC,GAAGqF,CAAC,EACPH,UAAU,CAACI,QAAQ,CAACD,CAAC,EAAEN,IAAI,CAAC,MAE5BG,UAAU,CAACI,QAAQ,CAACD,CAAC,GAAG,CAAC,EAAEN,IAAI,CAAC;gBAClC;cACF;YACF;UACF;UACA,IAAIC,UAAU,EACZtJ,IAAI,CAAC6J,WAAW,CAACR,IAAI,CAAC;UAExBrJ,IAAI,CAACyB,aAAa,CAAC;YAAEL,IAAI,EAAE,aAAa;YAAE2C,KAAK,EAAEsF,IAAI;YAAEF,KAAK,EAAEA;UAAM,CAAC,CAAC;QACxE;QAEAX,GAAG,CAACE,UAAU,CAAC9C,gBAAgB,CAAC,IAAI,CAAC,CAACgB,OAAO,CAAC,UAAUjB,EAAE,EAAE;UAC1DA,EAAE,CAAC3E,SAAS,CAACc,MAAM,CAAC,UAAU,CAAC;UAC/B6D,EAAE,CAAC3E,SAAS,CAACc,MAAM,CAAC,gBAAgB,CAAC;UACrC6D,EAAE,CAAC3E,SAAS,CAACc,MAAM,CAAC,iBAAiB,CAAC;QACxC,CAAC,CAAC;QACF0G,GAAG,CAACxH,SAAS,CAACc,MAAM,CAAC,MAAM,CAAC;QAC5B0G,GAAG,CAACE,UAAU,CAAC1H,SAAS,CAACc,MAAM,CAAC,MAAM,CAAC;QACvC9B,IAAI,CAACN,OAAO,CAACsB,SAAS,CAACc,MAAM,CAAC,MAAM,CAAC;QACrC,IAAIoH,OAAO,EACTA,OAAO,CAACpH,MAAM,CAAC,CAAC;QAElB3C,cAAc,CAAC2K,cAAc,CAACC,QAAQ,EAAE,qBAAqB,EAAEC,IAAI,CAAC;QACpE7K,cAAc,CAAC2K,cAAc,CAACC,QAAQ,EAAE,8BAA8B,EAAEX,IAAI,CAAC;MAC/E;;MAEA;MACA,SAASY,IAAIA,CAACzI,CAAC,EAAE;QACf;QACAsH,KAAK,GAAGtH,CAAC,CAACsH,KAAK,IACTtH,CAAC,CAACwH,OAAO,IAAIxH,CAAC,CAACwH,OAAO,CAACC,MAAM,IAAIzH,CAAC,CAACwH,OAAO,CAAC,CAAC,CAAC,CAACF,KAAM,IACpDtH,CAAC,CAAC0H,cAAc,IAAI1H,CAAC,CAAC0H,cAAc,CAACD,MAAM,IAAIzH,CAAC,CAAC0H,cAAc,CAAC,CAAC,CAAC,CAACJ,KAAM;QAC/E,IAAIF,KAAK,IAAIlG,IAAI,CAACwH,GAAG,CAACnB,MAAM,GAAGD,KAAK,CAAC,GAAG,CAAC,EAAE;UACzCF,KAAK,GAAG,KAAK;UACbH,GAAG,CAACxH,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC;UACzB8C,KAAK,GAAG/D,IAAI,CAAC8G,cAAc,CAAC0B,GAAG,CAAC;UAChCzI,MAAM,GAAG,KAAK;UACdoJ,KAAK,GAAGnJ,IAAI,CAAC8G,cAAc,CAAC0B,GAAG,CAACE,UAAU,CAACA,UAAU,CAAC;UACtD;UACAQ,OAAO,GAAG/J,cAAc,CAACQ,MAAM,CAAC,IAAI,EAAE;YACpCC,SAAS,EAAE,aAAa;YACxB2C,IAAI,EAAEiG,GAAG,CAAC0B,SAAS;YACnB5D,KAAK,EAAE;cACL6D,QAAQ,EAAE,UAAU;cACpB,SAAS,EAAE,KAAK;cAChB5D,IAAI,EAAEiC,GAAG,CAAC4B,UAAU;cACpBC,OAAO,EAAE,GAAG;cACZC,KAAK,EAAEnL,cAAc,CAACoL,UAAU,CAAC/B,GAAG,CAAC;cACrCpD,MAAM,EAAEjG,cAAc,CAAC2G,QAAQ,CAAC0C,GAAG,EAAE,QAAQ;YAC/C,CAAC;YACDnH,MAAM,EAAEuH;UACV,CAAC,CAAC;UACF5I,IAAI,CAACN,OAAO,CAACsB,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC;UAClCjB,IAAI,CAACyB,aAAa,CAAC;YAAEL,IAAI,EAAE,eAAe;YAAE2C,KAAK,EAAEA,KAAK;YAAEoF,KAAK,EAAEA;UAAM,CAAC,CAAC;QAC3E;QACA;QACA,IAAI,CAACR,KAAK,EAAE;UACVpH,CAAC,CAACI,cAAc,CAAC,CAAC;UAClBJ,CAAC,CAACuB,eAAe,CAAC,CAAC;;UAEnB;UACA3D,cAAc,CAACgG,QAAQ,CAAC+D,OAAO,EAAE;YAAExD,GAAG,EAAEmD,KAAK,GAAG1J,cAAc,CAACqL,UAAU,CAAC5B,KAAK,CAAC,CAAClD,GAAG,GAAGkD,KAAK,CAACxB,SAAS,GAAG;UAAE,CAAC,CAAC;UAE7G,IAAIzB,EAAE;UACN,IAAI,CAACpE,CAAC,CAACwH,OAAO,EAAE;YACdpD,EAAE,GAAGpE,CAAC,CAACxB,MAAM;;YAEb;YACA,IAAGwB,CAAC,CAACxB,MAAM,CAAC0K,UAAU,EAAC;cACrB9E,EAAE,GAAGpE,CAAC,CAACmJ,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1B;UACF,CAAC,MAAM;YACL/E,EAAE,GAAGoE,QAAQ,CAACY,gBAAgB,CAACpJ,CAAC,CAACwH,OAAO,CAAC,CAAC,CAAC,CAAC6B,OAAO,EAAErJ,CAAC,CAACwH,OAAO,CAAC,CAAC,CAAC,CAAC8B,OAAO,CAAC;;YAE1E;YACA,OAAMlF,EAAE,CAAC8E,UAAU,EAAC;cAClB9E,EAAE,GAAGA,EAAE,CAAC8E,UAAU,CAACE,gBAAgB,CAACpJ,CAAC,CAACwH,OAAO,CAAC,CAAC,CAAC,CAAC6B,OAAO,EAAErJ,CAAC,CAACwH,OAAO,CAAC,CAAC,CAAC,CAAC8B,OAAO,CAAC;YACjF;UACF;UACA,IAAIlF,EAAE,CAAC3E,SAAS,CAACU,QAAQ,CAAC,sBAAsB,CAAC,EAAE;YACjD1B,IAAI,CAAC4B,QAAQ,CAAC,CAAC,CAAC,CAAC;UACnB,CAAC,MAAM,IAAI+D,EAAE,CAAC3E,SAAS,CAACU,QAAQ,CAAC,mBAAmB,CAAC,EAAE;YACrD1B,IAAI,CAAC4B,QAAQ,CAAC,CAAC,CAAC;UAClB;UACA;UACA,OAAO+D,EAAE,IAAIA,EAAE,CAACmF,OAAO,KAAK,IAAI,EAAE;YAChCnF,EAAE,GAAGA,EAAE,CAAC+C,UAAU;UACpB;UACA,IAAI,CAAC/C,EAAE,IAAI,CAACA,EAAE,CAAC3E,SAAS,CAACU,QAAQ,CAAC,UAAU,CAAC,EAAE;YAC7C8G,GAAG,CAACE,UAAU,CAAC9C,gBAAgB,CAAC,IAAI,CAAC,CAACgB,OAAO,CAAC,UAAUjB,EAAE,EAAE;cAC1DA,EAAE,CAAC3E,SAAS,CAACc,MAAM,CAAC,UAAU,CAAC;cAC/B6D,EAAE,CAAC3E,SAAS,CAACc,MAAM,CAAC,gBAAgB,CAAC;cACrC6D,EAAE,CAAC3E,SAAS,CAACc,MAAM,CAAC,iBAAiB,CAAC;YACxC,CAAC,CAAC;UACJ;UACA,IAAI6D,EAAE,IAAIA,EAAE,CAAC+C,UAAU,CAAC1H,SAAS,CAACU,QAAQ,CAAC,MAAM,CAAC,IAAIiE,EAAE,KAAK6C,GAAG,EAAE;YAChEzI,MAAM,GAAGC,IAAI,CAAC8G,cAAc,CAACnB,EAAE,CAAC;YAChC;YACA,IAAI5F,MAAM,IAAI,CAACA,MAAM,CAACiE,GAAG,CAAC,cAAc,CAAC,IAAI,CAACD,KAAK,CAACC,GAAG,CAAC,cAAc,CAAC,EAAE;cACvE2B,EAAE,CAAC3E,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;cAC5B0E,EAAE,CAAC3E,SAAS,CAACC,GAAG,CAAEuH,GAAG,CAAC/C,SAAS,GAAGE,EAAE,CAACF,SAAS,GAAI,gBAAgB,GAAG,iBAAiB,CAAC;YACzF,CAAC,MAAM;cACL1F,MAAM,GAAG,KAAK;YAChB;YACAZ,cAAc,CAACyF,IAAI,CAACsE,OAAO,CAAC;UAC9B,CAAC,MAAM;YACLnJ,MAAM,GAAG,KAAK;YACd,IAAI4F,EAAE,KAAK6C,GAAG,EACZrJ,cAAc,CAAC0F,IAAI,CAACqE,OAAO,CAAC,MAE5B/J,cAAc,CAACyF,IAAI,CAACsE,OAAO,CAAC;UAChC;UAEA,IAAI,CAACnJ,MAAM,EACTmJ,OAAO,CAAClI,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC,MAElCiI,OAAO,CAAClI,SAAS,CAACc,MAAM,CAAC,WAAW,CAAC;QACzC;MACF;;MAEA;MACA3C,cAAc,CAACqD,WAAW,CAACuH,QAAQ,EAAE,qBAAqB,EAAEC,IAAI,CAAC;MACjE7K,cAAc,CAACqD,WAAW,CAACuH,QAAQ,EAAE,8BAA8B,EAAEX,IAAI,CAAC;IAC5E;IACA;AACF;AACA;AACA;EAHE;IAAAvF,GAAA;IAAAC,KAAA,EAIA,SAAAiH,YAAYA,CAACxJ,CAAC,EAAE;MACdA,CAAC,CAACuB,eAAe,CAAC,CAAC;MACnBvB,CAAC,CAACI,cAAc,CAAC,CAAC;MAClB,IAAI3B,IAAI,GAAG,IAAI;MACf;MACA,IAAIwI,GAAG,GAAGjH,CAAC,CAACxB,MAAM;MAClB,IAAIgE,KAAK,GAAG,IAAI,CAAC+C,cAAc,CAAC0B,GAAG,CAACE,UAAU,CAACA,UAAU,CAACA,UAAU,CAAC;MACrE,IAAI,CAAC3E,KAAK,EACR;MACF,IAAIiH,CAAC,GAAGzJ,CAAC,CAAC0J,KAAK,IACT1J,CAAC,CAACwH,OAAO,IAAIxH,CAAC,CAACwH,OAAO,CAACC,MAAM,IAAIzH,CAAC,CAACwH,OAAO,CAAC,CAAC,CAAC,CAACkC,KAAM,IACpD1J,CAAC,CAAC0H,cAAc,IAAI1H,CAAC,CAAC0H,cAAc,CAACD,MAAM,IAAIzH,CAAC,CAAC0H,cAAc,CAAC,CAAC,CAAC,CAACgC,KAAM;MAC/E,IAAItC,KAAK,GAAGxJ,cAAc,CAAC2G,QAAQ,CAAC0C,GAAG,EAAE,MAAM,CAAC,GAAGwC,CAAC;MACpDhL,IAAI,CAACmH,SAAS,GAAG,IAAI;;MAErB;MACA,SAASiC,IAAIA,CAAA,EAAG;QACdjK,cAAc,CAAC2K,cAAc,CAACC,QAAQ,EAAE,8BAA8B,EAAEX,IAAI,CAAC;QAC7EjK,cAAc,CAAC2K,cAAc,CAACC,QAAQ,EAAE,qBAAqB,EAAEC,IAAI,CAAC;QACpEhK,IAAI,CAACmH,SAAS,GAAG,KAAK;MACxB;MACA;MACA,SAAS6C,IAAIA,CAACzI,CAAC,EAAE;QACf,IAAIyJ,CAAC,GAAGzJ,CAAC,CAAC0J,KAAK,IACT1J,CAAC,CAACwH,OAAO,IAAIxH,CAAC,CAACwH,OAAO,CAACC,MAAM,IAAIzH,CAAC,CAACwH,OAAO,CAAC,CAAC,CAAC,CAACkC,KAAM,IACpD1J,CAAC,CAAC0H,cAAc,IAAI1H,CAAC,CAAC0H,cAAc,CAACD,MAAM,IAAIzH,CAAC,CAAC0H,cAAc,CAAC,CAAC,CAAC,CAACgC,KAAM;QAC/E,IAAIC,KAAK,GAAG,CAACvC,KAAK,GAAGqC,CAAC,IAAI7L,cAAc,CAAC2G,QAAQ,CAAC0C,GAAG,CAACE,UAAU,EAAE,OAAO,CAAC;QAC1E,IAAI2B,OAAO,GAAG5H,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEuI,KAAK,CAAC,CAAC;QAC7C/L,cAAc,CAACgG,QAAQ,CAACqD,GAAG,EAAE;UAAEjC,IAAI,EAAG8D,OAAO,GAAG,GAAG,GAAI;QAAI,CAAC,CAAC;QAC7D7B,GAAG,CAACE,UAAU,CAACyC,kBAAkB,CAACjB,SAAS,GAAGzH,IAAI,CAACsD,KAAK,CAACsE,OAAO,GAAG,GAAG,CAAC;QACvEtG,KAAK,CAACqH,UAAU,CAACf,OAAO,CAAC;MAC3B;MACA;MACAlL,cAAc,CAACqD,WAAW,CAACuH,QAAQ,EAAE,8BAA8B,EAAEX,IAAI,CAAC;MAC1EjK,cAAc,CAACqD,WAAW,CAACuH,QAAQ,EAAE,qBAAqB,EAAEC,IAAI,CAAC;IACnE;IACA;AACF;AACA;AACA;AACA;AACA;EALE;IAAAnG,GAAA;IAAAC,KAAA,EAMA,SAAAuD,QAAQA,CAACgE,EAAE,EAAE7B,UAAU,EAAE;MACvB,IAAIxJ,IAAI,GAAG,IAAI;MACf,IAAIuH,MAAM,GAAGiC,UAAU,CAACC,QAAQ,CAAC,CAAC;;MAElC;MACA,IAAI6B,aAAa,GAAG,SAAhBA,aAAaA,CAAa/J,CAAC,EAAE;QAC/BA,CAAC,CAACuB,eAAe,CAAC,CAAC;QACnBvB,CAAC,CAACI,cAAc,CAAC,CAAC;QAClB,IAAIkF,CAAC,GAAG7G,IAAI,CAAC8G,cAAc,CAAC,IAAI,CAAC4B,UAAU,CAACA,UAAU,CAAC;QACvD1I,IAAI,CAACsH,qBAAqB,CAACT,CAAC,EAAE2C,UAAU,CAAC;QACzC,IAAIxJ,IAAI,CAACgE,GAAG,CAAC,WAAW,CAAC,IAAI6C,CAAC,CAACH,UAAU,CAAC,CAAC,EAAE;UAC3C1G,IAAI,CAAC6J,WAAW,CAAChD,CAAC,CAAC;QACrB;QACA,IAAI7G,IAAI,CAACc,aAAa,EAAE;UACtBd,IAAI,CAACc,aAAa,CAAC+F,CAAC,CAAC;QACvB;MACF,CAAC;MACD;MACA,SAAS0E,MAAMA,CAAChK,CAAC,EAAE;QACjBA,CAAC,CAACuB,eAAe,CAAC,CAAC;QACnBvB,CAAC,CAACI,cAAc,CAAC,CAAC;QAClB,IAAIkF,CAAC,GAAG7G,IAAI,CAAC8G,cAAc,CAAC,IAAI,CAAC4B,UAAU,CAACA,UAAU,CAAC;QACvD1I,IAAI,CAACG,MAAM,CAAC0G,CAAC,CAAC;QACd7G,IAAI,CAACyB,aAAa,CAAC;UAAEL,IAAI,EAAE,MAAM;UAAE2C,KAAK,EAAE8C;QAAE,CAAC,CAAC;MAChD;MACA;MACA,SAAS2E,UAAUA,CAACjK,CAAC,EAAE;QACrBA,CAAC,CAACuB,eAAe,CAAC,CAAC;QACnBvB,CAAC,CAACI,cAAc,CAAC,CAAC;QAClB,IAAIkF,CAAC,GAAG7G,IAAI,CAAC8G,cAAc,CAAC,IAAI,CAAC4B,UAAU,CAACA,UAAU,CAAC;QACvD,IAAI1I,IAAI,CAACI,QAAQ,EAAE;UACjBJ,IAAI,CAACI,QAAQ,CAACyG,CAAC,CAAC;QAClB,CAAC,MAAM;UACL7G,IAAI,CAACiH,MAAM,CAAC,CAAC,CAACS,OAAO,CAAC,CAAC,CAAC+D,GAAG,CAAC5E,CAAC,CAACsB,SAAS,CAAC,CAAC,EAAEnI,IAAI,CAACiH,MAAM,CAAC,CAAC,CAACqB,OAAO,CAAC,CAAC,CAAC;QACrE;QACAtI,IAAI,CAACyB,aAAa,CAAC;UAAEL,IAAI,EAAE,QAAQ;UAAE2C,KAAK,EAAE8C;QAAE,CAAC,CAAC;MAClD;MACA;MACA,SAAS6E,WAAWA,CAACnK,CAAC,EAAE;QACtBA,CAAC,CAACuB,eAAe,CAAC,CAAC;QACnBvB,CAAC,CAACI,cAAc,CAAC,CAAC;QAClB,IAAIgE,EAAE,GAAG,IAAI,CAAC+C,UAAU,CAACA,UAAU,CAACA,UAAU,CAACA,UAAU;QACzD,IAAI3E,KAAK;UAAEoF,KAAK,GAAGnJ,IAAI,CAAC8G,cAAc,CAACnB,EAAE,CAAC;QAC1C;QACA,IAAIwD,KAAK,EAAE;UACTpF,KAAK,GAAG/D,IAAI,CAAC8G,cAAc,CAAC,IAAI,CAAC4B,UAAU,CAACA,UAAU,CAAC;UACvDS,KAAK,CAACtI,SAAS,CAAC,CAAC,CAACiB,MAAM,CAACiC,KAAK,CAAC;UAC/B,IAAIoF,KAAK,CAACtI,SAAS,CAAC,CAAC,CAAC8K,SAAS,CAAC,CAAC,IAAI,CAAC,IAAI,CAACxC,KAAK,CAACnF,GAAG,CAAC,kBAAkB,CAAC,EAAE;YACxE0H,WAAW,CAACE,IAAI,CAACjG,EAAE,CAACC,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,EAAErE,CAAC,CAAC;UAC5D;QACF,CAAC,MAAM;UACLoE,EAAE,GAAG,IAAI,CAAC+C,UAAU,CAACA,UAAU;UAC/B1I,IAAI,CAACiH,MAAM,CAAC,CAAC,CAACyE,WAAW,CAAC1L,IAAI,CAAC8G,cAAc,CAACnB,EAAE,CAAC,CAAC;QACpD;MACF;;MAEA;MACA,SAASkG,QAAQA,CAAC9H,KAAK,EAAE;QACvB,IAAI,CAAC,IAAI,CAAChD,sBAAsB,CAACgD,KAAK,CAAC,EAAE;UACvC,IAAI,CAACiC,cAAc,CAAC,IAAI,EAAEjC,KAAK,CAAC;UAChC;QACF;QAEA,IAAI4B,EAAE,GAAGxG,cAAc,CAACQ,MAAM,CAAC,IAAI,EAAE;UACnCC,SAAS,EAAE,CAACmE,KAAK,CAAC2C,UAAU,CAAC,CAAC,GAAG,aAAa,GAAG,GAAG,KAAK3C,KAAK,CAACC,GAAG,CAAC,WAAW,CAAC,GAAG,WAAW,GAAG,EAAE,CAAC;UACnG3C,MAAM,EAAEgK;QACV,CAAC,CAAC;QACF,IAAI,CAACrF,cAAc,CAACL,EAAE,EAAE5B,KAAK,CAAC;QAC9B,IAAI,IAAI,CAAC+H,cAAc,KAAK/H,KAAK,EAAE;UACjC4B,EAAE,CAAC3E,SAAS,CAACC,GAAG,CAAC,iBAAiB,CAAC;QACrC;QAEA,IAAI8K,aAAa,GAAG5M,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;UAC/CC,SAAS,EAAE,0BAA0B;UACrCyB,MAAM,EAAEsE;QACV,CAAC,CAAC;;QAEF;QACA,IAAIqG,CAAC,GAAG7M,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;UACnCC,SAAS,EAAE,YAAY;UACvByB,MAAM,EAAEsE;QACV,CAAC,CAAC;;QAEF;QACAxG,cAAc,CAACQ,MAAM,CAAC,OAAO,EAAE;UAC7ByB,IAAI,EAAE2C,KAAK,CAACC,GAAG,CAAC,WAAW,CAAC,GAAG,OAAO,GAAG,UAAU;UACnDpE,SAAS,EAAE,eAAe;UAC1B6G,OAAO,EAAE1C,KAAK,CAAC2C,UAAU,CAAC,CAAC;UAC3BxE,KAAK,EAAEoJ,aAAa;UACpBjK,MAAM,EAAE2K;QACV,CAAC,CAAC;QACF;QACA,IAAIC,KAAK,GAAG9M,cAAc,CAACQ,MAAM,CAAC,OAAO,EAAE;UACzCuM,KAAK,EAAEnI,KAAK,CAACC,GAAG,CAAC,OAAO,CAAC,IAAID,KAAK,CAACC,GAAG,CAAC,MAAM,CAAC;UAC9C9B,KAAK,EAAEoJ,aAAa;UACpBhF,KAAK,EAAE;YACL6F,UAAU,EAAE;UACd,CAAC;UACD9K,MAAM,EAAE2K;QACV,CAAC,CAAC;QACFC,KAAK,CAAC3K,gBAAgB,CAAC,aAAa,EAAE,YAAY;UAAE,OAAO,KAAK;QAAC,CAAC,CAAC;QACnEnC,cAAc,CAACQ,MAAM,CAAC,MAAM,EAAE;UAC5B4C,IAAI,EAAEwB,KAAK,CAACC,GAAG,CAAC,OAAO,CAAC,IAAID,KAAK,CAACC,GAAG,CAAC,MAAM,CAAC;UAC7C9B,KAAK,EAAE,UAAUX,CAAC,EAAE;YAClB,IAAI,IAAI,CAACyC,GAAG,CAAC,WAAW,CAAC,EAAE;cACzBzC,CAAC,CAACuB,eAAe,CAAC,CAAC;cACnB,IAAI,CAAC+G,WAAW,CAAC9F,KAAK,CAAC;YACzB;UACF,CAAC,CAACL,IAAI,CAAC,IAAI,CAAC;UACZrC,MAAM,EAAE4K;QACV,CAAC,CAAC;;QAEF;QACA,IAAI,IAAI,CAACxL,UAAU,EAAE;UACnB,IAAK6D,CAAC,GAAGiD,MAAM,CAACyB,MAAM,GAAG,CAAC,KAAKjF,KAAK,CAACC,GAAG,CAAC,cAAc,CAAC,IAAI,CAACuD,MAAM,CAACjD,CAAC,GAAG,CAAC,CAAC,CAACN,GAAG,CAAC,cAAc,CAAC,CAAC,IACzFM,CAAC,GAAG,CAAC,KAAK,CAACP,KAAK,CAACC,GAAG,CAAC,cAAc,CAAC,IAAIuD,MAAM,CAACjD,CAAC,GAAG,CAAC,CAAC,CAACN,GAAG,CAAC,cAAc,CAAC,CAAE,EAAE;YACjF7E,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;cAC3BC,SAAS,EAAE,qBAAqB;cAChCsM,KAAK,EAAE,IAAI,CAACE,GAAG,CAACC,EAAE;cAClB7I,EAAE,EAAE;gBAAE,sBAAsB,EAAE,SAAxB8I,oBAAsBA,CAAY/K,CAAC,EAAE;kBAAEvB,IAAI,CAACuI,aAAa,CAAChH,CAAC,CAAC;gBAAC;cAAE,CAAC;cACtEF,MAAM,EAAE0K;YACV,CAAC,CAAC;UACJ;QACF;;QAEA;QACA,IAAIhI,KAAK,CAAClD,SAAS,EAAE;UACnB,IAAI0L,EAAE,GAAG,CAAC;UACVxI,KAAK,CAAClD,SAAS,CAAC,CAAC,CAAC+F,OAAO,CAAC,UAAUC,CAAC,EAAE;YACrC,IAAI7G,IAAI,CAACe,sBAAsB,CAAC8F,CAAC,CAAC,EAChC0F,EAAE,EAAE;UACR,CAAC,CAAC;UACF,IAAIA,EAAE,EAAE;YACNpN,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;cAC3BC,SAAS,EAAEmE,KAAK,CAACC,GAAG,CAAC,qBAAqB,CAAC,GAAG,iBAAiB,GAAG,eAAe;cACjFkI,KAAK,EAAE,IAAI,CAACE,GAAG,CAACI,IAAI;cACpBtK,KAAK,EAAE,SAAPA,KAAKA,CAAA,EAAc;gBACjB,IAAI2E,CAAC,GAAG7G,IAAI,CAAC8G,cAAc,CAAC,IAAI,CAAC4B,UAAU,CAACA,UAAU,CAAC;gBACvD7B,CAAC,CAAC7D,GAAG,CAAC,qBAAqB,EAAE,CAAC6D,CAAC,CAAC7C,GAAG,CAAC,qBAAqB,CAAC,CAAC;cAC7D,CAAC;cACD3C,MAAM,EAAE0K;YACV,CAAC,CAAC;UACJ;QACF;;QAEA;QACA,IAAI,IAAI,CAAC5L,MAAM,EAAE;UACfhB,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;YAC3BC,SAAS,EAAE,WAAW;YACtBsM,KAAK,EAAE,IAAI,CAACE,GAAG,CAACK,IAAI;YACpBvK,KAAK,EAAEqJ,MAAM;YACblK,MAAM,EAAE0K;UACV,CAAC,CAAC;QACJ;QACA;QACA,IAAI,IAAI,CAACxL,QAAQ,IAAI,CAACwD,KAAK,CAACC,GAAG,CAAC,kBAAkB,CAAC,EAAE;UACnD7E,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;YAC3BC,SAAS,EAAE,YAAY;YACvBsM,KAAK,EAAE,IAAI,CAACE,GAAG,CAAC5L,KAAK;YACrB0B,KAAK,EAAEwJ,WAAW;YAClBrK,MAAM,EAAE0K;UACV,CAAC,CAAC;QACJ;QACA;QACA,IAAI,IAAI,CAAC1L,SAAS,IAAIkH,MAAM,CAACjD,CAAC,CAAC,CAAC6D,SAAS,CAAC,CAAC,EAAE;UAC3C,IAAIC,EAAE,GAAGb,MAAM,CAACjD,CAAC,CAAC,CAAC6D,SAAS,CAAC,CAAC;UAC9B,IAAIC,EAAE,CAACY,MAAM,IAAI,CAAC,IAAIZ,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,IAAIA,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,EAAE;YACpDjJ,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;cAC3BC,SAAS,EAAE,aAAa;cACxBsM,KAAK,EAAE,IAAI,CAACE,GAAG,CAAC9L,MAAM;cACtB4B,KAAK,EAAEsJ,UAAU;cACjBnK,MAAM,EAAE0K;YACV,CAAC,CAAC;UACJ;QACF;;QAEA;QACA,IAAI,IAAI,CAAC7L,aAAa,IAAI6D,KAAK,YAAYnF,aAAa,EAAE;UACxD,IAAI8N,CAAC,GAAGvN,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;YACnCC,SAAS,EAAE,wBAAwB;YACnCyB,MAAM,EAAE2K;UACV,CAAC,CAAC;UACF,IAAI,CAACW,YAAY,CAAC5I,KAAK,CAAC;UACxBA,KAAK,CAAC6I,sBAAsB,GAAGzN,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;YAAE0B,MAAM,EAAEqL;UAAE,CAAC,CAAC;QAC5E;;QAEA;QACA,IAAIrC,OAAO,GAAGlL,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;UACzCC,SAAS,EAAE,uBAAuB;UAClC;UACAsC,KAAK,EAAE,SAAPA,KAAKA,CAAYX,CAAC,EAAE;YAClB,IAAIA,CAAC,CAACxB,MAAM,KAAK,IAAI,EACnB;YACFwB,CAAC,CAACuB,eAAe,CAAC,CAAC;YACnBvB,CAAC,CAACI,cAAc,CAAC,CAAC;YAClB,IAAIkL,EAAE,GAAGpK,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEpB,CAAC,CAACuL,OAAO,GAAG3N,cAAc,CAAC2G,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;YACrF9F,IAAI,CAAC8G,cAAc,CAAC,IAAI,CAAC4B,UAAU,CAACA,UAAU,CAAC,CAAC0C,UAAU,CAACyB,EAAE,CAAC;YAC9D,IAAI,CAACnE,UAAU,CAAC9C,gBAAgB,CAAC,8BAA8B,CAAC,CAAC,CAAC,CAAC,CAACsE,SAAS,GAAGzH,IAAI,CAACsD,KAAK,CAAC8G,EAAE,GAAG,GAAG,CAAC;UACtG,CAAC;UACDxL,MAAM,EAAE2K;QACV,CAAC,CAAC;QACF;QACA7M,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;UAC3BC,SAAS,EAAE,0CAA0C;UACrD0G,KAAK,EAAE;YAAEC,IAAI,EAAGxC,KAAK,CAACyC,UAAU,CAAC,CAAC,GAAG,GAAG,GAAI;UAAI,CAAC;UACjDhD,EAAE,EAAE;YACF,sBAAsB,EAAE,SAAxB8I,oBAAsBA,CAAY/K,CAAC,EAAE;cAAEvB,IAAI,CAAC+K,YAAY,CAACxJ,CAAC,CAAC;YAAC;UAC9D,CAAC;UACDF,MAAM,EAAEgJ;QACV,CAAC,CAAC;QACF;QACAlL,cAAc,CAACQ,MAAM,CAAC,KAAK,EAAE;UAC3BC,SAAS,EAAE,6BAA6B;UACxC2C,IAAI,EAAEE,IAAI,CAACsD,KAAK,CAAChC,KAAK,CAACyC,UAAU,CAAC,CAAC,GAAG,GAAG,CAAC;UAC1CnF,MAAM,EAAE2K;QACV,CAAC,CAAC;;QAEF;QACA,IAAIjI,KAAK,CAAClD,SAAS,EAAE;UACnB8E,EAAE,CAAC3E,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;UAClC,IAAI8C,KAAK,CAACC,GAAG,CAAC,qBAAqB,CAAC,KAAK,IAAI,EAAE;YAC7C,IAAI+I,GAAG,GAAG5N,cAAc,CAACQ,MAAM,CAAC,IAAI,EAAE;cACpC0B,MAAM,EAAEsE;YACV,CAAC,CAAC;YACF,IAAI,CAAC0B,QAAQ,CAAC0F,GAAG,EAAEhJ,KAAK,CAAClD,SAAS,CAAC,CAAC,CAAC;UACvC;QACF;QACA8E,EAAE,CAAC3E,SAAS,CAACC,GAAG,CAAC,IAAI,CAAC+L,aAAa,CAACjJ,KAAK,CAAC,CAAC;;QAE3C;QACA,IAAI,CAACtC,aAAa,CAAC;UAAEL,IAAI,EAAE,UAAU;UAAE2C,KAAK,EAAEA,KAAK;UAAE4B,EAAE,EAAEA;QAAG,CAAC,CAAC;MAChE;;MAEA;MACA,KAAK,IAAIrB,CAAC,GAAGiD,MAAM,CAACyB,MAAM,GAAG,CAAC,EAAE1E,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC3CuH,QAAQ,CAACD,IAAI,CAAC,IAAI,EAAErE,MAAM,CAACjD,CAAC,CAAC,CAAC;MAChC;MAEA,IAAI,CAACE,UAAU,CAAC,CAAC;MAEjB,IAAI6G,EAAE,KAAK,IAAI,CAAChJ,MAAM,EACpB,IAAI,CAACT,QAAQ,CAAC,CAAC;IACnB;IACA;AACF;AACA;AACA;AACA;EAJE;IAAAiC,GAAA;IAAAC,KAAA,EAKA,SAAAkJ,aAAaA,CAACjJ,KAAK,EAAE;MACnB,IAAI,CAACA,KAAK,EACR,OAAO,MAAM;MACf,IAAIA,KAAK,CAAClD,SAAS,EACjB,OAAO,gBAAgB;MACzB,IAAIkD,KAAK,YAAYlF,eAAe,EAClC,OAAO,iBAAiB;MAC1B,IAAIkF,KAAK,YAAYjF,mBAAmB,EACtC,OAAO,qBAAqB;MAC9B,IAAIiF,KAAK,YAAYnF,aAAa,EAChC,OAAO,eAAe;MACxB,IAAImF,KAAK,YAAYhF,cAAc,EACjC,OAAO,gBAAgB;MACzB,IAAIgF,KAAK,YAAY/E,gBAAgB,EACnC,OAAO,kBAAkB;MAC3B;MACA;MACA,IAAI+E,KAAK,CAACkJ,WAAW,EACnB,OAAO,sBAAsB;MAC/B;MACA,OAAO,SAAS;IAClB;IACA;AACF;AACA;AACA;EAHE;IAAApJ,GAAA;IAAAC,KAAA,EAIA,SAAA+F,WAAWA,CAAC9F,KAAK,EAAEmJ,MAAM,EAAE;MACzB,IAAI,CAACnJ,KAAK,EAAE;QACV,IAAI,CAAC,IAAI,CAACkD,MAAM,CAAC,CAAC,EAChB;QACFlD,KAAK,GAAG,IAAI,CAACkD,MAAM,CAAC,CAAC,CAACpG,SAAS,CAAC,CAAC,CAACsM,IAAI,CAAC,IAAI,CAAClG,MAAM,CAAC,CAAC,CAACpG,SAAS,CAAC,CAAC,CAAC8K,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;MACnF;MACA,IAAI,CAACG,cAAc,GAAG/H,KAAK;MAC3B,IAAI,CAACK,SAAS,CAAC,CAAC;MAChB,IAAI,CAAC8I,MAAM,EACT,IAAI,CAACzL,aAAa,CAAC;QAAEL,IAAI,EAAE,QAAQ;QAAE2C,KAAK,EAAEA;MAAM,CAAC,CAAC;IACxD;IACA;AACF;AACA;EAFE;IAAAF,GAAA;IAAAC,KAAA,EAGA,SAAAyF,YAAYA,CAAA,EAAG;MACb,OAAO,IAAI,CAACuC,cAAc;IAC5B;IACA;AACF;AACA;EAFE;IAAAjI,GAAA;IAAAC,KAAA,EAGA,SAAA6I,YAAYA,CAAC5I,KAAK,EAAE;MAClB,IAAI,CAACA,KAAK,CAAC6I,sBAAsB,EAAE;QACjC,IAAIQ,MAAM,GAAG,CAAC;QACd,IAAIC,OAAO,GAAG,CAAC;QACf,IAAIC,IAAI,GAAG,SAAPA,IAAIA,CAAA,EAAe;UACrB,IAAID,OAAO,KAAKD,MAAM,EAAE;YACtBC,OAAO,GAAGD,MAAM,GAAG,CAAC;YACpBjO,cAAc,CAACgG,QAAQ,CAACpB,KAAK,CAAC6I,sBAAsB,EAAE;cAAEtC,KAAK,EAAE;YAAE,CAAC,CAAC,EAAC;UACtE,CAAC,MAAM;YACLnL,cAAc,CAACgG,QAAQ,CAACpB,KAAK,CAAC6I,sBAAsB,EAAE;cAAEtC,KAAK,EAAE,CAAC8C,MAAM,GAAGC,OAAO,GAAG,GAAG,EAAEE,OAAO,CAAC,CAAC,CAAC,GAAG;YAAI,CAAC,CAAC,EAAC;UAC9G;QACF,CAAC;QACDxJ,KAAK,CAACyJ,SAAS,CAAC,CAAC,CAAChK,EAAE,CAAC,eAAe,EAAE,YAAY;UAChD6J,OAAO,EAAE;UACTC,IAAI,CAAC,CAAC;QACR,CAAC,CAAC;QACFvJ,KAAK,CAACyJ,SAAS,CAAC,CAAC,CAAChK,EAAE,CAAC,aAAa,EAAE,YAAY;UAC9C4J,MAAM,EAAE;UACRE,IAAI,CAAC,CAAC;QACR,CAAC,CAAC;QACFvJ,KAAK,CAACyJ,SAAS,CAAC,CAAC,CAAChK,EAAE,CAAC,eAAe,EAAE,YAAY;UAChD4J,MAAM,EAAE;UACRE,IAAI,CAAC,CAAC;QACR,CAAC,CAAC;MACJ;IACF;EAAC;AAAA,EA18BiE3O,kBAAkB,CA28BrF;;AAED;AACA;AACAS,wBAAwB,CAACqO,SAAS,CAACrB,GAAG,GAAG;EACvCC,EAAE,EAAE,SAAS;EACbqB,IAAI,EAAE,MAAM;EACZjB,IAAI,EAAE,iBAAiB;EACvBnM,MAAM,EAAE,gBAAgB;EACxBE,KAAK,EAAE,cAAc;EACrBgM,IAAI,EAAE;AACR,CAAC;AAED,eAAepN,wBAAwB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}