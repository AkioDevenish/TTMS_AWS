{"ast":null,"code":"import _classCallCheck from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _toConsumableArray from \"/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\n/**\n * @module ol/format/IIIFInfo\n */\n\nimport { assert } from '../asserts.js';\n\n/**\n * @typedef {Object} PreferredOptions\n * @property {string} [format] Preferred image format. Will be used if the image information\n * indicates support for that format.\n * @property {string} [quality] IIIF image qualitiy.  Will be used if the image information\n * indicates support for that quality.\n */\n\n/**\n * @typedef {Object} SupportedFeatures\n * @property {Array<string>} [supports] Supported IIIF image size and region\n * calculation features.\n * @property {Array<string>} [formats] Supported image formats.\n * @property {Array<string>} [qualities] Supported IIIF image qualities.\n */\n\n/**\n * @typedef {Object} TileInfo\n * @property {Array<number>} scaleFactors Supported resolution scaling factors.\n * @property {number} width Tile width in pixels.\n * @property {number} [height] Tile height in pixels. Same as tile width if height is\n * not given.\n */\n\n/**\n * @typedef {Object} IiifProfile\n * @property {Array<string>} [formats] Supported image formats for the image service.\n * @property {Array<string>} [qualities] Supported IIIF image qualities.\n * @property {Array<string>} [supports] Supported features.\n * @property {number} [maxArea] Maximum area (pixels) available for this image service.\n * @property {number} [maxHeight] Maximum height.\n * @property {number} [maxWidth] Maximum width.\n */\n\n/**\n * @typedef {Object<string,string|number|Array<number|string|IiifProfile|Object<string, number>|TileInfo>>}\n *    ImageInformationResponse\n */\n\n/**\n * Enum representing the major IIIF Image API versions\n * @enum {string}\n */\nexport var Versions = {\n  VERSION1: 'version1',\n  VERSION2: 'version2',\n  VERSION3: 'version3'\n};\n\n/**\n * Supported image formats, qualities and supported region / size calculation features\n * for different image API versions and compliance levels\n * @const\n * @type {Object<string, Object<string, SupportedFeatures>>}\n */\nvar IIIF_PROFILE_VALUES = {};\nIIIF_PROFILE_VALUES[Versions.VERSION1] = {\n  'level0': {\n    supports: [],\n    formats: [],\n    qualities: ['native']\n  },\n  'level1': {\n    supports: ['regionByPx', 'sizeByW', 'sizeByH', 'sizeByPct'],\n    formats: ['jpg'],\n    qualities: ['native']\n  },\n  'level2': {\n    supports: ['regionByPx', 'regionByPct', 'sizeByW', 'sizeByH', 'sizeByPct', 'sizeByConfinedWh', 'sizeByWh'],\n    formats: ['jpg', 'png'],\n    qualities: ['native', 'color', 'grey', 'bitonal']\n  }\n};\nIIIF_PROFILE_VALUES[Versions.VERSION2] = {\n  'level0': {\n    supports: [],\n    formats: ['jpg'],\n    qualities: ['default']\n  },\n  'level1': {\n    supports: ['regionByPx', 'sizeByW', 'sizeByH', 'sizeByPct'],\n    formats: ['jpg'],\n    qualities: ['default']\n  },\n  'level2': {\n    supports: ['regionByPx', 'regionByPct', 'sizeByW', 'sizeByH', 'sizeByPct', 'sizeByConfinedWh', 'sizeByDistortedWh', 'sizeByWh'],\n    formats: ['jpg', 'png'],\n    qualities: ['default', 'bitonal']\n  }\n};\nIIIF_PROFILE_VALUES[Versions.VERSION3] = {\n  'level0': {\n    supports: [],\n    formats: ['jpg'],\n    qualities: ['default']\n  },\n  'level1': {\n    supports: ['regionByPx', 'regionSquare', 'sizeByW', 'sizeByH', 'sizeByWh'],\n    formats: ['jpg'],\n    qualities: ['default']\n  },\n  'level2': {\n    supports: ['regionByPx', 'regionSquare', 'regionByPct', 'sizeByW', 'sizeByH', 'sizeByPct', 'sizeByConfinedWh', 'sizeByWh'],\n    formats: ['jpg', 'png'],\n    qualities: ['default']\n  }\n};\nIIIF_PROFILE_VALUES['none'] = {\n  'none': {\n    supports: [],\n    formats: [],\n    qualities: []\n  }\n};\nvar COMPLIANCE_VERSION1 = /^https?:\\/\\/library\\.stanford\\.edu\\/iiif\\/image-api\\/(?:1\\.1\\/)?compliance\\.html#level[0-2]$/;\nvar COMPLIANCE_VERSION2 = /^https?:\\/\\/iiif\\.io\\/api\\/image\\/2\\/level[0-2](?:\\.json)?$/;\nvar COMPLIANCE_VERSION3 = /(^https?:\\/\\/iiif\\.io\\/api\\/image\\/3\\/level[0-2](?:\\.json)?$)|(^level[0-2]$)/;\nfunction generateVersion1Options(iiifInfo) {\n  var levelProfile = iiifInfo.getComplianceLevelSupportedFeatures();\n  // Version 1.0 and 1.1 do not require a profile.\n  if (levelProfile === undefined) {\n    levelProfile = IIIF_PROFILE_VALUES[Versions.VERSION1]['level0'];\n  }\n  return {\n    url: iiifInfo.imageInfo['@id'] === undefined ? undefined : iiifInfo.imageInfo['@id'].replace(/\\/?(?:info\\.json)?$/g, ''),\n    supports: levelProfile.supports,\n    formats: [].concat(_toConsumableArray(levelProfile.formats), [iiifInfo.imageInfo.formats === undefined ? [] : iiifInfo.imageInfo.formats]),\n    qualities: [].concat(_toConsumableArray(levelProfile.qualities), [iiifInfo.imageInfo.qualities === undefined ? [] : iiifInfo.imageInfo.qualities]),\n    resolutions: iiifInfo.imageInfo.scale_factors,\n    tileSize: iiifInfo.imageInfo.tile_width !== undefined ? iiifInfo.imageInfo.tile_height !== undefined ? [iiifInfo.imageInfo.tile_width, iiifInfo.imageInfo.tile_height] : [iiifInfo.imageInfo.tile_width, iiifInfo.imageInfo.tile_width] : iiifInfo.imageInfo.tile_height != undefined ? [iiifInfo.imageInfo.tile_height, iiifInfo.imageInfo.tile_height] : undefined\n  };\n}\nfunction generateVersion2Options(iiifInfo) {\n  var levelProfile = iiifInfo.getComplianceLevelSupportedFeatures(),\n    additionalProfile = Array.isArray(iiifInfo.imageInfo.profile) && iiifInfo.imageInfo.profile.length > 1,\n    profileSupports = additionalProfile && iiifInfo.imageInfo.profile[1].supports ? iiifInfo.imageInfo.profile[1].supports : [],\n    profileFormats = additionalProfile && iiifInfo.imageInfo.profile[1].formats ? iiifInfo.imageInfo.profile[1].formats : [],\n    profileQualities = additionalProfile && iiifInfo.imageInfo.profile[1].qualities ? iiifInfo.imageInfo.profile[1].qualities : [];\n  return {\n    url: iiifInfo.imageInfo['@id'].replace(/\\/?(?:info\\.json)?$/g, ''),\n    sizes: iiifInfo.imageInfo.sizes === undefined ? undefined : iiifInfo.imageInfo.sizes.map(function (size) {\n      return [size.width, size.height];\n    }),\n    tileSize: iiifInfo.imageInfo.tiles === undefined ? undefined : [iiifInfo.imageInfo.tiles.map(function (tile) {\n      return tile.width;\n    })[0], iiifInfo.imageInfo.tiles.map(function (tile) {\n      return tile.height === undefined ? tile.width : tile.height;\n    })[0]],\n    resolutions: iiifInfo.imageInfo.tiles === undefined ? undefined : iiifInfo.imageInfo.tiles.map(function (tile) {\n      return tile.scaleFactors;\n    })[0],\n    supports: [].concat(_toConsumableArray(levelProfile.supports), _toConsumableArray(profileSupports)),\n    formats: [].concat(_toConsumableArray(levelProfile.formats), _toConsumableArray(profileFormats)),\n    qualities: [].concat(_toConsumableArray(levelProfile.qualities), _toConsumableArray(profileQualities))\n  };\n}\nfunction generateVersion3Options(iiifInfo) {\n  var levelProfile = iiifInfo.getComplianceLevelSupportedFeatures(),\n    formats = iiifInfo.imageInfo.extraFormats === undefined ? levelProfile.formats : [].concat(_toConsumableArray(levelProfile.formats), _toConsumableArray(iiifInfo.imageInfo.extraFormats)),\n    preferredFormat = iiifInfo.imageInfo.preferredFormats !== undefined && Array.isArray(iiifInfo.imageInfo.preferredFormats) && iiifInfo.imageInfo.preferredFormats.length > 0 ? iiifInfo.imageInfo.preferredFormats.filter(function (format) {\n      return ['jpg', 'png', 'gif'].includes(format);\n    }).reduce(function (acc, format) {\n      return acc === undefined && formats.includes(format) ? format : acc;\n    }, undefined) : undefined;\n  return {\n    url: iiifInfo.imageInfo['id'],\n    sizes: iiifInfo.imageInfo.sizes === undefined ? undefined : iiifInfo.imageInfo.sizes.map(function (size) {\n      return [size.width, size.height];\n    }),\n    tileSize: iiifInfo.imageInfo.tiles === undefined ? undefined : [iiifInfo.imageInfo.tiles.map(function (tile) {\n      return tile.width;\n    })[0], iiifInfo.imageInfo.tiles.map(function (tile) {\n      return tile.height;\n    })[0]],\n    resolutions: iiifInfo.imageInfo.tiles === undefined ? undefined : iiifInfo.imageInfo.tiles.map(function (tile) {\n      return tile.scaleFactors;\n    })[0],\n    supports: iiifInfo.imageInfo.extraFeatures === undefined ? levelProfile.supports : [].concat(_toConsumableArray(levelProfile.supports), _toConsumableArray(iiifInfo.imageInfo.extraFeatures)),\n    formats: formats,\n    qualities: iiifInfo.imageInfo.extraQualities === undefined ? levelProfile.qualities : [].concat(_toConsumableArray(levelProfile.qualities), _toConsumableArray(iiifInfo.imageInfo.extraQualities)),\n    preferredFormat: preferredFormat\n  };\n}\nvar versionFunctions = {};\nversionFunctions[Versions.VERSION1] = generateVersion1Options;\nversionFunctions[Versions.VERSION2] = generateVersion2Options;\nversionFunctions[Versions.VERSION3] = generateVersion3Options;\n\n/**\n * @classdesc\n * Format for transforming IIIF Image API image information responses into\n * IIIF tile source ready options\n *\n * @api\n */\nvar IIIFInfo = /*#__PURE__*/function () {\n  /**\n   * @param {string|ImageInformationResponse} imageInfo\n   * Deserialized image information JSON response object or JSON response as string\n   */\n  function IIIFInfo(imageInfo) {\n    _classCallCheck(this, IIIFInfo);\n    this.setImageInfo(imageInfo);\n  }\n\n  /**\n   * @param {string|ImageInformationResponse} imageInfo\n   * Deserialized image information JSON response object or JSON response as string\n   * @api\n   */\n  return _createClass(IIIFInfo, [{\n    key: \"setImageInfo\",\n    value: function setImageInfo(imageInfo) {\n      if (typeof imageInfo == 'string') {\n        this.imageInfo = JSON.parse(imageInfo);\n      } else {\n        this.imageInfo = imageInfo;\n      }\n    }\n\n    /**\n     * @return {Versions|undefined} Major IIIF version.\n     * @api\n     */\n  }, {\n    key: \"getImageApiVersion\",\n    value: function getImageApiVersion() {\n      if (this.imageInfo === undefined) {\n        return undefined;\n      }\n      var context = this.imageInfo['@context'] || 'ol-no-context';\n      if (typeof context == 'string') {\n        context = [context];\n      }\n      for (var i = 0; i < context.length; i++) {\n        switch (context[i]) {\n          case 'http://library.stanford.edu/iiif/image-api/1.1/context.json':\n          case 'http://iiif.io/api/image/1/context.json':\n            return Versions.VERSION1;\n          case 'http://iiif.io/api/image/2/context.json':\n            return Versions.VERSION2;\n          case 'http://iiif.io/api/image/3/context.json':\n            return Versions.VERSION3;\n          case 'ol-no-context':\n            // Image API 1.0 has no '@context'\n            if (this.getComplianceLevelEntryFromProfile(Versions.VERSION1) && this.imageInfo.identifier) {\n              return Versions.VERSION1;\n            }\n            break;\n          default:\n        }\n      }\n      assert(false, 'Cannot determine IIIF Image API version from provided image information JSON');\n    }\n\n    /**\n     * @param {Versions} version Optional IIIF image API version\n     * @return {string|undefined} Compliance level as it appears in the IIIF image information\n     * response.\n     */\n  }, {\n    key: \"getComplianceLevelEntryFromProfile\",\n    value: function getComplianceLevelEntryFromProfile(version) {\n      if (this.imageInfo === undefined || this.imageInfo.profile === undefined) {\n        return undefined;\n      }\n      if (version === undefined) {\n        version = this.getImageApiVersion();\n      }\n      switch (version) {\n        case Versions.VERSION1:\n          if (COMPLIANCE_VERSION1.test(this.imageInfo.profile)) {\n            return this.imageInfo.profile;\n          }\n          break;\n        case Versions.VERSION3:\n          if (COMPLIANCE_VERSION3.test(this.imageInfo.profile)) {\n            return this.imageInfo.profile;\n          }\n          break;\n        case Versions.VERSION2:\n          if (typeof this.imageInfo.profile === 'string' && COMPLIANCE_VERSION2.test(this.imageInfo.profile)) {\n            return this.imageInfo.profile;\n          }\n          if (Array.isArray(this.imageInfo.profile) && this.imageInfo.profile.length > 0 && typeof this.imageInfo.profile[0] === 'string' && COMPLIANCE_VERSION2.test(this.imageInfo.profile[0])) {\n            return this.imageInfo.profile[0];\n          }\n          break;\n        default:\n      }\n      return undefined;\n    }\n\n    /**\n     * @param {Versions} version Optional IIIF image API version\n     * @return {string} Compliance level, on of 'level0', 'level1' or 'level2' or undefined\n     */\n  }, {\n    key: \"getComplianceLevelFromProfile\",\n    value: function getComplianceLevelFromProfile(version) {\n      var complianceLevel = this.getComplianceLevelEntryFromProfile(version);\n      if (complianceLevel === undefined) {\n        return undefined;\n      }\n      var level = complianceLevel.match(/level[0-2](?:\\.json)?$/g);\n      return Array.isArray(level) ? level[0].replace('.json', '') : undefined;\n    }\n\n    /**\n     * @return {SupportedFeatures|undefined} Image formats, qualities and region / size calculation\n     * methods that are supported by the IIIF service.\n     */\n  }, {\n    key: \"getComplianceLevelSupportedFeatures\",\n    value: function getComplianceLevelSupportedFeatures() {\n      if (this.imageInfo === undefined) {\n        return undefined;\n      }\n      var version = this.getImageApiVersion();\n      var level = this.getComplianceLevelFromProfile(version);\n      if (level === undefined) {\n        return IIIF_PROFILE_VALUES['none']['none'];\n      }\n      return IIIF_PROFILE_VALUES[version][level];\n    }\n\n    /**\n     * @param {PreferredOptions} [preferredOptions] Optional options for preferred format and quality.\n     * @return {import(\"../source/IIIF.js\").Options|undefined} IIIF tile source ready constructor options.\n     * @api\n     */\n  }, {\n    key: \"getTileSourceOptions\",\n    value: function getTileSourceOptions(preferredOptions) {\n      var options = preferredOptions || {},\n        version = this.getImageApiVersion();\n      if (version === undefined) {\n        return undefined;\n      }\n      var imageOptions = version === undefined ? undefined : versionFunctions[version](this);\n      if (imageOptions === undefined) {\n        return undefined;\n      }\n      return {\n        url: imageOptions.url,\n        version: version,\n        size: [this.imageInfo.width, this.imageInfo.height],\n        sizes: imageOptions.sizes,\n        format: options.format !== undefined && imageOptions.formats.includes(options.format) ? options.format : imageOptions.preferredFormat !== undefined ? imageOptions.preferredFormat : 'jpg',\n        supports: imageOptions.supports,\n        quality: options.quality && imageOptions.qualities.includes(options.quality) ? options.quality : imageOptions.qualities.includes('native') ? 'native' : 'default',\n        resolutions: Array.isArray(imageOptions.resolutions) ? imageOptions.resolutions.sort(function (a, b) {\n          return b - a;\n        }) : undefined,\n        tileSize: imageOptions.tileSize\n      };\n    }\n  }]);\n}();\nexport default IIIFInfo;","map":{"version":3,"names":["assert","Versions","VERSION1","VERSION2","VERSION3","IIIF_PROFILE_VALUES","supports","formats","qualities","COMPLIANCE_VERSION1","COMPLIANCE_VERSION2","COMPLIANCE_VERSION3","generateVersion1Options","iiifInfo","levelProfile","getComplianceLevelSupportedFeatures","undefined","url","imageInfo","replace","concat","_toConsumableArray","resolutions","scale_factors","tileSize","tile_width","tile_height","generateVersion2Options","additionalProfile","Array","isArray","profile","length","profileSupports","profileFormats","profileQualities","sizes","map","size","width","height","tiles","tile","scaleFactors","generateVersion3Options","extraFormats","preferredFormat","preferredFormats","filter","format","includes","reduce","acc","extraFeatures","extraQualities","versionFunctions","IIIFInfo","_classCallCheck","setImageInfo","_createClass","key","value","JSON","parse","getImageApiVersion","context","i","getComplianceLevelEntryFromProfile","identifier","version","test","getComplianceLevelFromProfile","complianceLevel","level","match","getTileSourceOptions","preferredOptions","options","imageOptions","quality","sort","a","b"],"sources":["/Users/akio/Downloads/themeforest-veRyTIGn-mofi-vue-js-admin-template/theme/node_modules/ol/format/IIIFInfo.js"],"sourcesContent":["/**\n * @module ol/format/IIIFInfo\n */\n\nimport {assert} from '../asserts.js';\n\n/**\n * @typedef {Object} PreferredOptions\n * @property {string} [format] Preferred image format. Will be used if the image information\n * indicates support for that format.\n * @property {string} [quality] IIIF image qualitiy.  Will be used if the image information\n * indicates support for that quality.\n */\n\n/**\n * @typedef {Object} SupportedFeatures\n * @property {Array<string>} [supports] Supported IIIF image size and region\n * calculation features.\n * @property {Array<string>} [formats] Supported image formats.\n * @property {Array<string>} [qualities] Supported IIIF image qualities.\n */\n\n/**\n * @typedef {Object} TileInfo\n * @property {Array<number>} scaleFactors Supported resolution scaling factors.\n * @property {number} width Tile width in pixels.\n * @property {number} [height] Tile height in pixels. Same as tile width if height is\n * not given.\n */\n\n/**\n * @typedef {Object} IiifProfile\n * @property {Array<string>} [formats] Supported image formats for the image service.\n * @property {Array<string>} [qualities] Supported IIIF image qualities.\n * @property {Array<string>} [supports] Supported features.\n * @property {number} [maxArea] Maximum area (pixels) available for this image service.\n * @property {number} [maxHeight] Maximum height.\n * @property {number} [maxWidth] Maximum width.\n */\n\n/**\n * @typedef {Object<string,string|number|Array<number|string|IiifProfile|Object<string, number>|TileInfo>>}\n *    ImageInformationResponse\n */\n\n/**\n * Enum representing the major IIIF Image API versions\n * @enum {string}\n */\nexport const Versions = {\n  VERSION1: 'version1',\n  VERSION2: 'version2',\n  VERSION3: 'version3',\n};\n\n/**\n * Supported image formats, qualities and supported region / size calculation features\n * for different image API versions and compliance levels\n * @const\n * @type {Object<string, Object<string, SupportedFeatures>>}\n */\nconst IIIF_PROFILE_VALUES = {};\nIIIF_PROFILE_VALUES[Versions.VERSION1] = {\n  'level0': {\n    supports: [],\n    formats: [],\n    qualities: ['native'],\n  },\n  'level1': {\n    supports: ['regionByPx', 'sizeByW', 'sizeByH', 'sizeByPct'],\n    formats: ['jpg'],\n    qualities: ['native'],\n  },\n  'level2': {\n    supports: [\n      'regionByPx',\n      'regionByPct',\n      'sizeByW',\n      'sizeByH',\n      'sizeByPct',\n      'sizeByConfinedWh',\n      'sizeByWh',\n    ],\n    formats: ['jpg', 'png'],\n    qualities: ['native', 'color', 'grey', 'bitonal'],\n  },\n};\nIIIF_PROFILE_VALUES[Versions.VERSION2] = {\n  'level0': {\n    supports: [],\n    formats: ['jpg'],\n    qualities: ['default'],\n  },\n  'level1': {\n    supports: ['regionByPx', 'sizeByW', 'sizeByH', 'sizeByPct'],\n    formats: ['jpg'],\n    qualities: ['default'],\n  },\n  'level2': {\n    supports: [\n      'regionByPx',\n      'regionByPct',\n      'sizeByW',\n      'sizeByH',\n      'sizeByPct',\n      'sizeByConfinedWh',\n      'sizeByDistortedWh',\n      'sizeByWh',\n    ],\n    formats: ['jpg', 'png'],\n    qualities: ['default', 'bitonal'],\n  },\n};\nIIIF_PROFILE_VALUES[Versions.VERSION3] = {\n  'level0': {\n    supports: [],\n    formats: ['jpg'],\n    qualities: ['default'],\n  },\n  'level1': {\n    supports: ['regionByPx', 'regionSquare', 'sizeByW', 'sizeByH', 'sizeByWh'],\n    formats: ['jpg'],\n    qualities: ['default'],\n  },\n  'level2': {\n    supports: [\n      'regionByPx',\n      'regionSquare',\n      'regionByPct',\n      'sizeByW',\n      'sizeByH',\n      'sizeByPct',\n      'sizeByConfinedWh',\n      'sizeByWh',\n    ],\n    formats: ['jpg', 'png'],\n    qualities: ['default'],\n  },\n};\nIIIF_PROFILE_VALUES['none'] = {\n  'none': {\n    supports: [],\n    formats: [],\n    qualities: [],\n  },\n};\n\nconst COMPLIANCE_VERSION1 =\n  /^https?:\\/\\/library\\.stanford\\.edu\\/iiif\\/image-api\\/(?:1\\.1\\/)?compliance\\.html#level[0-2]$/;\nconst COMPLIANCE_VERSION2 =\n  /^https?:\\/\\/iiif\\.io\\/api\\/image\\/2\\/level[0-2](?:\\.json)?$/;\nconst COMPLIANCE_VERSION3 =\n  /(^https?:\\/\\/iiif\\.io\\/api\\/image\\/3\\/level[0-2](?:\\.json)?$)|(^level[0-2]$)/;\n\nfunction generateVersion1Options(iiifInfo) {\n  let levelProfile = iiifInfo.getComplianceLevelSupportedFeatures();\n  // Version 1.0 and 1.1 do not require a profile.\n  if (levelProfile === undefined) {\n    levelProfile = IIIF_PROFILE_VALUES[Versions.VERSION1]['level0'];\n  }\n  return {\n    url:\n      iiifInfo.imageInfo['@id'] === undefined\n        ? undefined\n        : iiifInfo.imageInfo['@id'].replace(/\\/?(?:info\\.json)?$/g, ''),\n    supports: levelProfile.supports,\n    formats: [\n      ...levelProfile.formats,\n      iiifInfo.imageInfo.formats === undefined\n        ? []\n        : iiifInfo.imageInfo.formats,\n    ],\n    qualities: [\n      ...levelProfile.qualities,\n      iiifInfo.imageInfo.qualities === undefined\n        ? []\n        : iiifInfo.imageInfo.qualities,\n    ],\n    resolutions: iiifInfo.imageInfo.scale_factors,\n    tileSize:\n      iiifInfo.imageInfo.tile_width !== undefined\n        ? iiifInfo.imageInfo.tile_height !== undefined\n          ? [iiifInfo.imageInfo.tile_width, iiifInfo.imageInfo.tile_height]\n          : [iiifInfo.imageInfo.tile_width, iiifInfo.imageInfo.tile_width]\n        : iiifInfo.imageInfo.tile_height != undefined\n        ? [iiifInfo.imageInfo.tile_height, iiifInfo.imageInfo.tile_height]\n        : undefined,\n  };\n}\n\nfunction generateVersion2Options(iiifInfo) {\n  const levelProfile = iiifInfo.getComplianceLevelSupportedFeatures(),\n    additionalProfile =\n      Array.isArray(iiifInfo.imageInfo.profile) &&\n      iiifInfo.imageInfo.profile.length > 1,\n    profileSupports =\n      additionalProfile && iiifInfo.imageInfo.profile[1].supports\n        ? iiifInfo.imageInfo.profile[1].supports\n        : [],\n    profileFormats =\n      additionalProfile && iiifInfo.imageInfo.profile[1].formats\n        ? iiifInfo.imageInfo.profile[1].formats\n        : [],\n    profileQualities =\n      additionalProfile && iiifInfo.imageInfo.profile[1].qualities\n        ? iiifInfo.imageInfo.profile[1].qualities\n        : [];\n  return {\n    url: iiifInfo.imageInfo['@id'].replace(/\\/?(?:info\\.json)?$/g, ''),\n    sizes:\n      iiifInfo.imageInfo.sizes === undefined\n        ? undefined\n        : iiifInfo.imageInfo.sizes.map(function (size) {\n            return [size.width, size.height];\n          }),\n    tileSize:\n      iiifInfo.imageInfo.tiles === undefined\n        ? undefined\n        : [\n            iiifInfo.imageInfo.tiles.map(function (tile) {\n              return tile.width;\n            })[0],\n            iiifInfo.imageInfo.tiles.map(function (tile) {\n              return tile.height === undefined ? tile.width : tile.height;\n            })[0],\n          ],\n    resolutions:\n      iiifInfo.imageInfo.tiles === undefined\n        ? undefined\n        : iiifInfo.imageInfo.tiles.map(function (tile) {\n            return tile.scaleFactors;\n          })[0],\n    supports: [...levelProfile.supports, ...profileSupports],\n    formats: [...levelProfile.formats, ...profileFormats],\n    qualities: [...levelProfile.qualities, ...profileQualities],\n  };\n}\n\nfunction generateVersion3Options(iiifInfo) {\n  const levelProfile = iiifInfo.getComplianceLevelSupportedFeatures(),\n    formats =\n      iiifInfo.imageInfo.extraFormats === undefined\n        ? levelProfile.formats\n        : [...levelProfile.formats, ...iiifInfo.imageInfo.extraFormats],\n    preferredFormat =\n      iiifInfo.imageInfo.preferredFormats !== undefined &&\n      Array.isArray(iiifInfo.imageInfo.preferredFormats) &&\n      iiifInfo.imageInfo.preferredFormats.length > 0\n        ? iiifInfo.imageInfo.preferredFormats\n            .filter(function (format) {\n              return ['jpg', 'png', 'gif'].includes(format);\n            })\n            .reduce(function (acc, format) {\n              return acc === undefined && formats.includes(format)\n                ? format\n                : acc;\n            }, undefined)\n        : undefined;\n  return {\n    url: iiifInfo.imageInfo['id'],\n    sizes:\n      iiifInfo.imageInfo.sizes === undefined\n        ? undefined\n        : iiifInfo.imageInfo.sizes.map(function (size) {\n            return [size.width, size.height];\n          }),\n    tileSize:\n      iiifInfo.imageInfo.tiles === undefined\n        ? undefined\n        : [\n            iiifInfo.imageInfo.tiles.map(function (tile) {\n              return tile.width;\n            })[0],\n            iiifInfo.imageInfo.tiles.map(function (tile) {\n              return tile.height;\n            })[0],\n          ],\n    resolutions:\n      iiifInfo.imageInfo.tiles === undefined\n        ? undefined\n        : iiifInfo.imageInfo.tiles.map(function (tile) {\n            return tile.scaleFactors;\n          })[0],\n    supports:\n      iiifInfo.imageInfo.extraFeatures === undefined\n        ? levelProfile.supports\n        : [...levelProfile.supports, ...iiifInfo.imageInfo.extraFeatures],\n    formats: formats,\n    qualities:\n      iiifInfo.imageInfo.extraQualities === undefined\n        ? levelProfile.qualities\n        : [...levelProfile.qualities, ...iiifInfo.imageInfo.extraQualities],\n    preferredFormat: preferredFormat,\n  };\n}\n\nconst versionFunctions = {};\nversionFunctions[Versions.VERSION1] = generateVersion1Options;\nversionFunctions[Versions.VERSION2] = generateVersion2Options;\nversionFunctions[Versions.VERSION3] = generateVersion3Options;\n\n/**\n * @classdesc\n * Format for transforming IIIF Image API image information responses into\n * IIIF tile source ready options\n *\n * @api\n */\nclass IIIFInfo {\n  /**\n   * @param {string|ImageInformationResponse} imageInfo\n   * Deserialized image information JSON response object or JSON response as string\n   */\n  constructor(imageInfo) {\n    this.setImageInfo(imageInfo);\n  }\n\n  /**\n   * @param {string|ImageInformationResponse} imageInfo\n   * Deserialized image information JSON response object or JSON response as string\n   * @api\n   */\n  setImageInfo(imageInfo) {\n    if (typeof imageInfo == 'string') {\n      this.imageInfo = JSON.parse(imageInfo);\n    } else {\n      this.imageInfo = imageInfo;\n    }\n  }\n\n  /**\n   * @return {Versions|undefined} Major IIIF version.\n   * @api\n   */\n  getImageApiVersion() {\n    if (this.imageInfo === undefined) {\n      return undefined;\n    }\n    let context = this.imageInfo['@context'] || 'ol-no-context';\n    if (typeof context == 'string') {\n      context = [context];\n    }\n    for (let i = 0; i < context.length; i++) {\n      switch (context[i]) {\n        case 'http://library.stanford.edu/iiif/image-api/1.1/context.json':\n        case 'http://iiif.io/api/image/1/context.json':\n          return Versions.VERSION1;\n        case 'http://iiif.io/api/image/2/context.json':\n          return Versions.VERSION2;\n        case 'http://iiif.io/api/image/3/context.json':\n          return Versions.VERSION3;\n        case 'ol-no-context':\n          // Image API 1.0 has no '@context'\n          if (\n            this.getComplianceLevelEntryFromProfile(Versions.VERSION1) &&\n            this.imageInfo.identifier\n          ) {\n            return Versions.VERSION1;\n          }\n          break;\n        default:\n      }\n    }\n    assert(\n      false,\n      'Cannot determine IIIF Image API version from provided image information JSON'\n    );\n  }\n\n  /**\n   * @param {Versions} version Optional IIIF image API version\n   * @return {string|undefined} Compliance level as it appears in the IIIF image information\n   * response.\n   */\n  getComplianceLevelEntryFromProfile(version) {\n    if (this.imageInfo === undefined || this.imageInfo.profile === undefined) {\n      return undefined;\n    }\n    if (version === undefined) {\n      version = this.getImageApiVersion();\n    }\n    switch (version) {\n      case Versions.VERSION1:\n        if (COMPLIANCE_VERSION1.test(this.imageInfo.profile)) {\n          return this.imageInfo.profile;\n        }\n        break;\n      case Versions.VERSION3:\n        if (COMPLIANCE_VERSION3.test(this.imageInfo.profile)) {\n          return this.imageInfo.profile;\n        }\n        break;\n      case Versions.VERSION2:\n        if (\n          typeof this.imageInfo.profile === 'string' &&\n          COMPLIANCE_VERSION2.test(this.imageInfo.profile)\n        ) {\n          return this.imageInfo.profile;\n        }\n        if (\n          Array.isArray(this.imageInfo.profile) &&\n          this.imageInfo.profile.length > 0 &&\n          typeof this.imageInfo.profile[0] === 'string' &&\n          COMPLIANCE_VERSION2.test(this.imageInfo.profile[0])\n        ) {\n          return this.imageInfo.profile[0];\n        }\n        break;\n      default:\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Versions} version Optional IIIF image API version\n   * @return {string} Compliance level, on of 'level0', 'level1' or 'level2' or undefined\n   */\n  getComplianceLevelFromProfile(version) {\n    const complianceLevel = this.getComplianceLevelEntryFromProfile(version);\n    if (complianceLevel === undefined) {\n      return undefined;\n    }\n    const level = complianceLevel.match(/level[0-2](?:\\.json)?$/g);\n    return Array.isArray(level) ? level[0].replace('.json', '') : undefined;\n  }\n\n  /**\n   * @return {SupportedFeatures|undefined} Image formats, qualities and region / size calculation\n   * methods that are supported by the IIIF service.\n   */\n  getComplianceLevelSupportedFeatures() {\n    if (this.imageInfo === undefined) {\n      return undefined;\n    }\n    const version = this.getImageApiVersion();\n    const level = this.getComplianceLevelFromProfile(version);\n    if (level === undefined) {\n      return IIIF_PROFILE_VALUES['none']['none'];\n    }\n    return IIIF_PROFILE_VALUES[version][level];\n  }\n\n  /**\n   * @param {PreferredOptions} [preferredOptions] Optional options for preferred format and quality.\n   * @return {import(\"../source/IIIF.js\").Options|undefined} IIIF tile source ready constructor options.\n   * @api\n   */\n  getTileSourceOptions(preferredOptions) {\n    const options = preferredOptions || {},\n      version = this.getImageApiVersion();\n    if (version === undefined) {\n      return undefined;\n    }\n    const imageOptions =\n      version === undefined ? undefined : versionFunctions[version](this);\n    if (imageOptions === undefined) {\n      return undefined;\n    }\n    return {\n      url: imageOptions.url,\n      version: version,\n      size: [this.imageInfo.width, this.imageInfo.height],\n      sizes: imageOptions.sizes,\n      format:\n        options.format !== undefined &&\n        imageOptions.formats.includes(options.format)\n          ? options.format\n          : imageOptions.preferredFormat !== undefined\n          ? imageOptions.preferredFormat\n          : 'jpg',\n      supports: imageOptions.supports,\n      quality:\n        options.quality && imageOptions.qualities.includes(options.quality)\n          ? options.quality\n          : imageOptions.qualities.includes('native')\n          ? 'native'\n          : 'default',\n      resolutions: Array.isArray(imageOptions.resolutions)\n        ? imageOptions.resolutions.sort(function (a, b) {\n            return b - a;\n          })\n        : undefined,\n      tileSize: imageOptions.tileSize,\n    };\n  }\n}\n\nexport default IIIFInfo;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}